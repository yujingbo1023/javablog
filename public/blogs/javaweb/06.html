<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>06-Tomcat和Serevlet | 码路全栈开发</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/javablog/public/favicon.ico">
    <meta name="description" content="快来玩java全栈呀">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/javablog/public/assets/css/0.styles.ca9f9cd1.css" as="style"><link rel="preload" href="/javablog/public/assets/js/app.f9489de6.js" as="script"><link rel="preload" href="/javablog/public/assets/js/22.f445cee3.js" as="script"><link rel="preload" href="/javablog/public/assets/js/1.4a2aebf2.js" as="script"><link rel="preload" href="/javablog/public/assets/js/21.f6b95d5b.js" as="script"><link rel="prefetch" href="/javablog/public/assets/js/10.b883d06c.js"><link rel="prefetch" href="/javablog/public/assets/js/11.9b89c400.js"><link rel="prefetch" href="/javablog/public/assets/js/12.9263a044.js"><link rel="prefetch" href="/javablog/public/assets/js/13.89f3bc03.js"><link rel="prefetch" href="/javablog/public/assets/js/14.029689d2.js"><link rel="prefetch" href="/javablog/public/assets/js/15.84f4c447.js"><link rel="prefetch" href="/javablog/public/assets/js/16.b6d501b6.js"><link rel="prefetch" href="/javablog/public/assets/js/17.5f74a7b4.js"><link rel="prefetch" href="/javablog/public/assets/js/18.b2eddc4d.js"><link rel="prefetch" href="/javablog/public/assets/js/19.6a28e472.js"><link rel="prefetch" href="/javablog/public/assets/js/20.b61f87e9.js"><link rel="prefetch" href="/javablog/public/assets/js/23.2ab976cb.js"><link rel="prefetch" href="/javablog/public/assets/js/24.36bafb1f.js"><link rel="prefetch" href="/javablog/public/assets/js/25.9782abd5.js"><link rel="prefetch" href="/javablog/public/assets/js/26.26077aaa.js"><link rel="prefetch" href="/javablog/public/assets/js/27.67ae9720.js"><link rel="prefetch" href="/javablog/public/assets/js/28.0840530b.js"><link rel="prefetch" href="/javablog/public/assets/js/29.c9fa891b.js"><link rel="prefetch" href="/javablog/public/assets/js/3.7841850d.js"><link rel="prefetch" href="/javablog/public/assets/js/30.8f83a309.js"><link rel="prefetch" href="/javablog/public/assets/js/31.e16118e0.js"><link rel="prefetch" href="/javablog/public/assets/js/32.edbcc332.js"><link rel="prefetch" href="/javablog/public/assets/js/33.12f548f1.js"><link rel="prefetch" href="/javablog/public/assets/js/34.0316fd5b.js"><link rel="prefetch" href="/javablog/public/assets/js/35.3ce76478.js"><link rel="prefetch" href="/javablog/public/assets/js/36.4113fb22.js"><link rel="prefetch" href="/javablog/public/assets/js/37.28da6167.js"><link rel="prefetch" href="/javablog/public/assets/js/38.7aff066c.js"><link rel="prefetch" href="/javablog/public/assets/js/39.49d50c8f.js"><link rel="prefetch" href="/javablog/public/assets/js/4.0f2c37ad.js"><link rel="prefetch" href="/javablog/public/assets/js/40.4b2fbfc5.js"><link rel="prefetch" href="/javablog/public/assets/js/41.de4137d6.js"><link rel="prefetch" href="/javablog/public/assets/js/42.d60f4f04.js"><link rel="prefetch" href="/javablog/public/assets/js/43.59b2d125.js"><link rel="prefetch" href="/javablog/public/assets/js/44.75dd05b4.js"><link rel="prefetch" href="/javablog/public/assets/js/45.ecc96d96.js"><link rel="prefetch" href="/javablog/public/assets/js/46.36b96e91.js"><link rel="prefetch" href="/javablog/public/assets/js/47.8fac4f6d.js"><link rel="prefetch" href="/javablog/public/assets/js/48.43d05452.js"><link rel="prefetch" href="/javablog/public/assets/js/49.9ca2e11b.js"><link rel="prefetch" href="/javablog/public/assets/js/5.5196fe7c.js"><link rel="prefetch" href="/javablog/public/assets/js/50.99970d01.js"><link rel="prefetch" href="/javablog/public/assets/js/51.1979232e.js"><link rel="prefetch" href="/javablog/public/assets/js/52.94e77a6e.js"><link rel="prefetch" href="/javablog/public/assets/js/53.5087182d.js"><link rel="prefetch" href="/javablog/public/assets/js/54.e8296e1a.js"><link rel="prefetch" href="/javablog/public/assets/js/55.96ff4315.js"><link rel="prefetch" href="/javablog/public/assets/js/56.80f952fd.js"><link rel="prefetch" href="/javablog/public/assets/js/6.81c49740.js"><link rel="prefetch" href="/javablog/public/assets/js/7.fcb540a1.js"><link rel="prefetch" href="/javablog/public/assets/js/8.aac8a648.js"><link rel="prefetch" href="/javablog/public/assets/js/9.ede4f249.js">
    <link rel="stylesheet" href="/javablog/public/assets/css/0.styles.ca9f9cd1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1c636796><div data-v-1c636796><div class="password-shadow password-wrapper-out" style="display:none;" data-v-2c3e9f55 data-v-1c636796 data-v-1c636796><h3 class="title" data-v-2c3e9f55>码路全栈开发</h3> <p class="description" data-v-2c3e9f55>快来玩java全栈呀</p> <label id="box" class="inputBox" data-v-2c3e9f55><input type="password" value="" data-v-2c3e9f55> <span data-v-2c3e9f55>Konck! Knock!</span> <button data-v-2c3e9f55>OK</button></label> <div class="footer" data-v-2c3e9f55><span data-v-2c3e9f55><i class="iconfont reco-theme" data-v-2c3e9f55></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-2c3e9f55>vuePress-theme-reco</a></span> <span data-v-2c3e9f55><i class="iconfont reco-copyright" data-v-2c3e9f55></i> <a data-v-2c3e9f55><span data-v-2c3e9f55>码路</span>
          
        <span data-v-2c3e9f55>2017 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-1c636796><header class="navbar" data-v-1c636796><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javablog/public/" class="home-link router-link-active"><img src="/javablog/public/logo.png" alt="码路全栈开发" class="logo"> <span class="site-name">码路全栈开发</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javablog/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      全栈开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javase/" class="nav-link"><i class="undefined"></i>
  javase
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li></ul></div></div><div class="nav-item"><a href="/javablog/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/javablog/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1c636796></div> <aside class="sidebar" data-v-1c636796><div class="personal-info-wrapper" data-v-6f92ba70 data-v-1c636796><img src="/javablog/public/avatar.png" alt="author-avatar" class="personal-img" data-v-6f92ba70> <h3 class="name" data-v-6f92ba70>
    码路
  </h3> <div class="num" data-v-6f92ba70><div data-v-6f92ba70><h3 data-v-6f92ba70>46</h3> <h6 data-v-6f92ba70>Articles</h6></div> <div data-v-6f92ba70><h3 data-v-6f92ba70>5</h3> <h6 data-v-6f92ba70>Tags</h6></div></div> <ul class="social-links" data-v-6f92ba70></ul> <hr data-v-6f92ba70></div> <nav class="nav-links"><div class="nav-item"><a href="/javablog/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      全栈开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javase/" class="nav-link"><i class="undefined"></i>
  javase
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li></ul></div></div><div class="nav-item"><a href="/javablog/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/javablog/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-2c3e9f55 data-v-1c636796><h3 class="title" data-v-2c3e9f55>06-Tomcat和Serevlet</h3> <!----> <label id="box" class="inputBox" data-v-2c3e9f55><input type="password" value="" data-v-2c3e9f55> <span data-v-2c3e9f55>Konck! Knock!</span> <button data-v-2c3e9f55>OK</button></label> <div class="footer" data-v-2c3e9f55><span data-v-2c3e9f55><i class="iconfont reco-theme" data-v-2c3e9f55></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-2c3e9f55>vuePress-theme-reco</a></span> <span data-v-2c3e9f55><i class="iconfont reco-copyright" data-v-2c3e9f55></i> <a data-v-2c3e9f55><span data-v-2c3e9f55>码路</span>
          
        <span data-v-2c3e9f55>2017 - </span>
        2023
      </a></span></div></div> <div data-v-1c636796><div data-v-1c636796><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">06-Tomcat和Serevlet</h1> <div data-v-6acedb3b><i class="iconfont reco-account" data-v-6acedb3b><span data-v-6acedb3b>码路</span></i> <i class="iconfont reco-date" data-v-6acedb3b><span data-v-6acedb3b>12/15/2028</span></i> <!----> <i class="tags iconfont reco-tag" data-v-6acedb3b><span class="tag-item" data-v-6acedb3b>javaweb</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="一-tomcat"><a href="#一-tomcat" class="header-anchor">#</a> 一，Tomcat</h2> <h3 id="_1-什么是web服务器"><a href="#_1-什么是web服务器" class="header-anchor">#</a> 1，什么是web服务器</h3> <p>Web服务器是一个应该程序（软件），对HTTP协议的操作进行封装，使得程序员不必直接对协议进行操作，让Web开发更加便捷。主要功能是&quot;提供网上信息浏览服务&quot;。</p> <p><img src="/javablog/public/assets/img/1702370619395.5e559a03.png" alt="1702370619395"></p> <p>Web服务器是安装在服务器端的一款软件，将来我们把自己写的Web项目部署到Web Tomcat服务器软件中，当Web服务器软件启动后，部署在Web服务器软件中的页面就可以直接通过浏览器来访问了。对于Web服务器来说，实现的方案有很多，Tomcat只是其中的一种，而除了Tomcat以外，还有很多优秀的Web服务器，比如:</p> <p><img src="/javablog/public/assets/img/1702370691238.94ef52d8.png" alt="1702370691238"></p> <p>Tomcat的相关概念:</p> <ul><li>Tomcat是Apache软件基金会一个核心项目，是一个开源免费的轻量级Web服务器，支持Servlet/JSP少量JavaEE规范。</li> <li>概念中提到了JavaEE规范，那什么又是JavaEE规范呢? 概念中提到了JavaEE规范，那什么又是JavaEE规范呢?
<ul><li>JavaEE: Java Enterprise Edition, Java企业版。指Java企业级开发的技术规范总和。包含13项技术规范: JDBC、JNDI、EJB、RMI、JSP、Servlet、XML、JMS、Java IDL、JTS、JTA、JavaMail、JAF。</li></ul></li> <li>因为Tomcat支持Servlet/JSP规范，所以Tomcat也被称为Web容器、Servlet容器。Servlet需要依赖Tomcat才能运行。</li> <li>Tomcat的官网: https://tomcat.apache.org/ 从官网上可以下载对应的版本进行使用。</li></ul> <h3 id="_2-tomcat的基本使用"><a href="#_2-tomcat的基本使用" class="header-anchor">#</a> 2，Tomcat的基本使用</h3> <h4 id="_2-1-tomcat的基本使用"><a href="#_2-1-tomcat的基本使用" class="header-anchor">#</a> 2.1 Tomcat的基本使用</h4> <p>直接从官网下载</p> <p><img src="/javablog/public/assets/img/1702370846663.8726c382.png" alt="1702370846663"></p> <p>Tomcat是绿色版, 直接解压即可。在D盘的software目录下，将 <code>apache-tomcat-8.5.68-windows-x64.zip</code> 进行解压缩，会得到一个 <code>apache-tomcat-8.5.68</code> 的目录，Tomcat就已经安装成功。Tomcat在解压缩的时候，解压所在的目录可以任意，但最好解压到一个不包含中文和空格的目录，因为后期在部署项目的时候，如果路径有中文或者空格可能会导致程序部署失败。打开 <code>apache-tomcat-8.5.68</code> 目录就能看到如下目录结构，每个目录中包含的内容需要认识下</p> <p><img src="/javablog/public/assets/img/1702370906220.77096bdc.png" alt="1702370906220"></p> <ul><li>bin: 目录下有两类文件，一种是以<code>.bat</code>结尾的，是Windows系统的可执行文件，一种是以<code>.sh</code>结尾的，是Linux系统的可执行文件。</li> <li>webapps: 就是以后项目部署的目录</li></ul> <p>到此，Tomcat的安装就已经完成。要想启动Tomcat，只需要双击: bin\startup.bat。启动后，通过浏览器访问 <code>http://localhost:8080</code> 能看到Apache Tomcat的内容就说明Tomcat已经启动成功。</p> <p><img src="/javablog/public/assets/img/1702370989614.da88b0b4.png" alt="1702370989614"></p> <p>启动的过程中，控制台有中文乱码，需要修改conf/logging.prooperties</p> <p><img src="/javablog/public/assets/img/1702371011581.a9d58c87.png" alt="1702371011581"></p> <p>如果要想关闭tomcat，有三种方式：</p> <ul><li>直接x掉运行窗口: 强制关闭[不建议]</li> <li>bin\shutdown.bat：正常关闭</li> <li>ctrl+c： 正常关闭</li></ul> <p>Tomcat默认的端口是8080，要想修改Tomcat启动的端口号，需要修改 conf/server.xml</p> <p><img src="/javablog/public/assets/img/1702371086856.407170f3.png" alt="1702371086856"></p> <p>Tomcat的端口号取值范围是0-65535之间任意未被占用的端口，如果设置的端口号被占用，启动的时候就会包如下的错误：</p> <p><img src="/javablog/public/assets/img/1702371107352.fe01d930.png" alt="1702371107352"></p> <p>Tomcat启动的时候，启动窗口一闪而过: 需要检查JAVA_HOME环境变量是否正确配置</p> <p><img src="/javablog/public/assets/img/1702371130842.b1f04492.png" alt="1702371130842"></p> <h4 id="_2-2-项目布署"><a href="#_2-2-项目布署" class="header-anchor">#</a> 2.2 项目布署</h4> <p>Tomcat部署项目： 将项目放置到webapps目录下，即部署完成。</p> <p>通过浏览器访问 <code>http://localhost:8080/hello/a.html</code> ，能看到下面的内容就说明项目已经部署成功。</p> <p>但是呢随着项目的增大，项目中的资源也会越来越多，项目在拷贝的过程中也会越来越费时间，该如何解决呢? 一般JavaWeb项目会被打包称war包，然后将war包放到Webapps目录下，Tomcat会自动解压缩war文件。</p> <p>Tomcat检测到war包后会自动完成解压缩，在webapps目录下就会多一个haha目录：</p> <p>通过浏览器访问 <code>http://localhost:8080/haha/a.html</code> ，能看到下面的内容就说明项目已经部署成功。</p> <h3 id="_3-maven创建web项目"><a href="#_3-maven创建web项目" class="header-anchor">#</a> 3，Maven创建web项目</h3> <p>介绍完Tomcat的基本使用后，我们来学习在IDEA中如何创建Maven Web项目，学习这种方式的原因是以后Tomcat中运行的绝大多数都是Web项目，而使用Maven工具能更加简单快捷的把Web项目给创建出来，所以Maven的Web项目具体如何来构建呢?</p> <p>在真正创建Maven Web项目之前，我们先要知道Web项目长什么样子，具体的结构是什么?</p> <h4 id="_3-1-web项目结构"><a href="#_3-1-web项目结构" class="header-anchor">#</a> 3.1 web项目结构</h4> <p>Web项目的结构分为: 开发中的项目和开发完可以部署的Web项目, 这两种项目的结构是不一样的，我们一个个来介绍下:</p> <ul><li>Maven Web项目结构: 开发中的项目</li></ul> <p><img src="/javablog/public/assets/img/1702371400672.9695bdd9.png" alt="1702371400672"></p> <ul><li>开发完成部署的Web项目</li></ul> <p><img src="/javablog/public/assets/img/1702371438713.838f2cc5.png" alt="1702371438713"></p> <ul><li>开发项目通过执行Maven打包命令==package==, 可以获取到部署的Web项目目录</li> <li>编译后的Java字节码文件和resources的资源文件，会被放到WEB-INF下的classes目录下</li> <li>pom.xml中依赖坐标对应的jar包，会被放入WEB-INF下的lib目录下</li></ul> <h4 id="_3-2-创建maven-web项目"><a href="#_3-2-创建maven-web项目" class="header-anchor">#</a> 3.2  创建Maven Web项目</h4> <p>介绍完Maven Web的项目结构后，接下来使用Maven来创建Web项目，创建方式有两种</p> <ul><li>使用骨架</li> <li>不使用骨架</li></ul> <p>使用骨架创建Maven Web项目步骤：</p> <ol><li>创建Maven项目</li></ol> <p><img src="/javablog/public/assets/img/1702371656290.ee9bd505.png" alt="1702371656290"></p> <ol start="2"><li>选择使用Web项目骨架</li></ol> <p><img src="/javablog/public/assets/img/1702371678571.6e031a08.png" alt="1702371678571"></p> <ol start="3"><li>输入Maven项目坐标创建项目</li></ol> <p><img src="/javablog/public/assets/img/1702371700499.0ea45449.png" alt="1702371700499"></p> <ol start="4"><li>确认Maven相关的配置信息后，完成项目创建</li></ol> <p><img src="/javablog/public/assets/img/1702371718559.67c07cda.png" alt="1702371718559"></p> <ol start="5"><li>删除pom.xml中多余内容，只留下面的这些内容，注意打包方式 jar和war的区别</li></ol> <p><img src="/javablog/public/assets/img/1702371736382.6271ce4c.png" alt="1702371736382"></p> <ol start="6"><li>补齐Maven Web项目缺失的目录结构，默认没有java和resources目录，需要手动完成创建补齐，最终的目录结果如下</li></ol> <p><img src="/javablog/public/assets/img/1702371759313.443c42f5.png" alt="1702371759313"></p> <p>不使用骨架创建Maven Web项目步骤：</p> <ol><li>创建Maven项目</li></ol> <p><img src="/javablog/public/assets/img/1702371803636.bebbec62.png" alt="1702371803636"></p> <ol start="2"><li>选择不使用Web项目骨架</li></ol> <p><img src="/javablog/public/assets/img/1702371819430.d81705e7.png" alt="1702371819430"></p> <ol start="3"><li>输入Maven项目坐标创建项目</li></ol> <p><img src="/javablog/public/assets/img/1702371837680.58335801.png" alt="1702371837680"></p> <ol start="4"><li>在pom.xml设置打包方式为war,默认是不写代表打包方式为jar</li></ol> <p><img src="/javablog/public/assets/img/1702371860620.0238699d.png" alt="1702371860620"></p> <ol start="5"><li>补齐Maven Web项目缺失webapp的目录结构</li></ol> <p><img src="/javablog/public/assets/img/1702371893060.3935d813.png" alt="1702371893060"></p> <ol start="6"><li>补齐Maven Web项目缺失WEB-INF/web.xml的目录结构</li></ol> <p><img src="/javablog/public/assets/img/1702371921342.2a1b49c2.png" alt="1702371921342"></p> <ol start="7"><li>补充完后，最终的项目结构如下:</li></ol> <p><img src="/javablog/public/assets/img/1702371938458.0857e15c.png" alt="1702371938458"></p> <p>上述两种方式，创建的web项目，都不是很全，需要手动补充内容，至于最终采用哪种方式来创建Maven Web项目，都是可以的，根据各自的喜好来选择使用即可。</p> <h3 id="_4-idea使用tomcat"><a href="#_4-idea使用tomcat" class="header-anchor">#</a> 4，IDEA使用Tomcat</h3> <p>Maven Web项目创建成功后，通过Maven的package命令可以将项目打包成war包，将war文件拷贝到Tomcat的webapps目录下，启动Tomcat就可以将项目部署成功，然后通过浏览器进行访问即可。然而我们在开发的过程中，项目中的内容会经常发生变化，如果按照上面这种方式来部署测试，是非常不方便的。如何在IDEA中能快速使用Tomcat呢? 在IDEA中集成使用Tomcat有两种方式，分别是</p> <ul><li>集成本地Tomcat</li> <li>Tomcat Maven插件</li></ul> <h4 id="_4-1-集成本地tomcat"><a href="#_4-1-集成本地tomcat" class="header-anchor">#</a> 4.1 集成本地Tomcat</h4> <p>将刚才本地安装好的Tomcat8集成到IDEA中，完成项目部署，具体的实现步骤</p> <ol><li>打开添加本地Tomcat的面板</li></ol> <p><img src="/javablog/public/assets/img/1702372095024.b8320bb6.png" alt="1702372095024"></p> <ol start="2"><li>指定本地Tomcat的具体路径</li></ol> <p><img src="/javablog/public/assets/img/1702372110536.20b0359f.png" alt="1702372110536"></p> <ol start="3"><li>修改Tomcat的名称，此步骤可以不改，只是让名字看起来更有意义，HTTP port中的端口也可以进行修改，比如把8080改成80</li></ol> <p><img src="/javablog/public/assets/img/1702372141903.7ac1b3b3.png" alt="1702372141903"></p> <ol start="4"><li>将开发项目部署项目到Tomcat中</li></ol> <p><img src="/javablog/public/assets/img/1702372160587.0ffb1b1c.png" alt="1702372160587"></p> <ol start="5"><li>部署成功后，就可以启动项目，为了能更好的看到启动的效果，可以在webapp目录下添加a.html页面</li></ol> <p><img src="/javablog/public/assets/img/1702372200809.7738f5a3.png" alt="1702372200809"></p> <ol start="6"><li>启动成功后，可以通过浏览器进行访问测试</li></ol> <p><img src="/javablog/public/assets/img/1702372257465.16781f20.png" alt="1702372257465"></p> <ol start="7"><li>最终的注意事项</li></ol> <p><img src="/javablog/public/assets/img/1702372284639.ce170278.png" alt="1702372284639"></p> <p>扩展内容： xxx.war和 xxx.war exploded这两种部署项目模式的区别?</p> <ul><li>war模式是将WEB工程打成war包，把war包发布到Tomcat服务器上</li> <li>war exploded模式是将WEB工程以当前文件夹的位置关系发布到Tomcat服务器上</li> <li>war模式部署成功后，Tomcat的webapps目录下会有部署的项目内容</li> <li>war exploded模式部署成功后，Tomcat的webapps目录下没有，而使用的是项目的target目录下的内容进行部署</li> <li>建议大家都选war模式进行部署，更符合项目部署的实际情况</li></ul> <p>至此，IDEA中集成本地Tomcat进行项目部署的内容我们就介绍完了，整体步骤如下，大家需要按照流程进行部署操作练习。</p> <h4 id="_4-2-tomcat-maven插件"><a href="#_4-2-tomcat-maven插件" class="header-anchor">#</a> 4.2 Tomcat Maven插件</h4> <p>在IDEA中使用本地Tomcat进行项目部署，相对来说步骤比较繁琐，所以我们需要一种更简便的方式来替换它，那就是直接使用Maven中的Tomcat插件来部署项目，具体的实现步骤，只需要两步，分别是:</p> <ol><li>在pom.xml中添加Tomcat插件</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
       	<span class="token comment">&lt;!--Tomcat插件 --&gt;</span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat7-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="2"><li>使用Maven Helper插件快速启动项目，选中项目，右键=&gt;Run Maven =&gt; tomcat7:run</li></ol> <p><img src="/javablog/public/assets/img/1702372426283.856a5b33.png" alt="1702372426283"></p> <p>如果选中项目并右键点击后，看不到Run Maven和Debug Maven，这个时候就需要在IDEA中下载Maven Helper插件，具体的操作方式为: File =&gt; Settings =&gt; Plugins =&gt; Maven Helper =&gt; Install, 安装完后按照提示重启IDEA，就可以看到了。</p> <p>注意细节：</p> <ul><li>Maven Tomcat插件目前只有Tomcat7版本，没有更高的版本可以使用。如果对于Tomcat的版本有比较高的要求，要在Tomcat7以上，这个时候就只能集成本地Tomcat了。</li> <li>使用Maven Tomcat插件，要想修改Tomcat的端口和访问路径，可以直接修改pom.xml</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    	<span class="token comment">&lt;!--Tomcat插件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat7-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
            	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--访问端口号 --&gt;</span>
                <span class="token comment">&lt;!--项目访问路径
					未配置访问路径: http://localhost:80/tomcat-demo2/a.html
					配置/后访问路径: http://localhost:80/a.html
					如果配置成 /hello,访问路径会变成什么?
						答案: http://localhost:80/hello/a.html
				--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="二-servlet"><a href="#二-servlet" class="header-anchor">#</a> 二，Servlet</h2> <h3 id="_1-servlet介绍"><a href="#_1-servlet介绍" class="header-anchor">#</a> 1，Servlet介绍</h3> <p>Servlet是JavaWeb最为核心的内容，它是Java提供的一门动态web资源开发技术。使用Servlet就可以实现，根据不同的登录用户在页面上动态显示不同内容。ervlet是JavaEE规范之一，其实就是一个接口，将来我们需要定义Servlet类实现Servlet接口，并由web服务器运行Servlet。</p> <p><img src="/javablog/public/assets/img/1702372728365.403c2450.png" alt="1702372728365"></p> <h3 id="_2-servlet快速入门"><a href="#_2-servlet快速入门" class="header-anchor">#</a> 2，Servlet快速入门</h3> <p>编写一个Servlet类，并使用IDEA中Tomcat插件进行部署，最终通过浏览器访问所编写的Servlet程序。具体的实现步骤为:</p> <ol><li>创建Web项目<code>web-demo</code>，导入Servlet依赖坐标</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
       <span class="token comment">&lt;!--
         此处为什么需要添加该标签?
         provided指的是在编译和测试过程中有效,最后生成的war包时不会加入
          因为Tomcat的lib目录中已经有servlet-api这个jar包，如果在生成war包的时候生效就会和Tomcat中的jar包冲突，导致报错
       --&gt;</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li>创建:定义一个类，实现Servlet接口，并重写接口中所有方法，并在service方法中输入一句话</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>malu<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span>
   
   <span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
   <span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
   
   <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo1</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{</span>
   
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;servlet hello world~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
   
       <span class="token punctuation">}</span>
   
       <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   
       <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ol start="3"><li>配置:在类上使用@WebServlet注解，配置该Servlet的访问路径</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/demo1&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>访问:启动Tomcat,浏览器中输入URL地址访问该Servlet</li></ol> <div class="language-url line-numbers-mode"><pre class="language-url"><code>   http://localhost:8080/web-demo/demo1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>访问后，在控制台会打印<code>servlet hello world~</code> 说明servlet程序已经成功运行。</li></ol> <h3 id="_3-servlet执行流程"><a href="#_3-servlet执行流程" class="header-anchor">#</a> 3，Servlet执行流程</h3> <p>Servlet程序已经能正常运行，但是我们需要思考个问题: 我们并没有创建ServletDemo1类的对象，也没有调用对象中的service方法，为什么在控制台就打印了 <code>servlet hello world~</code> 这句话呢?</p> <p>要想回答上述问题，我们就需要对Servlet的执行流程进行一个学习。</p> <p><img src="/javablog/public/assets/img/1702372947468.55c9e422.png" alt="1702372947468"></p> <ul><li>浏览器发出<code>http://localhost:8080/web-demo/demo1</code>请求，从请求中可以解析出三部分内容，分别是<code>localhost:8080</code>、<code>web-demo</code>、<code>demo1</code> <ul><li>根据<code>localhost:8080</code>可以找到要访问的Tomcat Web服务器</li> <li>根据<code>web-demo</code>可以找到部署在Tomcat服务器上的web-demo项目</li> <li>根据<code>demo1</code>可以找到要访问的是项目中的哪个Servlet类，根据@WebServlet后面的值进行匹配</li></ul></li> <li>找到ServletDemo1这个类后，Tomcat Web服务器就会为ServletDemo1这个类创建一个对象，然后调用对象中的service方法
<ul><li>ServletDemo1实现了Servlet接口，所以类中必然会重写service方法供Tomcat Web服务器进行调用</li> <li>service方法中有ServletRequest和ServletResponse两个参数，ServletRequest封装的是请求数据，ServletResponse封装的是响应数据，后期我们可以通过这两个参数实现前后端的数据交互</li></ul></li></ul> <p>总结：</p> <ul><li>Servlet由谁创建? Servlet方法由谁调用?
<ul><li>Servlet由web服务器创建，Servlet方法由web服务器调用</li></ul></li> <li>服务器怎么知道Servlet中一定有service方法?
<ul><li>因为我们自定义的Servlet, 必须实现Servlet接口并复写其方法，而Servlet接口中有service方法</li></ul></li></ul> <h3 id="_4-servlet生命周期"><a href="#_4-servlet生命周期" class="header-anchor">#</a> 4，Servlet生命周期</h3> <p>Tomcat什么时候创建的Servlet对象? 接下来，我们研究一下Servlet的生命周期。对象的生命周期指一个对象从被创建到被销毁的整个过程。Servlet运行在Servlet容器(web服务器)中，其生命周期由容器来管理，分为4个阶段：</p> <ol><li><p>加载和实例化：默认情况下，当Servlet第一次被访问时，由容器创建Servlet对象</p> <blockquote><p>默认情况，Servlet会在第一次访问被容器创建，但是如果创建Servlet比较耗时的话，那么第一个访问的人等待的时间就比较长，用户的体验就比较差，那么我们能不能把Servlet的创建放到服务器启动的时候来创建，具体如何来配置?</p> <p>@WebServlet(urlPatterns = &quot;/demo1&quot;, loadOnStartup = 1)
loadOnstartup的取值有两类情况
（1）负整数: 第一次访问时创建Servlet对象
（2）0或正整数: 服务器启动时创建Servlet对象，数字越小优先级越高</p></blockquote></li> <li><p>初始化：在Servlet实例化之后，容器将调用Servlet的init()方法初始化这个对象，完成一些如加载配置文件、创建连接等初始化的工作。该方法只调用一次</p></li> <li><p>请求处理：每次请求Servlet时，Servlet容器都会调用Servlet的service()方法对请求进行处理</p></li> <li><p>服务终止：当需要释放内存或者容器关闭时，容器就会调用Servlet实例的destroy()方法完成资源的释放。在destroy()方法调用之后，容器会释放这个Servlet实例，该实例随后会被Java的垃圾收集器所回收</p></li></ol> <p>代码演示Servlet的生命周期：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>malu<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token comment">/**
* Servlet生命周期方法
*/</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/demo2&quot;</span><span class="token punctuation">,</span>loadOnStartup <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo2</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     *  初始化方法
     *  1.调用时机：默认情况下，Servlet被第一次访问时，调用
     *      * loadOnStartup: 默认为-1，修改为0或者正整数，则会在服务器启动的时候，调用
     *  2.调用次数: 1次
     * @param config
     * @throws ServletException
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;init...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 提供服务
     * 1.调用时机:每一次Servlet被访问时，调用
     * 2.调用次数: 多次
     * @param req
     * @param res
     * @throws ServletException
     * @throws IOException
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> res<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;servlet hello world~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 销毁方法
     * 1.调用时机：内存释放或者服务器关闭的时候，Servlet对象会被销毁，调用
     * 2.调用次数: 1次
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;destroy...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>如何才能让Servlet中的destroy方法被执行？</p> <ul><li>在Terminal命令行中，先使用<code>mvn tomcat7:run</code>启动，然后再使用<code>ctrl+c</code>关闭tomcat</li></ul> <p>总结：</p> <ul><li>Servlet对象在什么时候被创建的?
<ul><li>默认是第一次访问的时候被创建，可以使用@WebServlet(urlPatterns = &quot;/demo2&quot;, loadOnStartup = 1)的loadOnStartup 修改成在服务器启动的时候创建。</li></ul></li> <li>Servlet生命周期中涉及到的三个方法，这三个方法是什么? 什么时候被调用? 调用几次?
<ul><li>涉及到三个方法，分别是 init()、service()、destroy()</li> <li>init方法在Servlet对象被创建的时候执行，只执行1次</li> <li>service方法在Servlet被访问的时候调用，每访问1次就调用1次</li> <li>destroy方法在Servlet对象被销毁的时候调用，只执行1次</li></ul></li></ul> <h3 id="_5-其它两个方法介绍"><a href="#_5-其它两个方法介绍" class="header-anchor">#</a> 5，其它两个方法介绍</h3> <p>Servlet中总共有5个方法，我们已经介绍过其中的三个，剩下的两个方法作用分别是什么？</p> <ul><li>获取Servlet信息</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">//该方法用来返回Servlet的相关信息，没有什么太大的用处，一般我们返回一个空字符串即可</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>获取ServletConfig对象</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ServletConfig对象，在init方法的参数中有，而Tomcat Web服务器在创建Servlet对象的时候会调用init方法，必定会传入一个ServletConfig对象，我们只需要将服务器传过来的ServletConfig进行返回即可。具体如何操作?</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>malu<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Servlet方法介绍
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/demo3&quot;</span><span class="token punctuation">,</span>loadOnStartup <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo3</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">;</span>
    <span class="token comment">/**
     *  初始化方法
     *  1.调用时机：默认情况下，Servlet被第一次访问时，调用
     *      * loadOnStartup: 默认为-1，修改为0或者正整数，则会在服务器启动的时候，调用
     *  2.调用次数: 1次
     * @param config
     * @throws ServletException
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>servletConfig <span class="token operator">=</span> config<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;init...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> servletConfig<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * 提供服务
     * 1.调用时机:每一次Servlet被访问时，调用
     * 2.调用次数: 多次
     * @param req
     * @param res
     * @throws ServletException
     * @throws IOException
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> res<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;servlet hello world~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 销毁方法
     * 1.调用时机：内存释放或者服务器关闭的时候，Servlet对象会被销毁，调用
     * 2.调用次数: 1次
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;destroy...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><p>getServletInfo()和getServletConfig()这两个方法使用的不是很多，大家了解下。</p> <h3 id="_6-体系结构"><a href="#_6-体系结构" class="header-anchor">#</a> 6，体系结构</h3> <h3 id="_7-urlpattern配置"><a href="#_7-urlpattern配置" class="header-anchor">#</a> 7，urlPattern配置</h3> <h3 id="_8-xml配置"><a href="#_8-xml配置" class="header-anchor">#</a> 8，XML配置</h3></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/5/2023, 5:32:18 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-7115df4a data-v-1c636796><li class="level-2" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#一-tomcat" class="sidebar-link reco-side-一-tomcat" data-v-7115df4a>一，Tomcat</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_1-什么是web服务器" class="sidebar-link reco-side-_1-什么是web服务器" data-v-7115df4a>1，什么是web服务器</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_2-tomcat的基本使用" class="sidebar-link reco-side-_2-tomcat的基本使用" data-v-7115df4a>2，Tomcat的基本使用</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_3-maven创建web项目" class="sidebar-link reco-side-_3-maven创建web项目" data-v-7115df4a>3，Maven创建web项目</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_4-idea使用tomcat" class="sidebar-link reco-side-_4-idea使用tomcat" data-v-7115df4a>4，IDEA使用Tomcat</a></li><li class="level-2" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#二-servlet" class="sidebar-link reco-side-二-servlet" data-v-7115df4a>二，Servlet</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_1-servlet介绍" class="sidebar-link reco-side-_1-servlet介绍" data-v-7115df4a>1，Servlet介绍</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_2-servlet快速入门" class="sidebar-link reco-side-_2-servlet快速入门" data-v-7115df4a>2，Servlet快速入门</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_3-servlet执行流程" class="sidebar-link reco-side-_3-servlet执行流程" data-v-7115df4a>3，Servlet执行流程</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_4-servlet生命周期" class="sidebar-link reco-side-_4-servlet生命周期" data-v-7115df4a>4，Servlet生命周期</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_5-其它两个方法介绍" class="sidebar-link reco-side-_5-其它两个方法介绍" data-v-7115df4a>5，其它两个方法介绍</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_6-体系结构" class="sidebar-link reco-side-_6-体系结构" data-v-7115df4a>6，体系结构</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_7-urlpattern配置" class="sidebar-link reco-side-_7-urlpattern配置" data-v-7115df4a>7，urlPattern配置</a></li><li class="level-3" data-v-7115df4a><a href="/javablog/public/blogs/javaweb/06.html#_8-xml配置" class="sidebar-link reco-side-_8-xml配置" data-v-7115df4a>8，XML配置</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-65133105 data-v-65133105><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-65133105><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-65133105></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-65133105></path></svg></div></div></div>
    <script src="/javablog/public/assets/js/app.f9489de6.js" defer></script><script src="/javablog/public/assets/js/22.f445cee3.js" defer></script><script src="/javablog/public/assets/js/1.4a2aebf2.js" defer></script><script src="/javablog/public/assets/js/21.f6b95d5b.js" defer></script>
  </body>
</html>
