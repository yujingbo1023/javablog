<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>24-Dva | 码路全栈开发</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/javablog/public/favicon.ico">
    <meta name="description" content="快来玩java全栈呀">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/javablog/public/assets/css/0.styles.0bd56f36.css" as="style"><link rel="preload" href="/javablog/public/assets/js/app.1e9af863.js" as="script"><link rel="preload" href="/javablog/public/assets/js/52.9ab44965.js" as="script"><link rel="preload" href="/javablog/public/assets/js/1.3c422ec2.js" as="script"><link rel="preload" href="/javablog/public/assets/js/22.d677dae3.js" as="script"><link rel="prefetch" href="/javablog/public/assets/js/10.fcc61e84.js"><link rel="prefetch" href="/javablog/public/assets/js/11.a65a8050.js"><link rel="prefetch" href="/javablog/public/assets/js/12.9ec97583.js"><link rel="prefetch" href="/javablog/public/assets/js/13.0cd76132.js"><link rel="prefetch" href="/javablog/public/assets/js/14.0172e20a.js"><link rel="prefetch" href="/javablog/public/assets/js/15.8c6b5302.js"><link rel="prefetch" href="/javablog/public/assets/js/16.f1167939.js"><link rel="prefetch" href="/javablog/public/assets/js/17.56783fb9.js"><link rel="prefetch" href="/javablog/public/assets/js/18.51b46401.js"><link rel="prefetch" href="/javablog/public/assets/js/19.550e05c3.js"><link rel="prefetch" href="/javablog/public/assets/js/20.a54bf58c.js"><link rel="prefetch" href="/javablog/public/assets/js/21.2698a40a.js"><link rel="prefetch" href="/javablog/public/assets/js/23.c513ed63.js"><link rel="prefetch" href="/javablog/public/assets/js/24.2fb999e8.js"><link rel="prefetch" href="/javablog/public/assets/js/25.9f587fc1.js"><link rel="prefetch" href="/javablog/public/assets/js/26.5c43edb6.js"><link rel="prefetch" href="/javablog/public/assets/js/27.03f45083.js"><link rel="prefetch" href="/javablog/public/assets/js/28.de2f0cca.js"><link rel="prefetch" href="/javablog/public/assets/js/29.3b6518a7.js"><link rel="prefetch" href="/javablog/public/assets/js/3.04265e56.js"><link rel="prefetch" href="/javablog/public/assets/js/30.b6779357.js"><link rel="prefetch" href="/javablog/public/assets/js/31.5e995d8b.js"><link rel="prefetch" href="/javablog/public/assets/js/32.5ade9e47.js"><link rel="prefetch" href="/javablog/public/assets/js/33.32050057.js"><link rel="prefetch" href="/javablog/public/assets/js/34.ac38146c.js"><link rel="prefetch" href="/javablog/public/assets/js/35.1b6e849f.js"><link rel="prefetch" href="/javablog/public/assets/js/36.41e7a004.js"><link rel="prefetch" href="/javablog/public/assets/js/37.a032a2da.js"><link rel="prefetch" href="/javablog/public/assets/js/38.f83053b7.js"><link rel="prefetch" href="/javablog/public/assets/js/39.7723d66d.js"><link rel="prefetch" href="/javablog/public/assets/js/4.3d0a8efe.js"><link rel="prefetch" href="/javablog/public/assets/js/40.9148747c.js"><link rel="prefetch" href="/javablog/public/assets/js/41.bd3b913c.js"><link rel="prefetch" href="/javablog/public/assets/js/42.8e840003.js"><link rel="prefetch" href="/javablog/public/assets/js/43.c0070b4b.js"><link rel="prefetch" href="/javablog/public/assets/js/44.bfcbb065.js"><link rel="prefetch" href="/javablog/public/assets/js/45.0533c013.js"><link rel="prefetch" href="/javablog/public/assets/js/46.37998eca.js"><link rel="prefetch" href="/javablog/public/assets/js/47.a0dc02c9.js"><link rel="prefetch" href="/javablog/public/assets/js/48.96f0a19c.js"><link rel="prefetch" href="/javablog/public/assets/js/49.44e93370.js"><link rel="prefetch" href="/javablog/public/assets/js/5.7aa6b199.js"><link rel="prefetch" href="/javablog/public/assets/js/50.ec888bcf.js"><link rel="prefetch" href="/javablog/public/assets/js/51.f6784781.js"><link rel="prefetch" href="/javablog/public/assets/js/53.b73fdaf5.js"><link rel="prefetch" href="/javablog/public/assets/js/54.ae64152d.js"><link rel="prefetch" href="/javablog/public/assets/js/55.da87a49e.js"><link rel="prefetch" href="/javablog/public/assets/js/56.d199e070.js"><link rel="prefetch" href="/javablog/public/assets/js/57.74c37f8f.js"><link rel="prefetch" href="/javablog/public/assets/js/58.3365b91e.js"><link rel="prefetch" href="/javablog/public/assets/js/59.866caa44.js"><link rel="prefetch" href="/javablog/public/assets/js/6.6bbc0ea0.js"><link rel="prefetch" href="/javablog/public/assets/js/60.cfc81d4d.js"><link rel="prefetch" href="/javablog/public/assets/js/61.f4bf74a5.js"><link rel="prefetch" href="/javablog/public/assets/js/62.dd786593.js"><link rel="prefetch" href="/javablog/public/assets/js/63.4dad4a31.js"><link rel="prefetch" href="/javablog/public/assets/js/64.0791d517.js"><link rel="prefetch" href="/javablog/public/assets/js/65.b644864e.js"><link rel="prefetch" href="/javablog/public/assets/js/66.e9cb4dfd.js"><link rel="prefetch" href="/javablog/public/assets/js/67.5cd693b5.js"><link rel="prefetch" href="/javablog/public/assets/js/68.c119fbdf.js"><link rel="prefetch" href="/javablog/public/assets/js/69.c368150f.js"><link rel="prefetch" href="/javablog/public/assets/js/7.1752dbb8.js"><link rel="prefetch" href="/javablog/public/assets/js/70.18a2720c.js"><link rel="prefetch" href="/javablog/public/assets/js/71.957a85be.js"><link rel="prefetch" href="/javablog/public/assets/js/72.6227d269.js"><link rel="prefetch" href="/javablog/public/assets/js/73.6a6633ac.js"><link rel="prefetch" href="/javablog/public/assets/js/74.040a0b3f.js"><link rel="prefetch" href="/javablog/public/assets/js/75.57a1d893.js"><link rel="prefetch" href="/javablog/public/assets/js/76.2efc8385.js"><link rel="prefetch" href="/javablog/public/assets/js/77.c611bebe.js"><link rel="prefetch" href="/javablog/public/assets/js/78.71d0177f.js"><link rel="prefetch" href="/javablog/public/assets/js/79.f2e21b2d.js"><link rel="prefetch" href="/javablog/public/assets/js/8.a02ba8a6.js"><link rel="prefetch" href="/javablog/public/assets/js/80.5288b112.js"><link rel="prefetch" href="/javablog/public/assets/js/81.a61163fb.js"><link rel="prefetch" href="/javablog/public/assets/js/82.f6295dc7.js"><link rel="prefetch" href="/javablog/public/assets/js/83.1cfacbbf.js"><link rel="prefetch" href="/javablog/public/assets/js/84.6ffe788c.js"><link rel="prefetch" href="/javablog/public/assets/js/85.17fe562f.js"><link rel="prefetch" href="/javablog/public/assets/js/86.422c3a63.js"><link rel="prefetch" href="/javablog/public/assets/js/87.8f0ae115.js"><link rel="prefetch" href="/javablog/public/assets/js/88.e76f955a.js"><link rel="prefetch" href="/javablog/public/assets/js/89.df967927.js"><link rel="prefetch" href="/javablog/public/assets/js/9.c42216f4.js">
    <link rel="stylesheet" href="/javablog/public/assets/css/0.styles.0bd56f36.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>码路全栈开发</h3> <p class="description" data-v-59e6cb88>快来玩java全栈呀</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>码路</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javablog/public/" class="home-link router-link-active"><img src="/javablog/public/logo.png" alt="码路全栈开发" class="logo"> <span class="site-name">码路全栈开发</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javablog/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      全栈开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/data analysis/" class="nav-link"><i class="undefined"></i>
  data analysis
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/每日一题/" class="nav-link"><i class="undefined"></i>
  每日一题
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javase/" class="nav-link"><i class="undefined"></i>
  javase
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/node/" class="nav-link"><i class="undefined"></i>
  node
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/spider/" class="nav-link"><i class="undefined"></i>
  spider
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li></ul></div></div><div class="nav-item"><a href="/javablog/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/javablog/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/javablog/public/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    码路
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>79</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>14</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/javablog/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      全栈开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/data analysis/" class="nav-link"><i class="undefined"></i>
  data analysis
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/每日一题/" class="nav-link"><i class="undefined"></i>
  每日一题
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javase/" class="nav-link"><i class="undefined"></i>
  javase
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/node/" class="nav-link"><i class="undefined"></i>
  node
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/spider/" class="nav-link"><i class="undefined"></i>
  spider
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li></ul></div></div><div class="nav-item"><a href="/javablog/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/javablog/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>24-Dva</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>码路</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">24-Dva</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>码路</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>12/15/2028</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>js</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="一-dva介绍"><a href="#一-dva介绍" class="header-anchor">#</a> 一，Dva介绍</h2> <h3 id="_1-dva介绍"><a href="#_1-dva介绍" class="header-anchor">#</a> 1，Dva介绍</h3> <p>官网：https://dvajs.com/</p> <p><img src="/javablog/public/assets/img/1712194112642.e53ec74b.png" alt="1712194112642">‘</p> <p>​	dva 首先是一个基于 redux 和 redux-saga 的数据流方案，然后为了简化开发体验，dva 还额外内置了 react-router 和 fetch，所以也可以理解为一个轻量级的应用框架!</p> <p><strong>特点：</strong></p> <ul><li>易学易用，仅有 6 个 api，对 redux 用户尤其友好，配合 umi 使用后更是降低为 0 API</li> <li>elm 概念，通过 reducers, effects 和 subscriptions 组织 model</li> <li>插件机制，比如 dva-loading 可以自动处理 loading 状态，不用一遍遍地写 showLoading 和 hideLoading</li> <li>支持 HMR，基于 babel-plugin-dva-hmr 实现 components、routes 和 models 的 HMR</li></ul> <p><img src="/javablog/public/assets/img/1712194622232.ede75b03.png" alt="1712194622232"></p> <p>学习dva，主要学习三块内容：</p> <ul><li>一些配置</li> <li>dva中的路由</li> <li>状态管理</li></ul> <h3 id="_2-dva脚手架"><a href="#_2-dva脚手架" class="header-anchor">#</a> 2，Dva脚手架</h3> <p>参考文档：https://dvajs.com/guide/getting-started.html#%E5%AE%89%E8%A3%85-dva-cli</p> <p>通过 npm 安装 dva-cli 并确保版本是 <code>0.9.1</code> 或以上。</p> <p><img src="/javablog/public/assets/img/1712194793324.5938b6fc.png" alt="1712194793324"></p> <p>通过 <code>dva new</code> 创建新应用（以管理员身份运行cmd）</p> <p><img src="/javablog/public/assets/img/1712195679541.6c707bf8.png" alt="1712195679541"></p> <p><code>cd</code> 进入 <code>dva-quickstart</code> 目录，并启动开发服务器：</p> <p><img src="/javablog/public/assets/img/1712197106143.a58d70a9.png" alt="1712197106143"></p> <p><img src="data:image/png;base64,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" alt="1712197150705"></p> <p>在浏览器里打开 http://localhost:8000 ，你会看到 dva 的欢迎界面。</p> <p><img src="/javablog/public/assets/img/1712197168697.058c6f5a.png" alt="1712197168697"></p> <p>创建好的目录结构如下：</p> <p><img src="/javablog/public/assets/img/1712197680164.d9c4d7f8.png" alt="1712197680164"></p> <p>对于models说明，先看vuex中的数据流：</p> <p><img src="/javablog/public/assets/img/1712197921696.1fa916d0.png" alt="1712197921696"></p> <p>vuex：</p> <p><img src="/javablog/public/assets/img/1712198048685.6ba78d5a.png" alt="1712198048685"></p> <p>看package.json文件，如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;roadhog server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;roadhog build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --ext .js src test&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;precommit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dva&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.4.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^16.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^16.2.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;babel-plugin-dva-hmr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.3.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.14.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-config-umi&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.1.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-flowtype&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.34.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-jsx-a11y&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.1.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.12.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;redbox-react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.4.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;roadhog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.5.0-beta.4&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>说明：</p> <ul><li><p>无需安装：redux及redux-saga、react-redux、react-router-dom等，dva把这些东西都集成好了，安装一个dva就相当于安装了这些全部东西！！</p></li> <li><p>react-router-dom使用的是v4版本</p></li> <li><p>redux使用的是 v3.7.2「我们之前使用的都是v4.0」</p></li> <li><p>集成的配套插件版本有点低</p> <p><img src="/javablog/public/assets/img/1712198361676.c1a05ad3.png" alt="1712198361676"></p></li></ul> <h2 id="二-dva配置"><a href="#二-dva配置" class="header-anchor">#</a> 二，Dva配置</h2> <p>配置参考：https://github.com/sorrycc/roadhog/blob/master/README_zh-cn.md</p> <h3 id="_1-配置支持antd"><a href="#_1-配置支持antd" class="header-anchor">#</a> 1，配置支持antd</h3> <p>安装依赖：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;antd&quot;: &quot;4.24.7&quot;, //注意版本用v4「不是最新的v5」
&quot;antd-icons&quot;: &quot;^0.1.0-alpha.1&quot;,
&quot;babel-plugin-import&quot;: &quot;^1.13.5&quot;, //antd按需导入，默认是不支持按需导入的，需要手动按需导入
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm i antd@4.24.7 antd-icons@^0.1.0-alpha.1 babel-plugin-import@^1.13.5  
// 如果npm不行，可以使用cnpm 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="1712198655446"></p> <p>把.webpackrc修改成.webpackrc.js，在此文件中配置antd按需导入：</p> <p><img src="/javablog/public/assets/img/1712198789274.47c93043.png" alt="1712198789274"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 配置BABEL的插件 */</span>
    <span class="token string-property property">&quot;extraBabelPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// antd按需导入</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712199305388.fcbe99a3.png" alt="1712199305388"></p> <p>配置使用中文：</p> <p><img src="/javablog/public/assets/img/1712199483781.ee5224a5.png" alt="1712199483781"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> IndexPage <span class="token keyword">from</span> <span class="token string">'./routes/IndexPage'</span><span class="token punctuation">;</span>

<span class="token comment">// antd</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ConfigProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> zhCN <span class="token keyword">from</span> <span class="token string">&quot;antd/es/locale/zh_CN&quot;</span>

<span class="token keyword">function</span> <span class="token function">RouterConfig</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> history <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ConfigProvider locale<span class="token operator">=</span><span class="token punctuation">{</span>zhCN<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Router history<span class="token operator">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span>IndexPage<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ConfigProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> RouterConfig<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712199610060.f7dca33a.png" alt="1712199610060"></p> <h3 id="_2-配置less"><a href="#_2-配置less" class="header-anchor">#</a> 2，配置less</h3> <p>安装：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;less&quot;: &quot;4.1.3&quot;,
&quot;less-loader&quot;: &quot;8.1.1&quot;,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm i less@4.1.3 less-loader@8.1.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>只需要安装预编译语言的模块和对应的loader，就可以直接生效，不需要单独做配置。测试如下：</p> <p><img src="/javablog/public/assets/img/1712199681700.bc8bd77a.png" alt="1712199681700"></p> <p><img src="/javablog/public/assets/img/1712199703747.c7706efe.png" alt="1712199703747"></p> <p>浏览器效果：</p> <p><img src="/javablog/public/assets/img/1712199769647.47f2a4a7.png" alt="1712199769647"></p> <p>dva里的roadhog 默认会开启cssModules，配置文件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;disableCSSModules&quot;:false
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>index.css文件：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.head</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>组件：</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token operator">...</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>head<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">局部样式</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">[</span><span class="token string">'head'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">局部样式</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  )
}
export default Index;
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>style.head会变成类似于index_xxx_head的形式，保证类名不重复（相当于把head类变成了index_xxx_head类，保证只在局部作用）。</p> <p>可以手动关闭roadhog的cssModules或者在css样式文件里面添加 :global() 来转成全局样式。如下：</p> <p><img src="/javablog/public/assets/img/1712200048265.cfff715d.png" alt="1712200048265"></p> <p>浏览器测试：</p> <p><img src="/javablog/public/assets/img/1712200068231.305d59a3.png" alt="1712200068231"></p> <p>禁用 CSS 的 SourceMap 生成。配置如下：</p> <p><img src="/javablog/public/assets/img/1712200184257.6a2e2359.png" alt="1712200184257"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;disableCSSModules&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 关闭css模块化</span>
    <span class="token string-property property">&quot;disableCSSSourceMap&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CSS 的 SourceMap 生成。</span>
    <span class="token comment">/* 配置BABEL的插件 */</span>
    <span class="token string-property property">&quot;extraBabelPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// antd按需导入</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_3-配置代理"><a href="#_3-配置代理" class="header-anchor">#</a> 3，配置代理</h3> <p>配置如下：</p> <p><img src="/javablog/public/assets/img/1712200276200.5c21f119.png" alt="1712200276200"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;disableCSSModules&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 关闭css模块化</span>
    <span class="token string-property property">&quot;disableCSSSourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CSS 的 SourceMap 生成。</span>
    <span class="token comment">/* 配置BABEL的插件 */</span>
    <span class="token string-property property">&quot;extraBabelPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// antd按需导入</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/* 配置跨域代理 */</span>
    <span class="token string-property property">&quot;proxy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://news-at.zhihu.com/api/4&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;changeOrigin&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;ws&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;pathRewrite&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712200370545.44caa24f.png" alt="1712200370545"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/news/latest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span>response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-配置移动端"><a href="#_4-配置移动端" class="header-anchor">#</a> 4，配置移动端</h3> <p>安装插件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;lib-flexible&quot;: &quot;^0.3.2&quot;,
&quot;postcss-pxtorem&quot;: &quot;5.1.1&quot;,
&quot;babel-plugin-styled-components-px2rem&quot;:&quot;^1.5.5&quot;, 
&quot;styled-components&quot;:&quot;^5.3.6&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm i lib-flexible@^0.3.2 postcss-pxtorem@5.1.1 babel-plugin-styled-components-px2rem@^1.5.5 styled-components@^5.3.6
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置：</p> <p><img src="/javablog/public/assets/img/1712384968225.5712ff3c.png" alt="1712384968225"></p> <p><img src="/javablog/public/assets/img/1712385006034.8a081dd8.png" alt="1712385006034"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> px2rem <span class="token keyword">from</span> <span class="token string">'postcss-pxtorem'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;disableCSSModules&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 关闭css模块化</span>
    <span class="token string-property property">&quot;disableCSSSourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CSS 的 SourceMap 生成。</span>
    <span class="token comment">/* 配置PX转REM */</span>
    <span class="token string-property property">&quot;extraPostCSSPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">px2rem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;rootValue&quot;</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;propList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/* 配置BABEL的插件 */</span>
    <span class="token string-property property">&quot;extraBabelPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// antd按需导入</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 配置PX转REM</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;styled-components-px2rem&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;rootValue&quot;</span><span class="token operator">:</span> <span class="token number">75</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/* 配置跨域代理 */</span>
    <span class="token string-property property">&quot;proxy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://news-at.zhihu.com/api/4&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;changeOrigin&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;ws&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;pathRewrite&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712385140616.6d165278.png" alt="1712385140616"></p> <p><img src="/javablog/public/assets/img/1712385165377.668e2284.png" alt="1712385165377"></p> <p>测试styled-components：</p> <p><img src="/javablog/public/assets/img/1712459599222.7efc46f4.png" alt="1712459599222"></p> <p>对于style-components，如下：</p> <p><img src="/javablog/public/assets/img/1712385231858.17e959a2.png" alt="1712385231858"></p> <h3 id="_5-es6和css3处理"><a href="#_5-es6和css3处理" class="header-anchor">#</a> 5，ES6和CSS3处理</h3> <p>默认情况下，roadhog脚手架中，已完成了对ES6常规语法和CSS3语法的兼容性处理。它处理时，依赖我们设置的浏览器兼容列表。但是有些语法如装饰器语法，还需要我们安装单独的babel插件来处理。</p> <ul><li>ES6语法：babel-loader / babel-preset-react-app</li> <li>CSS3语法：postcss-loader / autoprefixer</li></ul> <p>配置浏览器兼容列表：</p> <p><img src="/javablog/public/assets/img/1712385744674.d97253a5.png" alt="1712385744674"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> px2rem <span class="token keyword">from</span> <span class="token string">'postcss-pxtorem'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;disableCSSModules&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 关闭css模块化</span>
    <span class="token string-property property">&quot;disableCSSSourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CSS 的 SourceMap 生成。</span>
    <span class="token comment">/* 配置PX转REM */</span>
    <span class="token string-property property">&quot;extraPostCSSPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">px2rem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;rootValue&quot;</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;propList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/* 配置BABEL的插件 */</span>
    <span class="token string-property property">&quot;extraBabelPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// antd按需导入</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 配置PX转REM</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;styled-components-px2rem&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;rootValue&quot;</span><span class="token operator">:</span> <span class="token number">75</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/* 配置跨域代理 */</span>
    <span class="token string-property property">&quot;proxy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://news-at.zhihu.com/api/4&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;changeOrigin&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;ws&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;pathRewrite&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/* 不同环境下的不同配置 */</span>
    <span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;extraBabelPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;dva-hmr&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;last 1 chrome versions&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;last 1 firefox versions&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;last 1 safari versions&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;&gt; 0.2%&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;not dead&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;not ie &lt;= 8&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>有些ES6+中的语法，没有对应的老语法，需要polyfill，安装之：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm i @babel/polyfill@^7.12.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置：</p> <p><img src="/javablog/public/assets/img/1712385853929.55cee38b.png" alt="1712385853929"></p> <h3 id="_6-配置index-ejs"><a href="#_6-配置index-ejs" class="header-anchor">#</a> 6，配置index.ejs</h3> <p>原本的index页面如下：</p> <p><img src="/javablog/public/assets/img/1712385972319.d7920ff0.png" alt="1712385972319"></p> <p>可以配置自动引入，把后缀.html变成后缀.ejs，如下：</p> <p><img src="/javablog/public/assets/img/1712386036774.1bfa6712.png" alt="1712386036774"></p> <p>配置：</p> <p><img src="/javablog/public/assets/img/1712386160226.d2d7679f.png" alt="1712386160226"></p> <p>效果：</p> <p><img src="/javablog/public/assets/img/1712386148842.62b6e1bf.png" alt="1712386148842"></p> <h3 id="_7-配置打包生成hash"><a href="#_7-配置打包生成hash" class="header-anchor">#</a> 7，配置打包生成hash</h3> <p>打包如下：</p> <p><img src="data:image/png;base64,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" alt="1712386252278"></p> <p>打包成功后如下：</p> <p><img src="/javablog/public/assets/img/1712386308832.d1eeaee7.png" alt="1712386308832"></p> <p>配置添加hash，如下：</p> <p><img src="/javablog/public/assets/img/1712386341862.7fb47cdb.png" alt="1712386341862"></p> <p>再次打包：</p> <p><img src="data:image/png;base64,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" alt="1712386361262"></p> <p>测试：</p> <p><img src="/javablog/public/assets/img/1712386391058.8557583a.png" alt="1712386391058"></p> <h3 id="_8-基于cross-env设置环境变量"><a href="#_8-基于cross-env设置环境变量" class="header-anchor">#</a> 8，基于cross-env设置环境变量</h3> <p>安装cross-env模块：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm i cross-env@^7.0.3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置：</p> <p><img src="/javablog/public/assets/img/1712386524329.32b7c1bd.png" alt="1712386524329"></p> <p>测试：</p> <p><img src="/javablog/public/assets/img/1712386576000.feda9f49.png" alt="1712386576000"></p> <p><img src="/javablog/public/assets/img/1712386585662.d7701452.png" alt="1712386585662"></p> <h2 id="三-dva中的路由"><a href="#三-dva中的路由" class="header-anchor">#</a> 三，Dva中的路由</h2> <h3 id="_1-dva中的路由介绍"><a href="#_1-dva中的路由介绍" class="header-anchor">#</a> 1，Dva中的路由介绍</h3> <p>看项目的入口：</p> <p><img src="/javablog/public/assets/img/1712444396483.afc4fc35.png" alt="1712444396483"></p> <p>路由文件：</p> <p><img src="/javablog/public/assets/img/1712444452105.dfd07723.png" alt="1712444452105"></p> <p>默认的路由模式是hash路由，如下：</p> <p><img src="/javablog/public/assets/img/1712444609549.21ec1edf.png" alt="1712444609549"></p> <p>如果要使用history路由，先安装模块：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm i history@^4.10.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用时，参考文档：</p> <p><img src="/javablog/public/assets/img/1712444765404.e9742c33.png" alt="1712444765404"></p> <p>配置之：</p> <p><img src="/javablog/public/assets/img/1712444932564.ceddfa54.png" alt="1712444932564"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> dva <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'@babel/polyfill'</span>
<span class="token keyword">import</span> createHistory <span class="token keyword">from</span> <span class="token string">&quot;history/createBrowserHistory&quot;</span>

<span class="token comment">// 1. Initialize</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 指定路由模式，默认是hash路由</span>
    <span class="token comment">// createBrowserHistory / createHashHistory</span>
    <span class="token literal-property property">history</span><span class="token operator">:</span><span class="token function">createHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. Plugins</span>
<span class="token comment">// app.use({});</span>

<span class="token comment">// 3. Model</span>
<span class="token comment">// app.model(require('./models/example').default);</span>

<span class="token comment">// 4. Router   处理路由</span>
app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5. Start   在start之前，需要先处理路由</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>hash路由使用的最多，history路由有一些问题，还需要后端处理一下。</p> <p>通过 extraEnhancers 可以扩展其它中间件，如：redux-persist</p> <p><img src="/javablog/public/assets/img/1712445011970.16d76b11.png" alt="1712445011970"></p> <p>在dva/router中包含了两大块内容：</p> <ul><li>react-router-dom 提供了所有的路由相关的API，当然是V5版本。</li> <li>react-router-redux [routerRedux]中的方法，就是把路由和redux结合在一起的一个模块，可以让我们在redux操作中，实现路由的跳转与传参。</li></ul> <p>在配置一级路由和二路由之前，先创建如下组件：</p> <p><img src="/javablog/public/assets/img/1712445607036.8cbb9f63.png" alt="1712445607036"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Vote</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">React比Vue值钱？</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">支持：</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token plain-text"> 人</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">反对：</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token plain-text"> 人</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">支持</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">反对</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Vote<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">0</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Count<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我的模块</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> User<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Order<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Profile</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">个人信息</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Profile<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-配置一级路由和二级路由"><a href="#_2-配置一级路由和二级路由" class="header-anchor">#</a> 2，配置一级路由和二级路由</h3> <p>配置一级路由如下：</p> <p><img src="/javablog/public/assets/img/1712446983783.f3a8c66e.png" alt="1712446983783"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vote <span class="token keyword">from</span> <span class="token string">&quot;./routes/Vote&quot;</span>
<span class="token keyword">import</span> Count <span class="token keyword">from</span> <span class="token string">&quot;./routes/Count&quot;</span>
<span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">&quot;./routes/User&quot;</span>

<span class="token comment">// antd</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ConfigProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> zhCN <span class="token keyword">from</span> <span class="token string">&quot;antd/es/locale/zh_CN&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.less&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;lib-flexible&quot;</span>

<span class="token keyword">function</span> <span class="token function">RouterConfig</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> history<span class="token punctuation">,</span>app <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// history对象是包含路由跳转方法的history对象</span>
  <span class="token comment">// app 是基于dva创建的应用</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ConfigProvider locale<span class="token operator">=</span><span class="token punctuation">{</span>zhCN<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* history={history} 必须要写 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>Router history<span class="token operator">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 路由配置：之前我们讲的是V6版本，下面的写法是V5版本 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span>Vote<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/count&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Count<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ConfigProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> RouterConfig<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712447018171.7542d2ed.png" alt="1712447018171"></p> <p>配置二级路由：</p> <p><img src="/javablog/public/assets/img/1712447282815.f7f6d1e6.png" alt="1712447282815"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>NavLink<span class="token punctuation">,</span>Switch<span class="token punctuation">,</span>Route<span class="token punctuation">,</span>Redirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>
<span class="token keyword">import</span> Order <span class="token keyword">from</span> <span class="token string">&quot;./user/Order&quot;</span>
<span class="token keyword">import</span> Profile <span class="token keyword">from</span> <span class="token string">&quot;./user/Profile&quot;</span>

<span class="token keyword">const</span> UserBox <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    display:flex;
    .box{
        width:100px;
        a{
            display:block;
            color:#000;
            line-height:35px;
            font-size:14px;
            &amp;.active{
                color:red;
            }
        }
    }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserBox</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我的订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我的信息</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span> <span class="token attr-name">from</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/order<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/order<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Order<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/profile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserBox</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> User<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>测试如下：</p> <p><img src="/javablog/public/assets/img/1712447303450.b86a4484.png" alt="1712447303450"></p> <h3 id="_3-路由懒加载"><a href="#_3-路由懒加载" class="header-anchor">#</a> 3，路由懒加载</h3> <p>前面的在配置一级路由和二级路由时，组件是上一来就加载好了，如下：</p> <p><img src="/javablog/public/assets/img/1712447692997.c414c7e0.png" alt="1712447692997"></p> <p>在配置路由懒加载之前，先说一个东西，叫models。在dva中，一个模块，就一个models，我们可以创建vote对应的model和count对应的model，如下：</p> <p><img src="/javablog/public/assets/img/1712447923334.6d1dc881.png" alt="1712447923334"></p> <p><img src="/javablog/public/assets/img/1712447942893.f20dbaa5.png" alt="1712447942893"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// dva中三大核心：model数据模型（每个模块的状态管理） + 路由 + 配置</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token literal-property property">namespace</span><span class="token operator">:</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 模块名</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 状态</span>
    <span class="token literal-property property">reducers</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 同步修改状态的方法</span>
    <span class="token literal-property property">effects</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 基于saga的语法，存放异步修改状态的方法</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token literal-property property">namespace</span><span class="token operator">:</span><span class="token string">&quot;vote&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 模块名</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 状态</span>
    <span class="token literal-property property">reducers</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 同步修改状态的方法</span>
    <span class="token literal-property property">effects</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 基于saga的语法，存放异步修改状态的方法</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在我们懒加载一个组件时，我们也可以懒加载这个组件对应的models，配置如下：</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&quot;dva/dynamic&quot;</span>
<span class="token keyword">import</span> Vote <span class="token keyword">from</span> <span class="token string">&quot;./routes/Vote&quot;</span>
<span class="token comment">// import Count from &quot;./routes/Count&quot;</span>
<span class="token comment">// import User from &quot;./routes/User&quot;</span>

<span class="token comment">// antd</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ConfigProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> zhCN <span class="token keyword">from</span> <span class="token string">&quot;antd/es/locale/zh_CN&quot;</span>
<span class="token comment">// import &quot;./index.less&quot;</span>
<span class="token comment">// import &quot;lib-flexible&quot;</span>

<span class="token keyword">function</span> <span class="token function">RouterConfig</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> history<span class="token punctuation">,</span>app <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// history对象是包含路由跳转方法的history对象</span>
  <span class="token comment">// app 是基于dva创建的应用</span>

  <span class="token comment">// 基于dva/dynamic实现路由的懒加载：组件的懒加载和对应Model的懒加载</span>
  <span class="token keyword">const</span> LazyCount <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    <span class="token function-variable function">models</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./models/count'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./routes/Count&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> LazyUser <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./routes/User&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigProvider</span></span> <span class="token attr-name">locale</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>zhCN<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* history={history} 必须要写 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Router</span></span> <span class="token attr-name">history</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* 路由配置：之前我们讲的是V6版本，下面的写法是V5版本 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Vote<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>LazyCount<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>LazyUser<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ConfigProvider</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> RouterConfig<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712448341968.1f1b4db2.png" alt="1712448341968"></p> <p><img src="/javablog/public/assets/img/1712448380914.d7b2ea47.png" alt="1712448380914"></p> <p>添加魔法注释：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> LazyCount <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    <span class="token function-variable function">models</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:'count' */</span> <span class="token string">'./models/count'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:'count' */</span> <span class="token string">&quot;./routes/Count&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> LazyUser <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:'user' */</span> <span class="token string">&quot;./routes/User&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>指定打包后文件名字以及相同名字的文件会打包在一起，再次测试：</p> <p><img src="/javablog/public/assets/img/1712448481879.8d01f2c9.png" alt="1712448481879"></p> <p><img src="/javablog/public/assets/img/1712448564560.eceee4fc.png" alt="1712448564560"></p> <p>配置二级路由模块，也实现懒加载：</p> <p><img src="/javablog/public/assets/img/1712448723391.42b9e823.png" alt="1712448723391"></p> <p><img src="/javablog/public/assets/img/1712448811649.00373c09.png" alt="1712448811649"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> LazyOrder <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> window<span class="token punctuation">.</span>app<span class="token punctuation">,</span>
    <span class="token function-variable function">models</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:'user' */</span> <span class="token string">&quot;./user/Order&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> LazyProfile <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> window<span class="token punctuation">.</span>app<span class="token punctuation">,</span>
    <span class="token function-variable function">models</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:'user' */</span> <span class="token string">&quot;./user/Profile&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/javablog/public/assets/img/1712448851088.1f73befd.png" alt="1712448851088"></p> <p>配置404组件：</p> <p><img src="/javablog/public/assets/img/1712449266766.3688fbfc.png" alt="1712449266766"></p> <h3 id="_4-配置路由表动态生成路由"><a href="#_4-配置路由表动态生成路由" class="header-anchor">#</a> 4，配置路由表动态生成路由</h3> <p>在进行权限设计时，往往后端会给我们生成路由表，我们需要根据路由表，动态生成路由规则。现在我们先定义出这个路由表，如下：</p> <p><img src="/javablog/public/assets/img/1712450047278.c1fdef4d.png" alt="1712450047278"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&quot;dva/dynamic&quot;</span>
<span class="token keyword">import</span> Vote <span class="token keyword">from</span> <span class="token string">&quot;./routes/Vote&quot;</span>

<span class="token comment">// 路由懒加载</span>
<span class="token keyword">function</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> models</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> models <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token function-variable function">models</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">app</span><span class="token operator">:</span>window<span class="token punctuation">.</span>app<span class="token punctuation">,</span> 
        models<span class="token punctuation">,</span> 
        component
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// 配置路由表</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exact</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span>Vote<span class="token punctuation">,</span> 
        <span class="token literal-property property">mate</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;首页&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/count&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span><span class="token function">lazy</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span> <span class="token comment">/* webpackChunkName:&quot;count&quot; */</span> <span class="token string">'./routes/Count'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:&quot;count&quot; */</span> <span class="token string">'./models/count'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mate</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;计数器&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span><span class="token function">lazy</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span> <span class="token comment">/* webpackChunkName:&quot;user&quot; */</span> <span class="token string">'./routes/User'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mate</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;个人中心&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 二级路由</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">exact</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">&quot;/user/order&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/user/order&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">component</span><span class="token operator">:</span><span class="token function">lazy</span><span class="token punctuation">(</span>
                    <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span> <span class="token comment">/* webpackChunkName:&quot;user&quot; */</span> <span class="token string">'./routes/user/Order'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">mate</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;我的订单&quot;</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">component</span><span class="token operator">:</span><span class="token function">lazy</span><span class="token punctuation">(</span>
                    <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span> <span class="token comment">/* webpackChunkName:&quot;user&quot; */</span> <span class="token string">'./routes/user/Profile'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">mate</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;我的信息&quot;</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">&quot;/&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> routes<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><p>有了路由表，需要写一个算法，动态生成路由规则们，如下：</p> <p><img src="/javablog/public/assets/img/1712477138085.7649dc5e.png" alt="1712477138085"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span>Redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> routes <span class="token keyword">from</span> <span class="token string">&quot;./routerRoutes&quot;</span>


<span class="token keyword">import</span> <span class="token punctuation">{</span> ConfigProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> zhCN <span class="token keyword">from</span> <span class="token string">&quot;antd/es/locale/zh_CN&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Element</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">Element</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token literal-property property">component</span><span class="token operator">:</span>Component<span class="token punctuation">,</span> history<span class="token punctuation">,</span>location<span class="token punctuation">,</span> match<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>history<span class="token punctuation">,</span> location<span class="token punctuation">,</span> match<span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>config<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// vue-template-admin  vue2的开源项目</span>
<span class="token keyword">const</span> <span class="token function-variable function">createRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">routes</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
      routes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span>path<span class="token punctuation">,</span>exact<span class="token punctuation">,</span>component<span class="token punctuation">,</span>meta<span class="token punctuation">,</span>redirect<span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
        <span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>redirect<span class="token punctuation">)</span><span class="token punctuation">{</span>
          config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">from</span><span class="token operator">:</span>path<span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span>redirect<span class="token punctuation">}</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>exact<span class="token punctuation">)</span> config<span class="token punctuation">.</span>exact <span class="token operator">=</span> exact<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Redirect key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>config<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        config <span class="token operator">=</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>exact<span class="token punctuation">)</span> config<span class="token punctuation">.</span>exact <span class="token operator">=</span> exact<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>Route key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>config<span class="token punctuation">}</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token keyword">let</span> title <span class="token operator">=</span> meta<span class="token operator">?.</span>title <span class="token operator">||</span> <span class="token string">&quot;dva学习&quot;</span>
          document<span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Element <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>item<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">RouterConfig</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> history<span class="token punctuation">,</span>app <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ConfigProvider locale<span class="token operator">=</span><span class="token punctuation">{</span>zhCN<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Router history<span class="token operator">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
          <span class="token function">createRoute</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ConfigProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> RouterConfig<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>测试之：</p> <p><img src="/javablog/public/assets/img/1712477159292.4a6adbe8.png" alt="1712477159292"></p> <p>对于二级路由，我们也写一个小算法，生成二级路由规则，如下：</p> <p><img src="/javablog/public/assets/img/1712478413774.1a51ed44.png" alt="1712478413774"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 二级路由规则</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">LevelTwoRouterConfig</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">LevelTwoRouterConfig</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> item <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token punctuation">.</span>path <span class="token operator">===</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> children <span class="token operator">=</span> item<span class="token operator">?.</span>children<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>children<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">createRoute</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// &lt;LevelTwoRouterConfig path=&quot;/user&quot; /&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在User.jsx中，使用之如下：</p> <p><img src="/javablog/public/assets/img/1712478496626.f3d23787.png" alt="1712478496626"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>NavLink<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LevelTwoRouterConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../router.js&quot;</span>

<span class="token keyword">const</span> UserBox <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    display:flex;
    .box{
        width:100px;
        a{
            display:block;
            color:#000;
            line-height:35px;
            font-size:14px;
            &amp;.active{
                color:red;
            }
        }
    }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserBox</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我的订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我的信息</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LevelTwoRouterConfig</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserBox</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> User<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712478517155.fd13d2ef.png" alt="1712478517155"></p> <h3 id="_5-路由跳转与传参"><a href="#_5-路由跳转与传参" class="header-anchor">#</a> 5，路由跳转与传参</h3> <p>使用Link组件，可以进行路由跳转，如下：</p> <p><img src="/javablog/public/assets/img/1712478752776.a88b2d90.png" alt="1712478752776"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* 还有一种导航,叫声明式导航,通过Link,NavLink */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* 点击按钮进行跳转,叫编程式导航 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* &lt;Button type=&quot;primary&quot;&gt;按钮&lt;/Button&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Order<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>跳转时，可以传递参数，传参分三种：</p> <ul><li>问号传参  ?name=malu&amp;age=18</li> <li>路径传参(动态路由)  /user/profile/malu/18</li> <li>隐式传参</li></ul> <p>问号传参：</p> <p><img src="/javablog/public/assets/img/1712478905535.c6f88bb1.png" alt="1712478905535"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">search</span><span class="token operator">:</span><span class="token string">&quot;?name=malu&amp;age=18&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Order<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>测试：</p> <p><img src="/javablog/public/assets/img/1712478940573.ac2158f5.png" alt="1712478940573"></p> <p>使用编程式导航，如下：</p> <p><img src="/javablog/public/assets/img/1712479283077.b3ba1cf4.png" alt="1712479283077"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 当访问 /user/order时,渲染Order组件,Order组件叫路由级别的组件</span>
    <span class="token comment">// 路由级别的组件,它的props中自然就有history,location,match</span>
    <span class="token comment">// console.log(props)</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>history<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token comment">// history中有一些API</span>
    <span class="token comment">//   go</span>
    <span class="token comment">//   push</span>
    <span class="token comment">//   replace</span>
    <span class="token comment">//   back</span>
    <span class="token comment">//   foward</span>
    <span class="token comment">//   ...</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">// 问号传参: 数据会放在地址栏中,反复刷新页面,数据还在,不会丢失</span>
            <span class="token comment">// push 和 repalce 区别</span>
            history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">search</span><span class="token operator">:</span><span class="token string">&quot;?name=malu&amp;age=18&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Order<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>除了问号传参，还有隐式传参，如下：</p> <p><img src="/javablog/public/assets/img/1712479638436.b52aaf2b.png" alt="1712479638436"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   
    <span class="token keyword">let</span> <span class="token punctuation">{</span>history<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        &lt;Button type=&quot;primary&quot; onClick=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">// 隐式传参,基于state把数据传递给目标组件,数据不会暴露在url中,url相对就好看一点,安全一点</span>
            <span class="token comment">// 但是刷新页面时，数据就没有了，一般不用</span>
            history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;malu&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">&gt;按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Order<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Profile</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// Profile也是路由级别的组件，</span>
    <span class="token comment">// 它的props中，也有history,location,match</span>
    <span class="token comment">// 想获取参数，通过location来获取</span>
    <span class="token comment">//   location</span>
    <span class="token comment">//     search  获取问号传参过来的数据  '?name=malu&amp;age=18'  QS模块/URLSearchParams</span>
    <span class="token comment">//     state  获取隐式传递过来的数据</span>
    <span class="token comment">//     pathname</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>location<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">个人信息</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Profile<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>刷新时，隐式传递的参数就没有了，如下：</p> <p><img src="/javablog/public/assets/img/1712479684145.4c8370fc.png" alt="1712479684145"></p> <p>还有一种传参，就是路径传参，就是所谓的动态路由，配置如下：</p> <p><img src="/javablog/public/assets/img/1712479771976.98b5ffd3.png" alt="1712479771976"></p> <p>进行参数传递，如下：</p> <p><img src="/javablog/public/assets/img/1712479890945.637483f4.png" alt="1712479890945"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   
    <span class="token keyword">let</span> <span class="token punctuation">{</span>history<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token comment">// 路径传参</span>
            <span class="token comment">//  path:&quot;/user/profile/:name?/:age?&quot;,</span>
            <span class="token comment">//  /user/profile</span>
            history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/profile/malu/18</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Order<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>在目标组件的props中有一些对象，如下：</p> <p><img src="/javablog/public/assets/img/1712480081003.f735a47e.png" alt="1712480081003"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Profile</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// Profile也是路由级别的组件，</span>
    <span class="token comment">// 它的props中，也有history,location,match</span>
    <span class="token comment">// 想获取参数，通过location来获取</span>
    <span class="token comment">//   location</span>
    <span class="token comment">//     search  获取问号传参过来的数据  '?name=malu&amp;age=18'  QS模块/URLSearchParams</span>
    <span class="token comment">//     state  获取隐式传递过来的数据</span>
    <span class="token comment">//     pathname</span>
    <span class="token comment">//   match</span>
    <span class="token comment">//     params  可以非常方便地获取路径传参过来的数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;--props:&quot;</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>

    <span class="token keyword">let</span> <span class="token punctuation">{</span>location<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">个人信息</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Profile<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>前面的Profile组件，是路由级别的组件，只有路由级别的组件，它的props中才有：</p> <ul><li>history</li> <li>location</li> <li>match</li></ul> <p>如果一个组件不是路由级别的组件，这个组件并没有参与路由的配置，这个组件想获取history, location, match，需要使用withRouter这个高阶函数，如下：</p> <p><img src="/javablog/public/assets/img/1712480507760.dbdd8a9a.png" alt="1712480507760"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token comment">// withRouter是一个高阶组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>

<span class="token comment">// 这个Demo组件没有参与路由的配置</span>
<span class="token comment">// 此时，它的props中没有history,location,match</span>
<span class="token keyword">function</span> <span class="token function">Demo</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Demo中的props:&quot;</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>

    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Demo</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Demo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// export default Demo;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>
<span class="token keyword">import</span> Demo <span class="token keyword">from</span> <span class="token string">&quot;./Demo&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Profile</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// Profile也是路由级别的组件，</span>
    <span class="token comment">// 它的props中，也有history,location,match</span>
    <span class="token comment">// 想获取参数，通过location来获取</span>
    <span class="token comment">//   location</span>
    <span class="token comment">//     search  获取问号传参过来的数据  '?name=malu&amp;age=18'  QS模块/URLSearchParams</span>
    <span class="token comment">//     state  获取隐式传递过来的数据</span>
    <span class="token comment">//     pathname</span>
    <span class="token comment">//   match</span>
    <span class="token comment">//     params  可以非常方便地获取路径传参过来的数据</span>
    <span class="token comment">// console.log(&quot;--props:&quot;,props)</span>

    <span class="token keyword">let</span> <span class="token punctuation">{</span>location<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token comment">// console.log(location)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">个人信息</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Demo</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Demo</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Profile<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="_6-react-router-redux"><a href="#_6-react-router-redux" class="header-anchor">#</a> 6，react-router-redux</h3> <p>routerRedux是react-router-redux中提供的对象，这个对象中包含路由跳转的方法：</p> <ul><li>go</li> <li>goBack</li> <li>goFoward</li> <li>push</li> <li>replace</li></ul> <p>相比props.history来说，routerRedux不仅可以在组件中实现跳转，并且可以在redux操作中实现路由跳转。它本身就是redux和router的结合操作。在使用时，分你是在redux中使用，还是在组件中使用。</p> <ul><li>在redux中使用
<ul><li>yield put(routerRedux.push(....))</li></ul></li> <li>在组件中使用
<ul><li>dispatch(routerRedux.push(....))</li> <li>一定要基于dispatch进行派发才会跳转，执行routerRedux.push(....)，返回一个action对象</li></ul></li></ul> <p>在组件中使用：</p> <p><img src="/javablog/public/assets/img/1712482601283.9872293a.png" alt="1712482601283"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> routerRedux <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span>
                <span class="token comment">// 路径传参</span>
                routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/user/profile/malu/18&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>routerRedux.push(&quot;/user/profile/malu/18&quot;) 得到的是一个action，如下：</p> <p><img src="/javablog/public/assets/img/1712482675526.6ef3a0c2.png" alt="1712482675526"></p> <p>同样，可以进行问号传参，如下：</p> <p><img src="/javablog/public/assets/img/1712482740299.01d5716f.png" alt="1712482740299"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> routerRedux <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/user/profile/malu/18&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span>
                <span class="token comment">// 路径传参</span>
                routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">search</span><span class="token operator">:</span><span class="token string">&quot;?name=malu&amp;age=18&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>目标组件中，也是通过props中的location，match来获取数据，不演示了。也可以进行隐式传参，如下：</p> <p><img src="/javablog/public/assets/img/1712482822273.a8f6611a.png" alt="1712482822273"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> routerRedux <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva/router&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>

<span class="token keyword">function</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/user/profile/malu/18&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">订单</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        &lt;Button type=&quot;primary&quot; onClick=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span>
                <span class="token comment">// 路径传参</span>
                routerRedux<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;malu&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">&gt;按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="四-dva中的models"><a href="#四-dva中的models" class="header-anchor">#</a> 四，Dva中的Models</h2> <h3 id="_1-model层相关概念"><a href="#_1-model层相关概念" class="header-anchor">#</a> 1，Model层相关概念</h3> <p>项目中所有的Model，一般都放在src/models目录下，如下：</p> <p><img src="/javablog/public/assets/img/1712538929731.13b12839.png" alt="1712538929731"></p> <p>可以在入口中，直接引入一个Model，然后进行注册，那么一加载页面，我们注册的Model就可以使用了。把此Model打包到主JS中的，如果一加载页面，就需要使用某个Model，就可以基于app.model进行注册。如下：</p> <p><img src="/javablog/public/assets/img/1712539055616.2f81815d.png" alt="1712539055616"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> dva <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> voteModel <span class="token keyword">from</span> <span class="token string">&quot;./models/vote&quot;</span>

<span class="token comment">// 1. Initialize</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>app <span class="token operator">=</span> app<span class="token punctuation">;</span>

<span class="token comment">// 2. Plugins</span>
<span class="token comment">// app.use({});</span>

<span class="token comment">// 3. Model</span>
app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span>voteModel<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. Router</span>
app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5. Start</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>不需要页面一加载就使用的Model，我们可以和组件一样，做懒加载。只有路由匹配成功了，进入这个组件，才会把相关的JS加载出来，此时，对应的Model中的内容才能使用，如下：</p> <p><img src="/javablog/public/assets/img/1712539365875.257f68f4.png" alt="1712539365875"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 路由懒加载</span>
<span class="token keyword">function</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> models</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> models <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token function-variable function">models</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">app</span><span class="token operator">:</span>window<span class="token punctuation">.</span>app<span class="token punctuation">,</span> 
        models<span class="token punctuation">,</span> 
        component
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span>Vote<span class="token punctuation">,</span>  
        <span class="token literal-property property">exact</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mate</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;首页&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/count&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span><span class="token function">lazy</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span> <span class="token comment">/* webpackChunkName:&quot;count&quot; */</span> <span class="token string">'./routes/Count'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:&quot;count&quot; */</span> <span class="token string">'./models/count'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mate</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;计数器&quot;</span><span class="token punctuation">}</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>如果所有的Model，全部打包到主JS中，页面一加载就把所有的Model都准备好了，我们想怎么用就怎么用。但是此时模块越多，对应的Model也很多，那么主JS就会比较大，第一次渲染速度就会降低。所以我们可以把不需要在第一次加载完就处理的Model，只有进入相关组件才需要处理的Model，可以通过dynamic配置成懒加载。</p> <p><img src="/javablog/public/assets/img/1712539479195.9acd8924.png" alt="1712539479195"></p> <p>在每一个Model中都包含了5部分内容：</p> <ul><li>namespace：模块名，这个名字是后期我们获取状态和进行派发的标识</li> <li>state: 一个模块中存储的状态     state.count.num</li> <li>reducers:  存储一个个的方法，都是同步修改的方法，外部派发 dispatch('count/xxxx')</li> <li>effects: 基于redux-saga实现异步操作，异步派发</li> <li>subscriptions: 在这里订阅的方法，会在页面一加载的时候就会被执行。可以把页面一加载，就要去做的事情写在这里。在这里也可以基于history.listen做事件监听，保证进入哪个组件再处理也可以。</li></ul> <p>在Model中定义好状态了，在组件中可以使用了，先状态状态：</p> <p><img src="/javablog/public/assets/img/1712539640531.d515400c.png" alt="1712539640531"></p> <p>在组件中使用：</p> <p><img src="/javablog/public/assets/img/1712539783662.33c026b3.png" alt="1712539783662"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>

<span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>num<span class="token punctuation">,</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// state=&gt;state.count 把仓库中count模块中的状态，映射成组件的props</span>
<span class="token comment">// connect还有第二个参数，第二个参数一般不写</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token operator">=&gt;</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-model层操作"><a href="#_2-model层操作" class="header-anchor">#</a> 2，Model层操作</h3> <p>其实，仓库中状态的定义，我们可以直接写在入口中，如下：</p> <p><img src="/javablog/public/assets/img/1712539973273.6c5d203a.png" alt="1712539973273"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> dva <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> voteModel <span class="token keyword">from</span> <span class="token string">&quot;./models/vote&quot;</span>

<span class="token comment">// 1. Initialize</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 指定初始化状态</span>
    <span class="token literal-property property">initialState</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">200</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>app <span class="token operator">=</span> app<span class="token punctuation">;</span>

<span class="token comment">// 2. Plugins</span>
<span class="token comment">// app.use({});</span>

<span class="token comment">// 3. Model</span>
app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span>voteModel<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. Router</span>
app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5. Start</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>不进行懒加载，直接在入口中进行注册，如下：</p> <p><img src="/javablog/public/assets/img/1712540004132.c6733fff.png" alt="1712540004132"></p> <p><img src="/javablog/public/assets/img/1712540050745.7c1dab75.png" alt="1712540050745"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> dva <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> voteModel <span class="token keyword">from</span> <span class="token string">&quot;./models/vote&quot;</span>
<span class="token keyword">import</span> countModel <span class="token keyword">from</span> <span class="token string">&quot;./models/count&quot;</span>

<span class="token comment">// 1. Initialize</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 指定初始化状态</span>
    <span class="token literal-property property">initialState</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">200</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>app <span class="token operator">=</span> app<span class="token punctuation">;</span>

<span class="token comment">// 2. Plugins</span>
<span class="token comment">// app.use({});</span>

<span class="token comment">// 3. Model</span>
app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span>voteModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span>countModel<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. Router</span>
app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5. Start</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>在入口中，给Model模块赋初始状态，它的优先级要高于每个Model中设置的初始状态，需要注意的是，这个Model一定不是懒加载的。</p> <p><img src="/javablog/public/assets/img/1712540141066.62995924.png" alt="1712540141066"></p> <p>一般情况下，都不会在入口中指定初始化状态：</p> <p><img src="/javablog/public/assets/img/1712540197559.054a22b4.png" alt="1712540197559"></p> <p>把原有的reducer函数中的每一个switch/case情况写成一个个单独的方法，第一个形参state表示本Model中的状态，我们需要把获取的state克隆一份，然后函数最后返回的值，会替换当前模块中的state。第二个形参是action， 表示派发时，传递过来的action对象（里面有一个type属性和一个payload属性）。代码演示：</p> <p><img src="/javablog/public/assets/img/1712540757006.7f818320.png" alt="1712540757006"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 模块名</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 状态</span>
        <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 同步修改状态的方法</span>
        <span class="token comment">// state表示本模块中的状态  action就是派发时传递过来的action对象</span>
        <span class="token comment">// 里面包含type 和 payload </span>
        <span class="token comment">// increment(state,action){</span>
        <span class="token comment">// increment(state,{ payload = 1 }){</span>
        <span class="token comment">//     state = {...state};  // 把老状态copy一份</span>
        <span class="token comment">//     // state.num += action.payload;</span>
        <span class="token comment">//     state.num += payload;</span>
        <span class="token comment">//     // 函数最后返回值，会替换当前模块中的state</span>
        <span class="token comment">//     return state;</span>
        <span class="token comment">// }</span>

        <span class="token comment">// 下面的写法也是可以的</span>
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 函数最后返回值，会替换当前模块中的state</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>state<span class="token punctuation">,</span> 
            <span class="token literal-property property">num</span><span class="token operator">:</span>state<span class="token punctuation">.</span>num<span class="token operator">+</span>payload
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 不要直接去修改state</span>
        <span class="token comment">// increment(state, { payload = 1 }) {</span>
        <span class="token comment">//     // 直接修改state</span>
        <span class="token comment">//     state.num += paylaod;</span>
        <span class="token comment">//     return state;</span>
        <span class="token comment">// }</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">effects</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 异步修改状态的方法</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>在组件中派发action，所谓的派发，就是通知reducers或effects中的方法执行，其中reducers是同步修改状态的，effects是异步修改状态的。如下：</p> <p><img src="/javablog/public/assets/img/1712540779362.ea411f50.png" alt="1712540779362"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>

<span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>num<span class="token punctuation">,</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;count/increment&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">payload</span><span class="token operator">:</span><span class="token number">5</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">同步加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// state=&gt;state.count 把仓库中count模块中的状态，映射成组件的props</span>
<span class="token comment">// connect还有第二个参数，第二个参数一般不写</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token operator">=&gt;</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>redux-saga中我们是基于take/takeLatest/takeEvery等方式创建监听器，此时在effects中写成一个个的生成器函数就可以。默认是基于takeEvery的方式进行监听的。其中方法名是我们创建的监听器的名字，方法就是派发的任务被监听后，要执行的工作saga。函数名不要和reducers中函数名一样，因为每次派发，reducers和effects中的方法都会进行匹配，如果函数名一样，则状态会被修改两次，一般在effects名字后面，都加Async。演示：</p> <p><img src="/javablog/public/assets/img/1712541100438.26c14eb6.png" alt="1712541100438"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">effects</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 异步修改状态的方法</span>
    <span class="token operator">*</span><span class="token function">incrementAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在组件中进行派发，只要名字中带有async的，就是异步派发。如下：</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>

<span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> num<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;count/increment&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token number">5</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">同步加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;count/incrementAsync&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token number">10</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">异步加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// state=&gt;state.count 把仓库中count模块中的状态，映射成组件的props</span>
<span class="token comment">// connect还有第二个参数，第二个参数一般不写</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>画图：</p> <p><img src="/javablog/public/assets/img/1712485388188.8daae42c.png" alt="1712485388188"></p> <p>effects方法中的形参有两个：</p> <ul><li>第1个是action，就是在组件中进行派发时，传递的action对象</li> <li>第2个参数是redux-saga中提供的EffectsAPI，但是没有delay/debounce等待
<ul><li>基于yield select() 可以获取所有模块的公共状态（let xxx = yield select()）。也可以获取指定Model中的状态（let {num} = yield select(state=&gt;state.count)）</li> <li>基于yield put就可以派发一个action。</li></ul></li></ul> <p><img src="/javablog/public/assets/img/1712541293269.b4e268e8.png" alt="1712541293269"></p> <p><img src="/javablog/public/assets/img/1712541335851.d9f6db6e.png" alt="1712541335851"></p> <p>写一个delay方法，如下：</p> <p><img src="/javablog/public/assets/img/1712541438834.dbdabb60.png" alt="1712541438834"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">interval<span class="token operator">=</span><span class="token number">1000</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>interval<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>基于yield call调用上面的延迟函数，基于yield put实现派发，如下：</p> <p><img src="/javablog/public/assets/img/1712541593679.0be698cd.png" alt="1712541593679"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">effects</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 异步修改状态的方法</span>
    <span class="token operator">*</span><span class="token function">incrementAsync</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>payload<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>call<span class="token punctuation">,</span>put<span class="token punctuation">,</span>select<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// let xx = yield select(state=&gt;state.count);</span>
        <span class="token comment">// console.log(&quot;xx:&quot;,xx)</span>

        <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span>
            payload
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果要设置不同类型的监听器，数组第二项中指定监听器的类型。可以这样写：</p> <p><img src="/javablog/public/assets/img/1712541748351.1c826def.png" alt="1712541748351"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">effects</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 异步修改状态的方法</span>
    <span class="token literal-property property">incrementAsync</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>payload<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>call<span class="token punctuation">,</span>put<span class="token punctuation">,</span>select<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span>
                payload
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 数组第二项是指定监听器的类型</span>
        <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'takeLatest'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>还可以指定其它类型：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{type:'throttle',ms:500}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>快速实现支持和反对，异步支持和异步反对，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">interval<span class="token operator">=</span><span class="token number">1000</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>interval<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">namespace</span><span class="token operator">:</span><span class="token string">&quot;vote&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 模块名</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>  <span class="token comment">// 状态</span>
        <span class="token literal-property property">supNum</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token literal-property property">oppNum</span><span class="token operator">:</span><span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">reducers</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">support</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token operator">...</span>state<span class="token punctuation">,</span>
                <span class="token literal-property property">supNum</span><span class="token operator">:</span>state<span class="token punctuation">.</span>supNum<span class="token operator">+</span><span class="token number">1</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">oppose</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token operator">...</span>state<span class="token punctuation">,</span>
                <span class="token literal-property property">oppNum</span><span class="token operator">:</span>state<span class="token punctuation">.</span>oppNum<span class="token operator">+</span><span class="token number">1</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">effects</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token operator">*</span><span class="token function">supportAsync</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span>call<span class="token punctuation">,</span> put<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'support'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">opposeAsync</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> <span class="token punctuation">{</span>call<span class="token punctuation">,</span> put<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'oppose'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'takeLatest'</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>组件中派发上面的任务：</p> <p><img src="/javablog/public/assets/img/1712542957315.8a3e5fd2.png" alt="1712542957315"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>
<span class="token keyword">function</span> <span class="token function">Vote</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> supNum<span class="token punctuation">,</span> oppNum<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">React比Vue值钱？</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span>supNum <span class="token operator">+</span> oppNum<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">支持：</span><span class="token punctuation">{</span>supNum<span class="token punctuation">}</span><span class="token plain-text"> 人</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">反对：</span><span class="token punctuation">{</span>oppNum<span class="token punctuation">}</span><span class="token plain-text"> 人</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'vote/support'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">同步支持</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'vote/oppose'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">同步反对</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'vote/supportAsync'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">异步支持</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'vote/opposeAsync'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">异步反对</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>vote<span class="token punctuation">)</span><span class="token punctuation">(</span>Vote<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_3-dva中的subscription"><a href="#_3-dva中的subscription" class="header-anchor">#</a> 3，dva中的subscription</h3> <p>subscriptions中写的方法，页面一加载就会把它里面所有方法都执行，它里面写的方法是普通方法，并不是Generator函数。</p> <p><img src="/javablog/public/assets/img/1712543360214.afa1846c.png" alt="1712543360214"></p> <p><img src="/javablog/public/assets/img/1712543401371.f1cec7e9.png" alt="1712543401371"></p> <p><img src="/javablog/public/assets/img/1712543461715.940c0ec1.png" alt="1712543461715"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">subscriptions</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fn...&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">gn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'gn...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>形参中有history和dispatch两个属性。history是包含路由跳转和监听history对象的listener。dispatch是进行派发的方法。</p> <p><img src="/javablog/public/assets/img/1712543573799.9829d85b.png" alt="1712543573799"></p> <p>如果想页面一加载（或者是指定某个条件下），我们想从服务器异步获取数据，修改引Model中的状态值，则可以写在subscriptions中。</p> <p><img src="/javablog/public/assets/img/1712543781345.85e732e2.png" alt="1712543781345"></p> <p>方法只有页面一加载的时候，订阅执行一次，在后期路由切换中，不再执行，如下：</p> <p><img src="/javablog/public/assets/img/1712543879245.d4ca5755.png" alt="1712543879245"></p> <p>如果想让它在页面一加载时，执行一次，在路由切换时，也执行，操作如下：</p> <p><img src="/javablog/public/assets/img/1712544067676.42bd332e.png" alt="1712544067676"></p> <p>现在想访问/时执行，访问 /count时不执行，如下：</p> <p><img src="/javablog/public/assets/img/1712544236760.48880e99.png" alt="1712544236760"></p> <p>只要访问 / 就加1，如下：</p> <p><img src="/javablog/public/assets/img/1712544343483.debffcd4.png" alt="1712544343483"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">subscriptions</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// async setup({history,dispatch}){</span>
    <span class="token comment">//     console.log(&quot;xxxxxxxxxxxx&quot;)</span>
    <span class="token comment">//     await delay(2000)</span>
    <span class="token comment">//     dispatch({type:'support'})</span>
    <span class="token comment">// }</span>

    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>history<span class="token punctuation">,</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        history<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">location</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span>pathname<span class="token punctuation">}</span> <span class="token operator">=</span> location<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
                <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'support'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>history.listen表示创建一个监听器，监听器是可以移除的，如下：</p> <p><img src="/javablog/public/assets/img/1712544590702.20b0f318.png" alt="1712544590702"></p> <p>上面的演示是在vote Model没有懒加载的情况下执行的效果。对于count组件和对应的Model，可以懒加载，如下：</p> <p><img src="/javablog/public/assets/img/1712544688659.ce74444a.png" alt="1712544688659"></p> <p><img src="/javablog/public/assets/img/1712544717619.19e6453a.png" alt="1712544717619"></p> <p>在count.js中写subscriptions，如下：</p> <p><img src="/javablog/public/assets/img/1712544861778.0b48b7e2.png" alt="1712544861778"></p> <p><img src="/javablog/public/assets/img/1712544929739.5e0e1184.png" alt="1712544929739"></p> <h3 id="_4-dva-loading插件"><a href="#_4-dva-loading插件" class="header-anchor">#</a> 4，dva-loading插件</h3> <p><img src="/javablog/public/assets/img/1712545116331.d506047a.png" alt="1712545116331"></p> <p>安装插件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i dva-loading@^3.0.22
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/javablog/public/assets/img/1712545301329.b2771dd0.png" alt="1712545301329"></p> <p>看Count组件，打印出dispatch函数执行的结果：</p> <p><img src="/javablog/public/assets/img/1712545564574.476ad482.png" alt="1712545564574"></p> <p>上面的打印结果是und，原因是在effects中没有写返回值，如下：</p> <p><img src="/javablog/public/assets/img/1712545642697.2a24c1eb.png" alt="1712545642697"></p> <p>上面异步加使用的是takeLatest创建的监听器，就已经实现了所谓的防抖，如下：</p> <p><img src="/javablog/public/assets/img/1712545780010.46998a2f.png" alt="1712545780010"></p> <p>现在不在监听saga中做防抖处理，如下：</p> <p><img src="/javablog/public/assets/img/1712545901804.ce21a784.png" alt="1712545901804"></p> <p>给按钮添加一个loading，实现防抖，如下：</p> <p><img src="/javablog/public/assets/img/1712546193569.f0f84250.png" alt="1712546193569"></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;dva&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> num<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;count/increment&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token number">5</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">同步加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">loading</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;count/incrementAsync&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token number">10</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">异步加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// state=&gt;state.count 把仓库中count模块中的状态，映射成组件的props</span>
<span class="token comment">// connect还有第二个参数，第二个参数一般不写</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>上面是自己写状态控制，现在我们可以使用dva-loading插件，如下：</p> <p><img src="/javablog/public/assets/img/1712546361602.426c18dc.png" alt="1712546361602"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> dva <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> voteModel <span class="token keyword">from</span> <span class="token string">&quot;./models/vote&quot;</span>
<span class="token keyword">import</span> createLoading <span class="token keyword">from</span> <span class="token string">&quot;dva-loading&quot;</span>

<span class="token comment">// import countModel from &quot;./models/count&quot;</span>

<span class="token comment">// 1. Initialize</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">dva</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 指定初始化状态</span>
    <span class="token comment">// initialState:{</span>
    <span class="token comment">//     count:{</span>
    <span class="token comment">//         num:200</span>
    <span class="token comment">//     }</span>
    <span class="token comment">// }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>app <span class="token operator">=</span> app<span class="token punctuation">;</span>

<span class="token comment">// 2. Plugins</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3. Model</span>
app<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span>voteModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// app.model(countModel);</span>

<span class="token comment">// 4. Router</span>
app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5. Start</span>
app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>在组件中，就可以结构出来了，如下：</p> <p><img src="/javablog/public/assets/img/1712546594056.69acac1f.png" alt="1712546594056"></p> <h3 id="_5-使用redux-logger中间件"><a href="#_5-使用redux-logger中间件" class="header-anchor">#</a> 5，使用redux-logger中间件</h3> <p>安装redux-logger中间件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm i redux-logger@2.10.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看一个依赖的版本：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm view redux-logger versions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用redux-logger中间件：</p> <p><img src="/javablog/public/assets/img/1712547559601.ff3d95ba.png" alt="1712547559601"></p> <p>测试一下：</p> <p><img src="/javablog/public/assets/img/1712547755955.18fe0f41.png" alt="1712547755955"></p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/8/2024, 11:51:16 AM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#一-dva介绍" class="sidebar-link reco-side-一-dva介绍" data-v-b57cc07c>一，Dva介绍</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_1-dva介绍" class="sidebar-link reco-side-_1-dva介绍" data-v-b57cc07c>1，Dva介绍</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_2-dva脚手架" class="sidebar-link reco-side-_2-dva脚手架" data-v-b57cc07c>2，Dva脚手架</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#二-dva配置" class="sidebar-link reco-side-二-dva配置" data-v-b57cc07c>二，Dva配置</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_1-配置支持antd" class="sidebar-link reco-side-_1-配置支持antd" data-v-b57cc07c>1，配置支持antd</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_2-配置less" class="sidebar-link reco-side-_2-配置less" data-v-b57cc07c>2，配置less</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_3-配置代理" class="sidebar-link reco-side-_3-配置代理" data-v-b57cc07c>3，配置代理</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_4-配置移动端" class="sidebar-link reco-side-_4-配置移动端" data-v-b57cc07c>4，配置移动端</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_5-es6和css3处理" class="sidebar-link reco-side-_5-es6和css3处理" data-v-b57cc07c>5，ES6和CSS3处理</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_6-配置index-ejs" class="sidebar-link reco-side-_6-配置index-ejs" data-v-b57cc07c>6，配置index.ejs</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_7-配置打包生成hash" class="sidebar-link reco-side-_7-配置打包生成hash" data-v-b57cc07c>7，配置打包生成hash</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_8-基于cross-env设置环境变量" class="sidebar-link reco-side-_8-基于cross-env设置环境变量" data-v-b57cc07c>8，基于cross-env设置环境变量</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#三-dva中的路由" class="sidebar-link reco-side-三-dva中的路由" data-v-b57cc07c>三，Dva中的路由</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_1-dva中的路由介绍" class="sidebar-link reco-side-_1-dva中的路由介绍" data-v-b57cc07c>1，Dva中的路由介绍</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_2-配置一级路由和二级路由" class="sidebar-link reco-side-_2-配置一级路由和二级路由" data-v-b57cc07c>2，配置一级路由和二级路由</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_3-路由懒加载" class="sidebar-link reco-side-_3-路由懒加载" data-v-b57cc07c>3，路由懒加载</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_4-配置路由表动态生成路由" class="sidebar-link reco-side-_4-配置路由表动态生成路由" data-v-b57cc07c>4，配置路由表动态生成路由</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_5-路由跳转与传参" class="sidebar-link reco-side-_5-路由跳转与传参" data-v-b57cc07c>5，路由跳转与传参</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_6-react-router-redux" class="sidebar-link reco-side-_6-react-router-redux" data-v-b57cc07c>6，react-router-redux</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#四-dva中的models" class="sidebar-link reco-side-四-dva中的models" data-v-b57cc07c>四，Dva中的Models</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_1-model层相关概念" class="sidebar-link reco-side-_1-model层相关概念" data-v-b57cc07c>1，Model层相关概念</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_2-model层操作" class="sidebar-link reco-side-_2-model层操作" data-v-b57cc07c>2，Model层操作</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_3-dva中的subscription" class="sidebar-link reco-side-_3-dva中的subscription" data-v-b57cc07c>3，dva中的subscription</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_4-dva-loading插件" class="sidebar-link reco-side-_4-dva-loading插件" data-v-b57cc07c>4，dva-loading插件</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/24.html#_5-使用redux-logger中间件" class="sidebar-link reco-side-_5-使用redux-logger中间件" data-v-b57cc07c>5，使用redux-logger中间件</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/javablog/public/assets/js/app.1e9af863.js" defer></script><script src="/javablog/public/assets/js/52.9ab44965.js" defer></script><script src="/javablog/public/assets/js/1.3c422ec2.js" defer></script><script src="/javablog/public/assets/js/22.d677dae3.js" defer></script>
  </body>
</html>
