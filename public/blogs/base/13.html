<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>13-vue2项目 | 码路全栈开发</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/javablog/public/favicon.ico">
    <meta name="description" content="快来玩java全栈呀">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/javablog/public/assets/css/0.styles.0bd56f36.css" as="style"><link rel="preload" href="/javablog/public/assets/js/app.0248906e.js" as="script"><link rel="preload" href="/javablog/public/assets/js/25.0888173b.js" as="script"><link rel="preload" href="/javablog/public/assets/js/1.381cc6bf.js" as="script"><link rel="preload" href="/javablog/public/assets/js/4.079f8070.js" as="script"><link rel="prefetch" href="/javablog/public/assets/js/10.a0c7831a.js"><link rel="prefetch" href="/javablog/public/assets/js/11.17f34092.js"><link rel="prefetch" href="/javablog/public/assets/js/12.f19188c2.js"><link rel="prefetch" href="/javablog/public/assets/js/13.490d0c8d.js"><link rel="prefetch" href="/javablog/public/assets/js/14.50354052.js"><link rel="prefetch" href="/javablog/public/assets/js/15.e6110a7c.js"><link rel="prefetch" href="/javablog/public/assets/js/16.d5af891c.js"><link rel="prefetch" href="/javablog/public/assets/js/17.41daa0cf.js"><link rel="prefetch" href="/javablog/public/assets/js/18.7b1a600d.js"><link rel="prefetch" href="/javablog/public/assets/js/19.16b1169f.js"><link rel="prefetch" href="/javablog/public/assets/js/20.ee48ddaf.js"><link rel="prefetch" href="/javablog/public/assets/js/21.0a4eaeab.js"><link rel="prefetch" href="/javablog/public/assets/js/22.5e98938a.js"><link rel="prefetch" href="/javablog/public/assets/js/23.0dfcc16f.js"><link rel="prefetch" href="/javablog/public/assets/js/24.a8b93a3f.js"><link rel="prefetch" href="/javablog/public/assets/js/26.4352304b.js"><link rel="prefetch" href="/javablog/public/assets/js/27.b4c17386.js"><link rel="prefetch" href="/javablog/public/assets/js/28.107369b0.js"><link rel="prefetch" href="/javablog/public/assets/js/29.4fab2eab.js"><link rel="prefetch" href="/javablog/public/assets/js/3.af4f9ac4.js"><link rel="prefetch" href="/javablog/public/assets/js/30.8d69512b.js"><link rel="prefetch" href="/javablog/public/assets/js/31.2b4153ca.js"><link rel="prefetch" href="/javablog/public/assets/js/32.313e7176.js"><link rel="prefetch" href="/javablog/public/assets/js/33.808219f0.js"><link rel="prefetch" href="/javablog/public/assets/js/34.286ce5cd.js"><link rel="prefetch" href="/javablog/public/assets/js/35.c5c4446f.js"><link rel="prefetch" href="/javablog/public/assets/js/36.7f3d87a9.js"><link rel="prefetch" href="/javablog/public/assets/js/37.5bf5fbb5.js"><link rel="prefetch" href="/javablog/public/assets/js/38.b094e8de.js"><link rel="prefetch" href="/javablog/public/assets/js/39.fcae9f69.js"><link rel="prefetch" href="/javablog/public/assets/js/40.815ea2eb.js"><link rel="prefetch" href="/javablog/public/assets/js/41.b5591e8f.js"><link rel="prefetch" href="/javablog/public/assets/js/42.072069d9.js"><link rel="prefetch" href="/javablog/public/assets/js/43.de3036ae.js"><link rel="prefetch" href="/javablog/public/assets/js/44.298c5f47.js"><link rel="prefetch" href="/javablog/public/assets/js/45.8c9ea829.js"><link rel="prefetch" href="/javablog/public/assets/js/46.563401aa.js"><link rel="prefetch" href="/javablog/public/assets/js/47.f7de04cf.js"><link rel="prefetch" href="/javablog/public/assets/js/48.fbb0c9d8.js"><link rel="prefetch" href="/javablog/public/assets/js/49.deb635b6.js"><link rel="prefetch" href="/javablog/public/assets/js/5.e513191b.js"><link rel="prefetch" href="/javablog/public/assets/js/50.d43c66ed.js"><link rel="prefetch" href="/javablog/public/assets/js/51.a66282f9.js"><link rel="prefetch" href="/javablog/public/assets/js/52.843d87a1.js"><link rel="prefetch" href="/javablog/public/assets/js/53.26f33d4a.js"><link rel="prefetch" href="/javablog/public/assets/js/54.cdf6c6bc.js"><link rel="prefetch" href="/javablog/public/assets/js/55.5e4b1c17.js"><link rel="prefetch" href="/javablog/public/assets/js/56.3ca47daf.js"><link rel="prefetch" href="/javablog/public/assets/js/57.be2c420f.js"><link rel="prefetch" href="/javablog/public/assets/js/58.81fcefca.js"><link rel="prefetch" href="/javablog/public/assets/js/59.c57e85bf.js"><link rel="prefetch" href="/javablog/public/assets/js/6.75d2844a.js"><link rel="prefetch" href="/javablog/public/assets/js/60.c63e0ffd.js"><link rel="prefetch" href="/javablog/public/assets/js/61.6959a46f.js"><link rel="prefetch" href="/javablog/public/assets/js/62.77e275fe.js"><link rel="prefetch" href="/javablog/public/assets/js/63.34257e9a.js"><link rel="prefetch" href="/javablog/public/assets/js/64.3eb057ed.js"><link rel="prefetch" href="/javablog/public/assets/js/65.32f9a06a.js"><link rel="prefetch" href="/javablog/public/assets/js/7.8ea05c20.js"><link rel="prefetch" href="/javablog/public/assets/js/8.c31f40cb.js"><link rel="prefetch" href="/javablog/public/assets/js/9.8018fd20.js">
    <link rel="stylesheet" href="/javablog/public/assets/css/0.styles.0bd56f36.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>码路全栈开发</h3> <p class="description" data-v-59e6cb88>快来玩java全栈呀</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>码路</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javablog/public/" class="home-link router-link-active"><img src="/javablog/public/logo.png" alt="码路全栈开发" class="logo"> <span class="site-name">码路全栈开发</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javablog/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      全栈开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javase/" class="nav-link"><i class="undefined"></i>
  javase
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li></ul></div></div><div class="nav-item"><a href="/javablog/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/javablog/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/javablog/public/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    码路
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>55</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>6</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/javablog/public/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      全栈开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/categories/base/" class="nav-link"><i class="undefined"></i>
  base
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javase/" class="nav-link"><i class="undefined"></i>
  javase
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/javaweb/" class="nav-link"><i class="undefined"></i>
  javaweb
</a></li><li class="dropdown-item"><!----> <a href="/javablog/public/categories/ssm/" class="nav-link"><i class="undefined"></i>
  ssm
</a></li></ul></div></div><div class="nav-item"><a href="/javablog/public/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/javablog/public/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javablog/public/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>13-vue2项目</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>码路</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">13-vue2项目</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>码路</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>12/15/2028</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>js</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="一-项目介绍"><a href="#一-项目介绍" class="header-anchor">#</a> 一，项目介绍</h2> <h3 id="_1-项目介绍"><a href="#_1-项目介绍" class="header-anchor">#</a> 1，项目介绍</h3> <p>开源GitHub项目地址：https://github.com/newbee-ltd</p> <p>项目访问地址：http://47.99.134.126:5000/</p> <p>账号密码：</p> <ul><li>已注册账号：18333333334</li> <li>密码：123456</li></ul> <h3 id="_2-项目分析"><a href="#_2-项目分析" class="header-anchor">#</a> 2，项目分析</h3> <p>五大组件与路由分析：</p> <ul><li>首页面组件  Home.vue</li> <li>分类组件  Classify.vue</li> <li>购物车组件  Cart.vue</li> <li>我的组件  Personal.vue</li> <li>登录组件  Login.vue</li></ul> <p>network面板分析登录接口：</p> <p><img src="/javablog/public/assets/img/1698369277797.e8f047c4.png" alt="1698369277797"></p> <p><img src="/javablog/public/assets/img/1698369519199.53071f36.png" alt="1698369519199"></p> <p><img src="/javablog/public/assets/img/1698369596512.f3b7a3e5.png" alt="1698369596512"></p> <p><img src="/javablog/public/assets/img/1698369737625.7c50f9c5.png" alt="1698369737625"></p> <p><img src="/javablog/public/assets/img/1698369986755.cd07c522.png" alt="1698369986755"></p> <p>application面板分析：</p> <p><img src="/javablog/public/assets/img/1698370070033.b72b3f88.png" alt="1698370070033"></p> <h3 id="_3-项目的骨架"><a href="#_3-项目的骨架" class="header-anchor">#</a> 3，项目的骨架</h3> <p>我把项目中使用到的依赖，都记录好，把骨架发给大家，大家基于这个骨架进行开发，如下：</p> <p><img src="/javablog/public/assets/img/1698370357009.cd268c2a.png" alt="1698370357009"></p> <p>大家，需要解压，安装依赖（跑环境）：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>运行项目（看package.json）：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> run serve
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="二-搭建五大组件并配置路由"><a href="#二-搭建五大组件并配置路由" class="header-anchor">#</a> 二，搭建五大组件并配置路由</h2> <h3 id="_1-创建出五大组件"><a href="#_1-创建出五大组件" class="header-anchor">#</a> 1，创建出五大组件</h3> <p>组件分两类：</p> <ul><li>页面级别的组件（路由级别的组件）</li> <li>通用组件（小组件，多个页面中可能都会用到）</li></ul> <p>上面分析的5大组件，是路由级别的，一般情况下，会放到views文件夹中，或者是pages文件夹中，如下：</p> <p><img src="/javablog/public/assets/img/1698370499889.a9ff7aca.png" alt="1698370499889"></p> <p>配置路由，如下：</p> <p><img src="/javablog/public/assets/img/1698370815994.43328b2a.png" alt="1698370815994"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>

<span class="token keyword">let</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/classify'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Classify.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/cart'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Cart.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/personal'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Personal.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>在main.js中引入，挂载到根组件上，如下：</p> <p><img src="/javablog/public/assets/img/1698370864116.41ece7d6.png" alt="1698370864116"></p> <p>在App.vue中，需要指定出口，如下：</p> <p><img src="/javablog/public/assets/img/1698370887818.11117f82.png" alt="1698370887818"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698370914084.d213fbf1.png" alt="1698370914084"></p> <h3 id="_2-vant组件库的使用"><a href="#_2-vant组件库的使用" class="header-anchor">#</a> 2，Vant组件库的使用</h3> <p>vant组件库，提供了大量的组件，可以方便我们快速构建项目。<br></p> <p>vant的官网：https://vant-contrib.gitee.io/vant/#/zh-CN/  <br></p> <p>如果是vue2，参考文档：https://vant-contrib.gitee.io/vant/v2/#/zh-CN/   <br></p> <p>如果是vue3，参考文档：https://vant-contrib.gitee.io/vant/#/zh-CN   <br></p> <p>要使用vant中提供的组件，引入方式，分三种：</p> <ul><li>自动按需引入（推荐）</li> <li>手动按需引入</li> <li>全部引入</li></ul> <p>如何实现自动按需引入？看看文档(文档怎么说就怎么做)：</p> <ul><li>地址：https://vant-contrib.gitee.io/vant/v2/#/zh-CN/quickstart</li></ul> <p>操作步骤如下：</p> <p><img src="/javablog/public/assets/img/1698372309523.3b09c5ef.png" alt="1698372309523"></p> <p><img src="/javablog/public/assets/img/1698372365163.1ddaac7a.png" alt="1698372365163"></p> <p>操作之，如下：</p> <p><img src="/javablog/public/assets/img/1698372482141.d79ea46d.png" alt="1698372482141"></p> <p>重启项目，然后引入一个Button组件，测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698372528312.9325c6c9.png" alt="1698372528312"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698372929026.7b577ea3.png" alt="1698372929026"></p> <p>在src下面创建一个utils文件夹，里面创建一个vant.js，如下：</p> <p><img src="/javablog/public/assets/img/1698373289673.dcb7c1cb.png" alt="1698373289673"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    Button<span class="token punctuation">,</span>
    Overlay<span class="token punctuation">,</span>
    Tabbar<span class="token punctuation">,</span>
    TabbarItem<span class="token punctuation">,</span>
    Skeleton<span class="token punctuation">,</span>
    ShareSheet<span class="token punctuation">,</span>
    DropdownMenu<span class="token punctuation">,</span>
    DropdownItem<span class="token punctuation">,</span>
    Image<span class="token punctuation">,</span>
    Icon<span class="token punctuation">,</span>
    Form<span class="token punctuation">,</span>
    Field<span class="token punctuation">,</span>
    NavBar<span class="token punctuation">,</span>
    Swipe<span class="token punctuation">,</span>
    SwipeItem<span class="token punctuation">,</span>
    Grid<span class="token punctuation">,</span>
    GridItem<span class="token punctuation">,</span>
    GoodsAction<span class="token punctuation">,</span>
    GoodsActionIcon<span class="token punctuation">,</span>
    GoodsActionButton<span class="token punctuation">,</span>
    Checkbox<span class="token punctuation">,</span>
    Stepper<span class="token punctuation">,</span>
    SubmitBar<span class="token punctuation">,</span>
    AddressList<span class="token punctuation">,</span>
    AddressEdit<span class="token punctuation">,</span>
    Area<span class="token punctuation">,</span>
    Tab<span class="token punctuation">,</span>
    Tabs<span class="token punctuation">,</span>
    List<span class="token punctuation">,</span>
    Cell<span class="token punctuation">,</span>
    SwipeCell<span class="token punctuation">,</span>
    Card<span class="token punctuation">,</span>
    Dialog<span class="token punctuation">,</span>
    Toast<span class="token punctuation">,</span>
    ContactCard<span class="token punctuation">,</span>
    ActionSheet<span class="token punctuation">,</span>
    Loading<span class="token punctuation">,</span>
    divider<span class="token punctuation">,</span>
    Search<span class="token punctuation">,</span>
    Empty<span class="token punctuation">,</span>
    sidebar<span class="token punctuation">,</span>
    SidebarItem<span class="token punctuation">,</span>
    grid
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span>

<span class="token punctuation">[</span>
    Button<span class="token punctuation">,</span>
    Overlay<span class="token punctuation">,</span>
    Tabbar<span class="token punctuation">,</span>
    TabbarItem<span class="token punctuation">,</span>
    Skeleton<span class="token punctuation">,</span>
    ShareSheet<span class="token punctuation">,</span>
    DropdownMenu<span class="token punctuation">,</span>
    DropdownItem<span class="token punctuation">,</span>
    Image<span class="token punctuation">,</span>
    Icon<span class="token punctuation">,</span>
    Form<span class="token punctuation">,</span>
    Field<span class="token punctuation">,</span>
    NavBar<span class="token punctuation">,</span>
    Swipe<span class="token punctuation">,</span>
    SwipeItem<span class="token punctuation">,</span>
    Grid<span class="token punctuation">,</span>
    GridItem<span class="token punctuation">,</span>
    GoodsAction<span class="token punctuation">,</span>
    GoodsActionIcon<span class="token punctuation">,</span>
    GoodsActionButton<span class="token punctuation">,</span>
    Checkbox<span class="token punctuation">,</span>
    Stepper<span class="token punctuation">,</span>
    SubmitBar<span class="token punctuation">,</span>
    AddressList<span class="token punctuation">,</span>
    AddressEdit<span class="token punctuation">,</span>
    Area<span class="token punctuation">,</span>
    Tab<span class="token punctuation">,</span>
    Tabs<span class="token punctuation">,</span>
    List<span class="token punctuation">,</span>
    Cell<span class="token punctuation">,</span>
    SwipeCell<span class="token punctuation">,</span>
    Card<span class="token punctuation">,</span>
    Dialog<span class="token punctuation">,</span>
    Toast<span class="token punctuation">,</span>
    ContactCard<span class="token punctuation">,</span>
    ActionSheet<span class="token punctuation">,</span>
    Loading<span class="token punctuation">,</span>
    divider<span class="token punctuation">,</span>
    Search<span class="token punctuation">,</span>
    Empty<span class="token punctuation">,</span>
    sidebar<span class="token punctuation">,</span>
    SidebarItem<span class="token punctuation">,</span>
    grid
<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br></div></div><p>在main.js中引入vant.js，如下：</p> <p><img src="/javablog/public/assets/img/1698373350875.06213cb1.png" alt="1698373350875"></p> <p>再次测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698373468649.701752ee.png" alt="1698373468649"></p> <p>昨天讲了移动端适配：</p> <ul><li>rem + 媒体查询来适配</li> <li>rem + 自己写的JS来适配</li> <li>rem + 淘宝的flexible来适配</li> <li>vw + vh适配</li></ul> <p>在脚本架中，要适配的话，上面的方式都可以不用，可以配置postcss，如下：</p> <p><img src="/javablog/public/assets/img/1698373126801.8d0eb089.png" alt="1698373126801"></p> <h3 id="_3-处理全局样式"><a href="#_3-处理全局样式" class="header-anchor">#</a> 3，处理全局样式</h3> <p>引入重置样式，如下：</p> <p><img src="/javablog/public/assets/img/1698373600550.c9647f72.png" alt="1698373600550"></p> <p>设置App.vue组件的样式，如下：</p> <p><img src="/javablog/public/assets/img/1698374325844.217e3d78.png" alt="1698374325844"></p> <p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698374339828.b93844da.png" alt="1698374339828"></p> <h2 id="三-封装tabbar组件"><a href="#三-封装tabbar组件" class="header-anchor">#</a> 三，封装TabBar组件</h2> <h3 id="_1-封装tabbar组件"><a href="#_1-封装tabbar组件" class="header-anchor">#</a> 1，封装TabBar组件</h3> <p>我们需要封装的Tabbar组件如下：</p> <p><img src="/javablog/public/assets/img/1698374983347.27d3ad3f.png" alt="1698374983347"></p> <p>要去写一个组件，先去UI组件库中找一下，有没有对应的组件，如下：</p> <p><img src="/javablog/public/assets/img/1698375533970.f214a56b.png" alt="1698375533970"></p> <p>把Tabbar再封装一下，封装的通用组件就放在components中，如下(首页的to的值应该是/home)：</p> <p><img src="/javablog/public/assets/img/1698375932510.8ba80ef6.png" alt="1698375932510"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">route</span> <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#1baeae<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-o<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/classify<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>apps-o<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分类<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/cart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shopping-cart-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">badge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/personal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager-o<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyTarbar&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>在App.vue中使用之，如下：</p> <p><img src="/javablog/public/assets/img/1698376041916.32e0e3e7.png" alt="1698376041916"></p> <p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698376056965.85a9ef2e.png" alt="1698376056965"></p> <p>调整一下TabBar最大宽度，如下：</p> <p><img src="/javablog/public/assets/img/1698377566898.7e13a6eb.png" alt="1698377566898"></p> <p>在main.js，引入flexble，引入vant的样式，如下：</p> <p><img src="/javablog/public/assets/img/1698377619383.ead4624a.png" alt="1698377619383"></p> <p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698377682583.45786b21.png" alt="1698377682583"></p> <h3 id="_2-控制tabbar的显示与隐藏"><a href="#_2-控制tabbar的显示与隐藏" class="header-anchor">#</a> 2，控制Tabbar的显示与隐藏</h3> <p>当访问login组件时，不需要显示Tabbar，如下：</p> <p><img src="/javablog/public/assets/img/1698377862118.074f0810.png" alt="1698377862118"></p> <p>肯定要控制Tabbar的显示与隐藏，代码如下：</p> <p><img src="/javablog/public/assets/img/1698378201259.d48447d5.png" alt="1698378201259"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698378215476.0ad21ff0.png" alt="1698378215476"></p> <h3 id="_3-防止tabar盖住页面内容"><a href="#_3-防止tabar盖住页面内容" class="header-anchor">#</a> 3，防止Tabar盖住页面内容</h3> <p>在首页面组件中写如下内容：</p> <p><img src="/javablog/public/assets/img/1698378435359.7f929a94.png" alt="1698378435359"></p> <p>给#app的那个div添加一个padding-bottom，还不能直接添加，Login组件中没有Tabbar，也就是说有Tabbar时，需要添加，没有Tabbar时，不需要添加，代码如下：</p> <p><img src="/javablog/public/assets/img/1698378580570.0a46bb36.png" alt="1698378580570"></p> <p>绑定自定义事件，如下：</p> <p><img src="/javablog/public/assets/img/1698378705704.d5555568.png" alt="1698378705704"></p> <p>书写bottom这个类名，如下：</p> <p><img src="/javablog/public/assets/img/1698378785683.ac48c1e9.png" alt="1698378785683"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698378827776.e9cd7020.png" alt="1698378827776"></p> <p>换成login组件，如下：</p> <p><img src="/javablog/public/assets/img/1698378881718.add0a6df.png" alt="1698378881718"></p> <h2 id="四-注册登录模块实现"><a href="#四-注册登录模块实现" class="header-anchor">#</a> 四，注册登录模块实现</h2> <h3 id="_1-绘制登录页面"><a href="#_1-绘制登录页面" class="header-anchor">#</a> 1，绘制登录页面</h3> <p>目标：</p> <p><img src="/javablog/public/assets/img/1698389591510.f941b8a5.png" alt="1698389591510"></p> <p>找到vant中的导航组件，如下：</p> <p><img src="/javablog/public/assets/img/1698389846795.d4aba2ff.png" alt="1698389846795"></p> <p>使用之，如下：</p> <p><img src="/javablog/public/assets/img/1698389876617.7b9c3462.png" alt="1698389876617"></p> <p>logo区域，如下:</p> <p><img src="/javablog/public/assets/img/1698390067430.a9ef8dab.png" alt="1698390067430"></p> <p>实现样式，如下：</p> <p><img src="/javablog/public/assets/img/1698390744846.ecc007f8.png" alt="1698390744846"></p> <p>实现表单区域，如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLogin ? '登录' : '注册'<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">left-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>返回<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">left-arrow</span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- Logo --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 表单 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-form</span> <span class="token attr-name">validate-first</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ruleForm.loginName<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginName<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入用户名<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>手机号<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
          { pattern: /^(?:(?:\+|00)86)?1\d{10}$/, message: '手机号格式有误' },
        ]<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ruleForm.password<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入密码<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ required: true, message: '密码是必填项' }]<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-field</span>
        <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ruleForm.captcha<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>captcha<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>验证码<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ validator: validatorCaptcha, message: '验证码输入有误' }]<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#button</span><span class="token punctuation">&gt;</span></span> 验证码（一会再说） <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-field</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ isLogin ? &quot;还没账号,请点此注册&quot; : &quot;已有账号,请点此登录&quot; }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 16px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">round</span> <span class="token attr-name">block</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#1baeae<span class="token punctuation">&quot;</span></span> <span class="token attr-name">native-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          确认提交
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">&quot;@/assets/images/newbee-mall-vue3-app-logo.png&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Login&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      logo<span class="token punctuation">,</span>
      <span class="token literal-property property">isLogin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">ruleForm</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loginName</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 用户名</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 密码</span>
        <span class="token literal-property property">captcha</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 验证码</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isLogin <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isLogin<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">validatorCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.login-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 20px<span class="token punctuation">;</span>
  <span class="token selector">.logo</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 140px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 140%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 40px auto 20px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.text</span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #1989fa<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698392157397.b481e07c.png" alt="1698392157397"></p> <p>如果就想修改vant组件的样式，可以这样做，如下：</p> <p><img src="/javablog/public/assets/img/1698393645850.b6da71aa.png" alt="1698393645850"></p> <h3 id="_2-封装navbar"><a href="#_2-封装navbar" class="header-anchor">#</a> 2，封装NavBar</h3> <p>在很多页面中都会使用到NavBar，封装一下，全局注册，封装如下：</p> <p><img src="/javablog/public/assets/img/1698394037901.59a60955.png" alt="1698394037901"></p> <p>全局注册之，如下：</p> <p><img src="/javablog/public/assets/img/1698394181069.5c9bb84a.png" alt="1698394181069"></p> <p>在Login.vue中使用之，如下：</p> <p><img src="/javablog/public/assets/img/1698394294543.4832b980.png" alt="1698394294543"></p> <p>处理一下MyNavBar的样式，直接上代码，MyNavBar.vue如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">fixed</span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">max-width</span><span class="token punctuation">:</span> 540px</span><span class="token punctuation">&quot;</span></span></span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleBack<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">safe-area-inset-top</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-x<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          {{ title }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ellipsis<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyNavBar&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 从哪来回哪去即可</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.text</span> <span class="token punctuation">{</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">:deep(.van-nav-bar__title)</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.van-nav-bar</span><span class="token punctuation">{</span>
  <span class="token selector">:deep(.van-icon)</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698394993353.63a06524.png" alt="1698394993353"></p> <p>添加padding-top，如下：</p> <p><img src="/javablog/public/assets/img/1698395042817.242c639e.png" alt="1698395042817"></p> <p>点击右边的三个点，实现分享面板的显示，直接上代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
      <span class="token attr-name">fixed</span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">max-width</span><span class="token punctuation">:</span> 540px</span><span class="token punctuation">&quot;</span></span></span>
      <span class="token attr-name">left-arrow</span>
      <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleBack<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">safe-area-inset-top</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-x<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          {{ title }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ellipsis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShare = true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 分享 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-share-sheet</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShare<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>options<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>立即分享给好友<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyNavBar&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isShare</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;微信&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;wechat&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;朋友圈&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;wechat-moments&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;微博&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;weibo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;QQ&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;qq&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;复制链接&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;link&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;分享海报&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;poster&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;二维码&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;qrcode&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;小程序码&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;weapp-qrcode&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 从哪来回哪去即可</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.text</span> <span class="token punctuation">{</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">:deep(.van-nav-bar__title)</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.van-nav-bar</span> <span class="token punctuation">{</span>
  <span class="token selector">:deep(.van-icon)</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698395409232.394c938f.png" alt="1698395409232"></p> <p>现在，在main.js中写了很多代码，把全局相关的代码放到一个单独的JS文件中，如下：</p> <p><img src="/javablog/public/assets/img/1698395759827.282a3a93.png" alt="1698395759827"></p> <h3 id="_3-验证码"><a href="#_3-验证码" class="header-anchor">#</a> 3，验证码</h3> <p>验证可以在后端实现，也可以在前端实现，这里我们就在前端实现，前端要实现验证码，方法也有很多，介绍一个：</p> <p><img src="/javablog/public/assets/img/1698627918035.d8df8515.png" alt="1698627918035"></p> <p><img src="/javablog/public/assets/img/1698627965005.789741e2.png" alt="1698627965005"></p> <p>本次课，提前在网上找到一个验证码组件，是使用canvas绘制的，如下：</p> <p><img src="/javablog/public/assets/img/1698628078291.458cfa09.png" alt="1698628078291"></p> <p>参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>captcha-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>captchaBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span>
      <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>height<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvasBox<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createCaptcha<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token function-variable function">createRandom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">createRandomCaptcha</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num <span class="token operator">=</span> <span class="token number">4</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> chars <span class="token operator">=</span>
    <span class="token string">&quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> captcha <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> random <span class="token operator">=</span> <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      char <span class="token operator">=</span> chars<span class="token punctuation">[</span>random<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>captcha<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
    captcha <span class="token operator">+=</span> char<span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> captcha<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">createRandomColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token function">createRandom</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">,</span>
    g <span class="token operator">=</span> <span class="token function">createRandom</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token function">createRandom</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>r<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>g<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;CaptchaImg&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">createCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 创建画布&amp;随机验证码</span>
      <span class="token keyword">let</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>canvasBox<span class="token punctuation">,</span>
        ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        captcha <span class="token operator">=</span> <span class="token function">createRandomCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 填充画布颜色&amp;位置</span>
      ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token function">createRandomColor</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">230</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 验证码随机旋转</span>
      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>captcha<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 随机的字体大小&amp;旋转角度</span>
        <span class="token keyword">const</span> fontSize <span class="token operator">=</span> <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          deg <span class="token operator">=</span> <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          x <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">120</span> <span class="token operator">/</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          y <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">40</span> <span class="token operator">/</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">bold </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fontSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px sans-serif</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token function">createRandomColor</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> index <span class="token operator">+</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>deg <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token operator">-</span>x <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 随机产生5条干扰线,干扰线的颜色要浅一点</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>
          <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>
          <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token function">createRandomColor</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">230</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 随机产生40个干扰的小点</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">40</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>
          <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token function">createRandomColor</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 最后修改父组件的状态值</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$listeners<span class="token punctuation">.</span>input<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> captcha<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 动态计算canvas的大小</span>
      <span class="token keyword">let</span> captchaBox <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>captchaBox<span class="token punctuation">,</span>
        sty <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>captchaBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>sty<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>sty<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 开始绘图</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>reset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reset<span class="token punctuation">)</span> window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>reset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.captcha-box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>

  <span class="token selector">canvas</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br></div></div><p>在Login.vue中引入验证码组件，如下：</p> <p><img src="/javablog/public/assets/img/1698628384047.ef483d20.png" alt="1698628384047"></p> <p>对于验证码的校验，定义了一个自定义校验函数，如下：</p> <p><img src="/javablog/public/assets/img/1698628475678.e1d48ec8.png" alt="1698628475678"></p> <p>实现校验函数，如下：</p> <p><img src="/javablog/public/assets/img/1698628808308.c3a726e0.png" alt="1698628808308"></p> <p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698628833438.c6aca5c2.png" alt="1698628833438"></p> <h3 id="_4-axios二次封装"><a href="#_4-axios二次封装" class="header-anchor">#</a> 4，axios二次封装</h3> <p>在真实项目中，都会对axios进行二次封装，一般在项目根目录下创建一个api文件，里面http.js文件，此文件就是对axios进行二次封装，如下：</p> <p><img src="/javablog/public/assets/img/1698630219198.ef9570ec.png" alt="1698630219198"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'@/assets/utils'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    Notify
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> http <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 没有写协议，域名，端口，默认是向本服务器发请求</span>
    <span class="token comment">// 本服务器：http://127.0.0.1:8080/</span>
    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">&quot;/api&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 超时处理，如果超时了，会自动的取消请求</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">60000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 请求拦截器  ngprogress</span>
<span class="token comment">// /home  /classify   /login</span>
<span class="token comment">// /cart</span>
<span class="token keyword">const</span> safeArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/classify&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// 有的接口，需要带token去访问，token是用来身份认证的，登录了，服务器就返回一个token</span>
    <span class="token comment">// 我们把token存储到localstorage中，后面要用token，直接从localStorage中获取</span>
    <span class="token comment">// 有些接口，你需要带个token去访问，如果不带，身份认证失败，接口调用不成功</span>
    <span class="token comment">// token一般情况下，是放在请求头中</span>

    <span class="token comment">// 有些接口，不需要登录就以访问，有些接口，必须登录后，有了token才能访问</span>

    <span class="token keyword">let</span> <span class="token constant">TK</span> <span class="token operator">=</span> _<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'TK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果拿不到token，得到null</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">TK</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>safeArr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">TK</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 响应拦截器</span>
http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'danger'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'网络繁忙，稍后再试~'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> http<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>写项目：promise + ajax + vue基础 + vuex + vue-router</p> <h3 id="_5-api封装"><a href="#_5-api封装" class="header-anchor">#</a> 5，API封装</h3> <p>一个项目，可能有几十个，上百个，或几百个接口，如果项目，把接口地址直接写在组件中，就乱，如果后端改了接口地址，你还需要从组件中找哪个地方，调用了接口，不方便。通常我们会把接口地址统一放在一个地方进行管理，如下：</p> <p><img src="/javablog/public/assets/img/1698630710562.5cdf30fd.png" alt="1698630710562"></p> <p>然后，我们可以在组件中调用上面的方法，当然也可以在vuex中调用，先在组件中调用之，如下：</p> <p><img src="/javablog/public/assets/img/1698632108545.ccb3b3f7.png" alt="1698632108545"></p> <p>把API对象，放到Vue原型上，如下：</p> <p><img src="/javablog/public/assets/img/1698632300127.b466cbcd.png" alt="1698632300127"></p> <p>再次测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698632395721.ecaca53f.png" alt="1698632395721"></p> <h3 id="_6-代理解决跨域"><a href="#_6-代理解决跨域" class="header-anchor">#</a> 6，代理解决跨域</h3> <p>上面调接口，确实成功了，但是前后端是不同域的，如下：</p> <p><img src="/javablog/public/assets/img/1698632790314.b3c153d1.png" alt="1698632790314"></p> <p>看一下我们刚才请求的url，如下：</p> <p><img src="/javablog/public/assets/img/1698632868580.40d93411.png" alt="1698632868580"></p> <p>如果出现跨域问题了，浏览器会提示如下：</p> <p><img src="/javablog/public/assets/img/1698632974934.b05b3a1a.png" alt="1698632974934"></p> <p>虽然本项目中后端配置了解决跨域问题，我们依然配置一个代理，主要是演示一下代理如何使用，如下：</p> <p><img src="/javablog/public/assets/img/1698633254181.d4ffa460.png" alt="1698633254181"></p> <p>动了配置文件，需要重启服务，如下：</p> <p><img src="/javablog/public/assets/img/1698633285985.1aa3a4a8.png" alt="1698633285985"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698633486557.8d515ee9.png" alt="1698633486557"></p> <p>打开代理，重启服务器，如下：</p> <p><img src="/javablog/public/assets/img/1698633863943.1c8693d0.png" alt="1698633863943"></p> <p><img src="/javablog/public/assets/img/1698633882554.4f62e4ec.png" alt="1698633882554"></p> <p>再次测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698633933520.7d53a45b.png" alt="1698633933520"></p> <p>再去封装两个接口，一个是登录接口，一个是注册接口，先分析登录接口，如下：</p> <p><img src="/javablog/public/assets/img/1698634137840.a7ec2f9d.png" alt="1698634137840"></p> <p><img src="/javablog/public/assets/img/1698634173382.c332e00d.png" alt="1698634173382"></p> <p><img src="/javablog/public/assets/img/1698634195313.e32ae5e1.png" alt="1698634195313"></p> <p><img src="/javablog/public/assets/img/1698634227631.19ad8887.png" alt="1698634227631"></p> <p>代码实现如下：</p> <p><img src="/javablog/public/assets/img/1698634538950.e3b9b816.png" alt="1698634538950"></p> <h3 id="_7-登录和注册实现"><a href="#_7-登录和注册实现" class="header-anchor">#</a> 7，登录和注册实现</h3> <p>点击注册和登录时，需要清空表单，如下：</p> <p><img src="/javablog/public/assets/img/1698635909507.400a0f83.png" alt="1698635909507"></p> <p>然后，实现登录和注册，如下：</p> <p><img src="/javablog/public/assets/img/1698636514385.4596c38e.png" alt="1698636514385"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698636554582.f668b1e5.png" alt="1698636554582"></p> <h3 id="_8-获取用户信息并存储到vuex中"><a href="#_8-获取用户信息并存储到vuex中" class="header-anchor">#</a> 8，获取用户信息并存储到Vuex中</h3> <p>登录成功后，先调用一个获取用户信息的接口，如下：</p> <p><img src="/javablog/public/assets/img/1698649511327.cfc711ab.png" alt="1698649511327"></p> <p><img src="/javablog/public/assets/img/1698649576694.841ba117.png" alt="1698649576694"></p> <p>把token放在请求头中，传给服务器，如下：</p> <p><img src="/javablog/public/assets/img/1698649661328.5a717d9c.png" alt="1698649661328"></p> <p>封装一个API接口，如下：</p> <p><img src="/javablog/public/assets/img/1698649738790.410f0a29.png" alt="1698649738790"></p> <p>如果登录成功了，判断出在哪里登录成功了，就可以在这里发ajax请求，获取用户信息。后面有很多组件，都会使用到用户信息，直接把用户信息存储到vuex中，创建仓库，如下：</p> <p><img src="/javablog/public/assets/img/1698650401509.3ece2c59.png" alt="1698650401509"></p> <p>在main.js中把store挂载到根上，如下：</p> <p><img src="/javablog/public/assets/img/1698650430486.f6ac689e.png" alt="1698650430486"></p> <p>在登录成功后，要派发上面的action，如下：</p> <p><img src="/javablog/public/assets/img/1698650616973.3119775b.png" alt="1698650616973"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698650672867.4cd4f389.png" alt="1698650672867"></p> <p><img src="/javablog/public/assets/img/1698650709825.8093b111.png" alt="1698650709825"></p> <p>然后，需要commit一个mutation，把用户信息存储到vuex中，如下：</p> <p><img src="/javablog/public/assets/img/1698650942774.634c02ec.png" alt="1698650942774"></p> <p>浏览器再次测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698650990533.15e82193.png" alt="1698650990533"></p> <p>vuex，还有一个插件，通过这个插件，可以在console面板中查看仓库中的状态变化，使用插件，如下：</p> <p><img src="/javablog/public/assets/img/1698653249203.a21bbe73.png" alt="1698653249203"></p> <p>为了测试方法，直接把用户名和密码写死在代码中，测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698653405885.aa43a0f7.png" alt="1698653405885"></p> <p>vuex中的数据是存储在内存中的：</p> <p><img src="/javablog/public/assets/img/1698653536093.18a3a964.png" alt="1698653536093"></p> <h2 id="五-首页面渲染"><a href="#五-首页面渲染" class="header-anchor">#</a> 五，首页面渲染</h2> <h3 id="_1-首页面的头部渲染"><a href="#_1-首页面的头部渲染" class="header-anchor">#</a> 1，首页面的头部渲染</h3> <p>需求 ：</p> <p><img src="/javablog/public/assets/img/1698653788335.fd084cbe.png" alt="1698653788335"></p> <p>组件结构实现如下：</p> <p><img src="/javablog/public/assets/img/1698654254299.bc620f34.png" alt="1698654254299"></p> <p>实现组件的样式如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 头部导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push('/category')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wap-nav<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push('/search')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>新蜂商城<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>山河无恙，人间皆安<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!$store.state.profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/personal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manager<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Home&quot;</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">queryIndexInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;成功啦...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.nav-box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>

  <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>

  <span class="token selector">.menu</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #1baeae<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 256px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token selector">.title</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #1baeae<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
      <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.text</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.login</span> <span class="token punctuation">{</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #1baeae<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
      <span class="token selector">i</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token selector">&amp;.active</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #1baeae<span class="token punctuation">;</span>
    <span class="token selector">.menu,
    .login a</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.content</span> <span class="token punctuation">{</span>
      <span class="token selector">.title</span> <span class="token punctuation">{</span>
        <span class="token property">border-right-color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br></div></div><h3 id="_2-实例轮播图"><a href="#_2-实例轮播图" class="header-anchor">#</a> 2，实例轮播图</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1698655236807.be2bde77.png" alt="1698655236807"></p> <p>找到vant中的轮播图，如下：</p> <p><img src="/javablog/public/assets/img/1698655346219.90371d97.png" alt="1698655346219"></p> <p>定义轮播图状态，发请求，获取数据，给请求赋值，这里的请求，我们就不放在vuex中的action中，直接在组件中发请求，如下：</p> <p><img src="/javablog/public/assets/img/1698655522476.2baae1cb.png" alt="1698655522476"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698655568958.cdbf3b78.png" alt="1698655568958"></p> <p>渲染数据，如下：</p> <p><img src="/javablog/public/assets/img/1698655725652.2bdfe229.png" alt="1698655725652"></p> <h3 id="_3-渲染宫格"><a href="#_3-渲染宫格" class="header-anchor">#</a> 3，渲染宫格</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1698655777268.05c5160d.png" alt="1698655777268"></p> <p>数据直接写死，没有对应的接口，如下：</p> <p><img src="/javablog/public/assets/img/1698655840547.ce90a8d0.png" alt="1698655840547"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;新蜂超市&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/supermarket.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;新蜂服饰&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/dress.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;全球购&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/purchasing.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;新蜂生鲜&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/fresh.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;新蜂到家&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/complete.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;充值缴费&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/pay.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;9.9元拼&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/together.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;领劵&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/collect_coupons.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;省钱&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/save_money.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;全部&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/images/whole.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>定义状态，如下：</p> <p><img src="/javablog/public/assets/img/1698655898576.efef17e7.png" alt="1698655898576"></p> <p>渲染之，如下：</p> <p><img src="/javablog/public/assets/img/1698655969183.85ea6a37.png" alt="1698655969183"></p> <h3 id="_4-商品列表"><a href="#_4-商品列表" class="header-anchor">#</a> 4，商品列表</h3> <p>商品列表如下：</p> <p><img src="/javablog/public/assets/img/1698656042825.00e44533.png" alt="1698656042825"></p> <p>创建一个组件，叫HomeGoodList.vue，如下：</p> <p><img src="/javablog/public/assets/img/1698714515891.20634f12.png" alt="1698714515891"></p> <p>在首页面中，引入，注册，使用之如下：</p> <p><img src="/javablog/public/assets/img/1698714766480.816b5956.png" alt="1698714766480"></p> <p><img src="/javablog/public/assets/img/1698714783174.0ad25f91.png" alt="1698714783174"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698714815278.1ee0b96b.png" alt="1698714815278"></p> <p>看vue调试工具，如下：</p> <p><img src="/javablog/public/assets/img/1698714894153.38227269.png" alt="1698714894153"></p> <p>把商品数据遍历出来，如下：</p> <p><img src="/javablog/public/assets/img/1698715442627.bb76e4eb.png" alt="1698715442627"></p> <p>样式如下：</p> <p><img src="/javablog/public/assets/img/1698715497848.73efffc4.png" alt="1698715497848"></p> <p>参考代码：</p> <div class="language-less line-numbers-mode"><pre class="language-less"><code><span class="token selector">&lt;style lang=&quot;less&quot; scoped&gt;
.good-box</span> <span class="token punctuation">{</span>
  <span class="token selector">&amp; &gt; .title</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@theme</span><span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #f9f9f9<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">:deep(.van-grid-item__content)</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.desc</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>

    <span class="token selector">.title,
    .price</span> <span class="token punctuation">{</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token comment">// 超出两行文字后，实现自动截取</span>
      <span class="token property">display</span><span class="token punctuation">:</span> <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token punctuation">;</span>
      <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
      <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.title</span> <span class="token punctuation">{</span>
      <span class="token property">max-height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.price</span> <span class="token punctuation">{</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@theme</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
&lt;<span class="token operator">/</span>style&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>现在有个问题，有的图片没有显示，如下：</p> <p><img src="/javablog/public/assets/img/1698715558505.672629d1.png" alt="1698715558505"></p> <p>大概率就是路径问题，分析一下：</p> <p><img src="/javablog/public/assets/img/1698715719542.0f25ce8e.png" alt="1698715719542"></p> <p>前端拼接好路径，使用混入解决，给所有的组件中都混入一个方法，如下：</p> <p><img src="/javablog/public/assets/img/1698716034253.9214bff0.png" alt="1698716034253"></p> <p>在使用到图片的位置，都可以使用上面的方法了，如下：</p> <p><img src="/javablog/public/assets/img/1698716083585.6d63edda.png" alt="1698716083585"></p> <p>再次测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698716110088.5c970b2d.png" alt="1698716110088"></p> <p>再去优化一下，当数据还没有回来，显示骨架屏，如下：</p> <p><img src="/javablog/public/assets/img/1698716458034.e1e70932.png" alt="1698716458034"></p> <p>在global.js中配置赖加载，如下：</p> <p><img src="/javablog/public/assets/img/1698716673799.d230081d.png" alt="1698716673799"></p> <p>使用之，如下：</p> <p><img src="/javablog/public/assets/img/1698716769005.3104d22d.png" alt="1698716769005"></p> <h3 id="_5-头部样式处理"><a href="#_5-头部样式处理" class="header-anchor">#</a> 5，头部样式处理</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1698735669800.38c81925.png" alt="1698735669800"></p> <p>类名如下：</p> <p><img src="/javablog/public/assets/img/1698735708036.242bfe49.png" alt="1698735708036"></p> <p>在里面绑定scroll事件呢？答：在mounted中绑定，在destoryed中绑定。如下：</p> <p><img src="/javablog/public/assets/img/1698735938708.d9e2df14.png" alt="1698735938708"></p> <p>在nav中使用状态，如下：</p> <p><img src="/javablog/public/assets/img/1698735990128.791b7900.png" alt="1698735990128"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698736127872.37c4aac2.png" alt="1698736127872"></p> <p>使用节流函数，如下：</p> <p><img src="/javablog/public/assets/img/1698736333949.5f6b75ef.png" alt="1698736333949"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698736373328.447cba86.png" alt="1698736373328"></p> <h2 id="六-渲染分类页"><a href="#六-渲染分类页" class="header-anchor">#</a> 六，渲染分类页</h2> <h3 id="_1-分析分类页面的接口"><a href="#_1-分析分类页面的接口" class="header-anchor">#</a> 1，分析分类页面的接口</h3> <p>第一次点击分类时，需要调用接口，后面再去点击，不需要调用接口，因为我们需要把分类页面缓存起来。第一次调用接口，如下：</p> <p><img src="/javablog/public/assets/img/1698717329406.607230e4.png" alt="1698717329406"></p> <p>再去分析响应的数据，如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;categoryId&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token property">&quot;categoryLevel&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;categoryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;家电 数码 手机&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;secondLevelCategoryVOS&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;categoryId&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
            <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
            <span class="token property">&quot;categoryLevel&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;categoryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;家电&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;thirdLevelCategoryVOS&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;categoryId&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;categoryLevel&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;categoryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;生活电器&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;categoryId&quot;</span><span class="token operator">:</span> <span class="token number">110</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;categoryLevel&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;categoryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wer&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>封装API接口，如下：</p> <p><img src="/javablog/public/assets/img/1698717692408.2a2e4546.png" alt="1698717692408"></p> <h3 id="_2-把分类数据存储到vuex"><a href="#_2-把分类数据存储到vuex" class="header-anchor">#</a> 2，把分类数据存储到vuex</h3> <p>在vuex中的action中调用接口，获取到数据后，把数据存储到vuex中，并把vuex分模块，如下：</p> <p><img src="/javablog/public/assets/img/1698718868731.dee75b0c.png" alt="1698718868731"></p> <p>在store/index.js，使用modules中合并子store，如下：</p> <p><img src="/javablog/public/assets/img/1698718946630.b18f122e.png" alt="1698718946630"></p> <p>在组件中，派发仓库中的action，如下：</p> <p><img src="/javablog/public/assets/img/1698719496992.1eb6bb0c.png" alt="1698719496992"></p> <p>测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698719567841.ffa97193.png" alt="1698719567841"></p> <p>上面的是在控制台中查看，你在vuex中也可以可看，如下：</p> <p><img src="/javablog/public/assets/img/1698719622111.97faa8e8.png" alt="1698719622111"></p> <p>现在就相当于把分类的数据存储到了Vuex中。然后，就需要渲染数据。</p> <h3 id="_3-渲染分类数据"><a href="#_3-渲染分类数据" class="header-anchor">#</a> 3，渲染分类数据</h3> <p>现在有数据了，数据在vuex中，开始绘制页面，先绘制头部，如下：</p> <p><img src="/javablog/public/assets/img/1698719947494.02e68732.png" alt="1698719947494"></p> <p>直接给插槽中插入内容：</p> <p><img src="/javablog/public/assets/img/1698720022547.6d09dceb.png" alt="1698720022547"></p> <p>现在就需要完善一下，my-nav-bar组件，如下：</p> <p><img src="/javablog/public/assets/img/1698720161288.65500ef6.png" alt="1698720161288"></p> <p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698720220317.57cdb4a8.png" alt="1698720220317"></p> <p>写一点样式，把直角变成圆角，如下：</p> <p><img src="/javablog/public/assets/img/1698720356335.559bedef.png" alt="1698720356335"></p> <p>开始绘制内容区域(Classify.vue)：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classify-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 头部导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-search</span>
          <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>搜索需要的产品<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push('/search')<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 内容区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-skeleton</span> <span class="token attr-name">title</span> <span class="token attr-name">:row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>categories.length === 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-sidebar</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeKey<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-sidebar-item</span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in categories<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.categoryId<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.categoryName<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-sidebar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Classify&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...mapState([&quot;list&quot;])</span>

    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// categories可以是</span>
      <span class="token function-variable function">categories</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>category<span class="token punctuation">.</span>list <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">activeKey</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;category/setListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>categories<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>categories<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;category/setListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-search</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token selector">.van-search__content</span> <span class="token punctuation">{</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 19px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.van-skeleton</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 66px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.classify-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.main-box</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token selector">.van-sidebar</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f7f8fa<span class="token punctuation">;</span>
    <span class="token selector">.van-sidebar-item</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 15px 10px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.van-sidebar-item--select:before</span> <span class="token punctuation">{</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@theme</span><span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698721224151.82705d71.png" alt="1698721224151"></p> <p>还需要把右侧的数据渲染出来，如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classify-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 头部导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-search</span>
          <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>搜索需要的产品<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push('/search')<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 内容区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-skeleton</span> <span class="token attr-name">title</span> <span class="token attr-name">:row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>categories.length === 0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 左边 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-sidebar</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeKey<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-sidebar-item</span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in categories<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.categoryId<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.categoryName<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-sidebar</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 右边 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classify<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in contentArr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.categoryId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.categoryName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span>
              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cur in item.thirdLevelCategoryVOS<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cur.categoryId<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classify<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazy-load</span> <span class="token punctuation">/&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ cur.categoryName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> classify <span class="token keyword">from</span> <span class="token string">&quot;@/assets/images/classify.png&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Classify&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...mapState([&quot;list&quot;])</span>

    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// categories可以是</span>
      <span class="token function-variable function">categories</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>category<span class="token punctuation">.</span>list <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token function">contentArr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> activeKey<span class="token punctuation">,</span> categories <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> item <span class="token operator">=</span> categories<span class="token punctuation">[</span>activeKey<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> item<span class="token punctuation">.</span>secondLevelCategoryVOS <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      classify<span class="token punctuation">,</span>
      <span class="token literal-property property">activeKey</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;category/setListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>categories<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>categories<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;category/setListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-search</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token selector">.van-search__content</span> <span class="token punctuation">{</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 19px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.van-skeleton</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 66px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.classify-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.main-box</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>

  <span class="token selector">.van-sidebar</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f7f8fa<span class="token punctuation">;</span>
    <span class="token selector">.van-sidebar-item</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 15px 10px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.van-sidebar-item--select:before</span> <span class="token punctuation">{</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@theme</span><span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 255px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>

    <span class="token selector">.classify</span> <span class="token punctuation">{</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>

      <span class="token selector">.title</span> <span class="token punctuation">{</span>
        <span class="token property">padding-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.list</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>

        <span class="token selector">a</span> <span class="token punctuation">{</span>
          <span class="token property">margin-right</span><span class="token punctuation">:</span> 2%<span class="token punctuation">;</span>
          <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 32%<span class="token punctuation">;</span>

          <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token selector">span</span> <span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token selector">&amp;:nth-child(3n)</span> <span class="token punctuation">{</span>
            <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br></div></div><p>浏览器效果如下 ：</p> <p><img src="/javablog/public/assets/img/1698721990082.b21b11e8.png" alt="1698721990082"></p> <h2 id="七-搜索页面实现"><a href="#七-搜索页面实现" class="header-anchor">#</a> 七，搜索页面实现</h2> <h3 id="_1-创建搜索页面并配置路由"><a href="#_1-创建搜索页面并配置路由" class="header-anchor">#</a> 1，创建搜索页面并配置路由</h3> <p>点击首页面的搜索按钮和 点击分类页面中的搜索按钮，会去到/search路由，如下：</p> <p><img src="/javablog/public/assets/img/1698736572427.01597520.png" alt="1698736572427"></p> <p>从首页面中进入搜索，效果如下：</p> <p><img src="/javablog/public/assets/img/1698800975823.74559643.png" alt="1698800975823"></p> <p>从分类页面有两个地方可以跳到搜索，如下：</p> <p><img src="/javablog/public/assets/img/1698801047872.f49e1353.png" alt="1698801047872"></p> <p>但是还有一些按钮，点击也能跳到搜索，如下：</p> <p><img src="/javablog/public/assets/img/1698801155614.5c56cd46.png" alt="1698801155614"></p> <p>创建搜索页面组件，如下：</p> <p><img src="/javablog/public/assets/img/1698736662163.b9a874ae.png" alt="1698736662163"></p> <p>配置路由，如下：</p> <p><img src="/javablog/public/assets/img/1698736728093.7acfd191.png" alt="1698736728093"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698736743051.1fd5e3d5.png" alt="1698736743051"></p> <h3 id="_2-绘制search页面"><a href="#_2-绘制search页面" class="header-anchor">#</a> 2，绘制Search页面</h3> <p>看一下官网实现的Search页面，如下：</p> <p><img src="data:image/png;base64,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te3Xrt2x9wiHztsXM1Cs7B5ta5zEjBuS4s3kVVqX6W1MAMKYiAMAMK1ky0QcfBwhAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAGEMAAABhAAAMAYAABDACAAQQwAAAG/D/c7+PBhRUH/gAAAABJRU5ErkJggg==" alt="1698736835283"></p> <p>我们要实现的效果如下：</p> <p><img src="/javablog/public/assets/img/1698736808881.e4abb6b1.png" alt="1698736808881"></p> <p>先绘制头部，如下：</p> <p><img src="data:image/png;base64,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" alt="1698737025365"></p> <p>先完善一下MyNavBar组件，如下：</p> <p><img src="/javablog/public/assets/img/1698737253062.86a8ad93.png" alt="1698737253062"></p> <p>代码如下 ：</p> <p><img src="/javablog/public/assets/img/1698737283785.e62b18ab.png" alt="1698737283785"></p> <p>添加样式，如下：</p> <p><img src="/javablog/public/assets/img/1698737447271.804ab600.png" alt="1698737447271"></p> <p>绘制操作栏，如下：</p> <p><img src="/javablog/public/assets/img/1698737490516.ec87762a.png" alt="1698737490516"></p> <p>也是vant中现在的组件，如下：</p> <p><img src="/javablog/public/assets/img/1698738253431.05547b8c.png" alt="1698738253431"></p> <p>代码如下：</p> <p><img src="/javablog/public/assets/img/1698738279265.87cb0765.png" alt="1698738279265"></p> <p><img src="/javablog/public/assets/img/1698801420563.187c4398.png" alt="1698801420563"></p> <p>内容区域：</p> <p><img src="/javablog/public/assets/img/1698738641377.387a9da9.png" alt="1698738641377"></p> <h3 id="_3-过滤出三级分类数据"><a href="#_3-过滤出三级分类数据" class="header-anchor">#</a> 3，过滤出三级分类数据</h3> <p>所有的分类数据如下：</p> <p><img src="/javablog/public/assets/img/1698801786993.697ddca1.png" alt="1698801786993"></p> <p>我们要写一个算法，获取所有的三级分类，如下：</p> <p><img src="/javablog/public/assets/img/1698802480965.9d0cf4bd.png" alt="1698802480965"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">categoryOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>category<span class="token punctuation">.</span>list <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;全部商品&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 写一个算法，计算出所有的三级分类，push到options</span>
    <span class="token comment">// 基于递归获取第三级别的分类信息</span>
    <span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span>
                categoryLevel<span class="token punctuation">,</span>
                secondLevelCategoryVOS<span class="token punctuation">,</span>
                thirdLevelCategoryVOS<span class="token punctuation">,</span>
                categoryId<span class="token punctuation">,</span>
                categoryName<span class="token punctuation">,</span>
            <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>categoryLevel <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">next</span><span class="token punctuation">(</span>secondLevelCategoryVOS<span class="token punctuation">)</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>categoryLevel <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">next</span><span class="token punctuation">(</span>thirdLevelCategoryVOS<span class="token punctuation">)</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>categoryLevel <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                options<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span> categoryName<span class="token punctuation">,</span>
                    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> options<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1698802561625.08a48cf8.png" alt="1698802561625"></p> <h3 id="_4-点击三级分类-传递分类id过去"><a href="#_4-点击三级分类-传递分类id过去" class="header-anchor">#</a> 4，点击三级分类，传递分类ID过去</h3> <p>分析如下：</p> <p><img src="/javablog/public/assets/img/1698802749153.100e848e.png" alt="1698802749153"></p> <p>之前我们的三级分类都是a标签，写to属性，如下：</p> <p><img src="/javablog/public/assets/img/1698802861995.8df35108.png" alt="1698802861995"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698802911165.0632521f.png" alt="1698802911165"></p> <p>在搜索页面，就可以获取传递过来的三级分类ID，如下：</p> <p><img src="/javablog/public/assets/img/1698803198674.3dc69ef9.png" alt="1698803198674"></p> <p>给goodsCategoryId赋值，如下：</p> <p><img src="/javablog/public/assets/img/1698803405787.bbfb7c52.png" alt="1698803405787"></p> <p>经过测试有问题，解决如下：</p> <p><img src="/javablog/public/assets/img/1698803636319.5d35874f.png" alt="1698803636319"></p> <p><img src="/javablog/public/assets/img/1698803677143.10d162e5.png" alt="1698803677143"></p> <h3 id="_5-分析搜索接口"><a href="#_5-分析搜索接口" class="header-anchor">#</a> 5，分析搜索接口</h3> <p>在分类页面中，点击了三级分类，跳到了搜索页面，它会调用接口，如下：</p> <p><img src="/javablog/public/assets/img/1698805014763.0ba0185b.png" alt="1698805014763"></p> <p><img src="/javablog/public/assets/img/1698805145942.d1adec75.png" alt="1698805145942"></p> <p><img src="/javablog/public/assets/img/1698805345074.8e170d45.png" alt="1698805345074"></p> <p>封装API，如下：</p> <p><img src="/javablog/public/assets/img/1698806195800.790aad9f.png" alt="1698806195800"></p> <p>有如下的情况，需要调用上面的接口，如下：</p> <p><img src="/javablog/public/assets/img/1698805697140.27fc116e.png" alt="1698805697140"></p> <p><img src="/javablog/public/assets/img/1698805736181.3b8ada57.png" alt="1698805736181"></p> <p><img src="/javablog/public/assets/img/1698805767280.7291f2d7.png" alt="1698805767280"></p> <p><img src="/javablog/public/assets/img/1698805833010.8693025c.png" alt="1698805833010"></p> <p>很明显，我们需要调用搜索接口，封装成一个方法，哪里需要，哪里调用方法。</p> <h3 id="_6-点击三级分类到搜索页面-调用搜索接口"><a href="#_6-点击三级分类到搜索页面-调用搜索接口" class="header-anchor">#</a> 6，点击三级分类到搜索页面，调用搜索接口</h3> <p>分析：</p> <p><img src="/javablog/public/assets/img/1698805891437.aa5d118d.png" alt="1698805891437"></p> <p>先定义一些状态：</p> <p><img src="/javablog/public/assets/img/1698806076705.6d6b4646.png" alt="1698806076705"></p> <p>在搜索页面，你去刷新一个，发现vuex中的分类数据没有了，如下：</p> <p><img src="/javablog/public/assets/img/1698806294870.5ea7b959.png" alt="1698806294870"></p> <p>到达搜索页面时，当刷新时，还需要调用接口，获取分类数据，如下：</p> <p><img src="/javablog/public/assets/img/1698806384036.712de369.png" alt="1698806384036"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698806421877.630e82f7.png" alt="1698806421877"></p> <p>在created中，不只要获取分类数据，还需要获取分类下面的商品，说白了，就是需要调用搜索接口，如下：</p> <p><img src="/javablog/public/assets/img/1698806713240.a36c360e.png" alt="1698806713240"></p> <p><img src="/javablog/public/assets/img/1698806672744.fa8e7e9f.png" alt="1698806672744"></p> <h3 id="_7-实现init方法"><a href="#_7-实现init方法" class="header-anchor">#</a> 7，实现init方法</h3> <p>实现init方法，说白了，就是在init方法中，调用搜索接口，如下 ：</p> <p><img src="/javablog/public/assets/img/1698807032841.07b62ef2.png" alt="1698807032841"></p> <p>浏览器测试结果如下：</p> <p><img src="/javablog/public/assets/img/1698807116158.d32b85a0.png" alt="1698807116158"></p> <p>得到结果后，需要给searchList状态赋值，如下：</p> <p><img src="/javablog/public/assets/img/1698807248964.f3a4c3e6.png" alt="1698807248964"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698807308524.a46e105b.png" alt="1698807308524"></p> <p>有数据了，需要把数据渲染出来，先不着急渲染，先学习Vant中的一个组件，学完后，再去渲染。</p> <h3 id="_8-封装goodsitem组件"><a href="#_8-封装goodsitem组件" class="header-anchor">#</a> 8，封装GoodsItem组件</h3> <p>组件如下 ：</p> <p><img src="/javablog/public/assets/img/1698809612385.479cb4f9.png" alt="1698809612385"></p> <p>封装如下：</p> <p><img src="/javablog/public/assets/img/1698809679296.06e37c76.png" alt="1698809679296"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ 'goods-item-box': true, 'goods-cart': cart }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/detail/${info.goodsId}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix(info.goodsCoverImg)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazy-load</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.goodsName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.goodsIntro }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>￥ {{ info.sellingPrice }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-desc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ info.goodsName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>￥ {{ info.sellingPrice }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-stepper</span>
            <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info.goodsCount<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@plus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handle('plus')<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@minus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handle('minus')<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;GoodsItem&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">cart</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>info<span class="token punctuation">.</span>goodsCount<span class="token punctuation">;</span>
      type <span class="token operator">===</span> <span class="token string">&quot;plus&quot;</span> <span class="token operator">?</span> count<span class="token operator">++</span> <span class="token operator">:</span> count<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;cart/updateListAsync&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cartItemId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>info<span class="token punctuation">.</span>cartItemId<span class="token punctuation">,</span>
        <span class="token literal-property property">goodsCount</span><span class="token operator">:</span> count<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.clip</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
  <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
  <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.goods-item-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #eee<span class="token punctuation">;</span>

  <span class="token selector">a</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>

    <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
      <span class="token property">flex</span><span class="token punctuation">:</span> 0 0 auto<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.desc</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
      <span class="token property">flex</span><span class="token punctuation">:</span> 1 0<span class="token punctuation">;</span>

      <span class="token selector">.title</span> <span class="token punctuation">{</span>
        .clip<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">max-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.info</span> <span class="token punctuation">{</span>
        .clip<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 8px 0<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">max-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.price</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@theme</span><span class="token punctuation">;</span></span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* 购物车独有 */</span>
  <span class="token selector">&amp;.goods-cart</span> <span class="token punctuation">{</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>

    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.cart-desc</span> <span class="token punctuation">{</span>
        <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">min-width</span><span class="token punctuation">:</span> 220px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 1 0<span class="token punctuation">;</span>

        <span class="token selector">.title</span> <span class="token punctuation">{</span>
          .clip<span class="token punctuation">;</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
          <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
          <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
          <span class="token property">max-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.info</span> <span class="token punctuation">{</span>
          <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
          <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
          <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
          <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
          <span class="token property">line-height</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>

          <span class="token selector">span</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #ee0a24<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br></div></div><p>上面的组件，很多地方，都要用到，直接全局注册了，如下：</p> <p><img src="/javablog/public/assets/img/1698809837782.39a874cc.png" alt="1698809837782"></p> <h3 id="_9-van-list组件学习"><a href="#_9-van-list组件学习" class="header-anchor">#</a> 9，van-list组件学习</h3> <p>上面已经获取到了搜索出来的商品数据了，先不去渲染，先去学习一下vant-list组件，如下：</p> <p><img src="/javablog/public/assets/img/1698808297156.fb3ca882.png" alt="1698808297156"></p> <p><img src="/javablog/public/assets/img/1698808593341.2fee4c17.png" alt="1698808593341"></p> <p>大家，可以把官方的代码，运行测试一下。在搜索页面中，使用一个此组件，先定义出两个状态，如下：</p> <p><img src="/javablog/public/assets/img/1698809044694.2235c31f.png" alt="1698809044694"></p> <p>对于搜索页面的内容区域，根据不同的条件显示不同的组件，如下：</p> <p><img src="/javablog/public/assets/img/1698809362823.7ab47a94.png" alt="1698809362823"></p> <p>使用van-list组件，如下：</p> <p><img src="/javablog/public/assets/img/1698810087083.d1996743.png" alt="1698810087083"></p> <p><img src="/javablog/public/assets/img/1698810106558.5cbf0c4d.png" alt="1698810106558"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698810301702.a9e4b394.png" alt="1698810301702"></p> <p>修改init方法，如下:</p> <p><img src="/javablog/public/assets/img/1698810651767.9e63db4e.png" alt="1698810651767"></p> <p>浏览器测试如下：</p> <p><img src="/javablog/public/assets/img/1698810682136.f7fb621e.png" alt="1698810682136"></p> <p><img src="/javablog/public/assets/img/1698810733235.242ba4b7.png" alt="1698810733235"></p> <h3 id="_10-切换三级分类重新调接口"><a href="#_10-切换三级分类重新调接口" class="header-anchor">#</a> 10，切换三级分类重新调接口</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1698888700296.ba25a8dd.png" alt="1698888700296"></p> <p>给操作栏绑定change方法，如下：</p> <p><img src="/javablog/public/assets/img/1698888769174.ee480041.png" alt="1698888769174"></p> <p>实现对应的方法，如下：</p> <p><img src="/javablog/public/assets/img/1698889079365.290c52ac.png" alt="1698889079365"></p> <p>在调用接口之前，还需要把finished变成false，如下：</p> <p><img src="/javablog/public/assets/img/1698889732175.37052057.png" alt="1698889732175"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698889697631.ebcfdbc9.png" alt="1698889697631"></p> <h3 id="_11-搜索框中输入内容点击搜索"><a href="#_11-搜索框中输入内容点击搜索" class="header-anchor">#</a> 11，搜索框中输入内容点击搜索</h3> <p>需求：</p> <p><img src="data:image/png;base64,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" alt="1698889788808"></p> <p>目前，搜索框已经和keyword进行了绑定，如下：</p> <p><img src="/javablog/public/assets/img/1698889846822.2e1b3bd8.png" alt="1698889846822"></p> <p>给搜索按钮绑定点击事件，如下：</p> <p><img src="/javablog/public/assets/img/1698889895066.afef5764.png" alt="1698889895066"></p> <p>实现方法，如下：</p> <p><img src="/javablog/public/assets/img/1698889972347.b9d2df73.png" alt="1698889972347"></p> <p>在init方法中，判断输入框中是否有内容，如果没有内容，要给出提示，如下：</p> <p><img src="/javablog/public/assets/img/1698890191811.1b63af19.png" alt="1698890191811"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698890236672.6b9b99ad.png" alt="1698890236672"></p> <h3 id="_12-重置搜索条件"><a href="#_12-重置搜索条件" class="header-anchor">#</a> 12，重置搜索条件</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1698890292089.1e8bd12d.png" alt="1698890292089"></p> <p>给按钮绑定点击事件，如下：</p> <p><img src="/javablog/public/assets/img/1698890339339.71fb2505.png" alt="1698890339339"></p> <p>实现对应的方法，如下：</p> <p><img src="/javablog/public/assets/img/1698890424291.0658d176.png" alt="1698890424291"></p> <p>测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698890458384.4dda9eab.png" alt="1698890458384"></p> <h3 id="_13-加载第一页时-封装loading组件"><a href="#_13-加载第一页时-封装loading组件" class="header-anchor">#</a> 13，加载第一页时，封装loading组件</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1698891410063.e4edbd3d.png" alt="1698891410063"></p> <p>封装loading组件，如下：</p> <p><img src="/javablog/public/assets/img/1698892091157.ef834d0a.png" alt="1698892091157"></p> <p>参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-overlay</span> <span class="token attr-name">:show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">z-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9999<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-loading</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#1baeae<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#1baeae<span class="token punctuation">&quot;</span></span> <span class="token attr-name">vertical</span><span class="token punctuation">&gt;</span></span>
      努力加载中...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-loading</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-overlay</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;OverLayLoading&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token comment">// $destroy()</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 销毁后，手动移除真实的DOM</span>
    <span class="token keyword">let</span> parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> parent<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-loading</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token selector">.van-loading__text</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">letter-spacing</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.van-loading__spinner</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>如果在很多地方，都用到这个遮罩层，就可以全局注册，现在说另一个全局注册的方式，如下：</p> <p><img src="/javablog/public/assets/img/1698892889056.da30446c.png" alt="1698892889056"></p> <p>在搜索组件中使用之，如下：</p> <p><img src="/javablog/public/assets/img/1698892969708.f13cc4ac.png" alt="1698892969708"></p> <p>loading组件就会挂载到body上，如下：</p> <p><img src="/javablog/public/assets/img/1698892923131.47ce87e7.png" alt="1698892923131"></p> <p>在加载第1页面数据时，需要调用此方法，如下：</p> <p><img src="/javablog/public/assets/img/1698893191048.54e25465.png" alt="1698893191048"></p> <p>看一下close方法，如下：</p> <p><img src="/javablog/public/assets/img/1698893263126.44bb10bd.png" alt="1698893263126"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698893310503.f7e36ac9.png" alt="1698893310503"></p> <p>点击搜索补充两行代码：</p> <p><img src="/javablog/public/assets/img/1698893476075.d4ddf60d.png" alt="1698893476075"></p> <p>参考代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 头部导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-search</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>keyword<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
        <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#1baeae<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buttonSearchHandle<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        搜索
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 操作栏 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-dropdown-menu</span> <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#1baeae<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-dropdown-item</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsCategoryId<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>categoryOptions<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dropDownChange<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-dropdown-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-dropdown-item</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderBy<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[
          { text: '综合排序', value: '' },
          { text: '时间排序', value: 'new' },
          { text: '价格排序', value: 'price' },
        ]<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dropDownChange<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-dropdown-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-dropdown-menu</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 内容区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- searchList: null, // null:还未搜索  空数组:搜索无匹配结果   有数据的数组:搜索出的内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-empty</span>
        <span class="token attr-name">:image</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>require('@/assets/images/kesrtd.png')<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>赶快搜索你想要的产品吧<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!searchList<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>

      <span class="token comment">&lt;!-- 搜索了，但是搜索出来的是空 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-empty</span>
        <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>非常抱歉，没有搜索到相关数据<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchList &amp;&amp; searchList.length === 0<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">plain</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#1baeae<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reset<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          重置搜索条件
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-empty</span><span class="token punctuation">&gt;</span></span>

      <span class="token comment">&lt;!-- 搜索了，也搜索出结果了 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-list</span>
        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchList &amp;&amp; searchList.length &gt; 0<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>listLoading<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:finished</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>finished<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">finished-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>数据已经加载完毕<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">loading-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>正要努力加载中...<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loadMore<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goods-item</span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in searchList<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.goodsId<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goods-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Search&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 验证vuex中是否有分类信息，没有则进行派发</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>category<span class="token punctuation">.</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;category/setListAsync&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 如果传递了类别ID，则一加载组件，默认按照类别进行搜索一次</span>
    <span class="token comment">// 当点击了分类页面中的三级分类按钮，跳到搜索页面时，goodsCategoryId才有值，否则它的值是0</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goodsCategoryId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> categoryId <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">keyword</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 搜索框中的关键字</span>
      <span class="token literal-property property">goodsCategoryId</span><span class="token operator">:</span> categoryId <span class="token operator">?</span> <span class="token function">String</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">orderBy</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 排序</span>
      <span class="token literal-property property">pageNumber</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">searchList</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// null:还未搜索  空数组:搜索无匹配结果   有数据的数组:搜索出的内容</span>
      <span class="token comment">// 关于van-list的状态</span>
      <span class="token literal-property property">listLoading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">finished</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">categoryOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>category<span class="token punctuation">.</span>list <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;全部商品&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// 写一个算法，计算出所有的三级分类，push到options</span>
      <span class="token comment">// 基于递归获取第三级别的分类信息</span>
      <span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> <span class="token punctuation">{</span>
            categoryLevel<span class="token punctuation">,</span>
            secondLevelCategoryVOS<span class="token punctuation">,</span>
            thirdLevelCategoryVOS<span class="token punctuation">,</span>
            categoryId<span class="token punctuation">,</span>
            categoryName<span class="token punctuation">,</span>
          <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>categoryLevel <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span>secondLevelCategoryVOS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>categoryLevel <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span>thirdLevelCategoryVOS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>categoryLevel <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            options<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">text</span><span class="token operator">:</span> categoryName<span class="token punctuation">,</span>
              <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token function">next</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> options<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pageNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>searchList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>keyword <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>goodsCategoryId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>orderBy <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">buttonSearchHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>goodsCategoryId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
      <span class="token keyword">this</span><span class="token punctuation">.</span>orderBy <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pageNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 页码重置为1</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重新调接口</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">dropDownChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pageNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 页码重置为1</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重新调接口</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">loadMore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;加载更多...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pageNumber<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">//</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> pageNumber<span class="token punctuation">,</span> keyword<span class="token punctuation">,</span> orderBy<span class="token punctuation">,</span> goodsCategoryId<span class="token punctuation">,</span> searchList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> overlayVc<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>keyword <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> goodsCategoryId <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 说明输入框中没有内容，并且也不是点击三级分类进来的</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;请您先输入搜索关键词&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pageNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>searchList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>pageNumber <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          overlayVc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$overlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> <span class="token punctuation">{</span> resultCode<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">querySearchList</span><span class="token punctuation">(</span>
          pageNumber<span class="token punctuation">,</span>
          keyword<span class="token punctuation">,</span>
          orderBy<span class="token punctuation">,</span>
          goodsCategoryId
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>resultCode <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data-&gt;&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">let</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> totalPage <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>pageNumber <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>searchList <span class="token operator">=</span> list<span class="token punctuation">;</span> <span class="token comment">// 1: 2    2: 1</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>overlayVc<span class="token punctuation">)</span> overlayVc<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>searchList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>searchList<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>listLoading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pageNumber <span class="token operator">&gt;=</span> totalPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>finished <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;网络繁忙或用户认证失败,请稍后再试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>overlayVc<span class="token punctuation">)</span> overlayVc<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-search</span> <span class="token punctuation">{</span>
  <span class="token property">padding-right</span><span class="token punctuation">:</span> 26px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token selector">.van-search__content</span> <span class="token punctuation">{</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 19px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.van-dropdown-menu</span> <span class="token punctuation">{</span>
  <span class="token selector">:deep(.van-dropdown-menu__bar)</span> <span class="token punctuation">{</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br></div></div><h2 id="八-商品详情页面"><a href="#八-商品详情页面" class="header-anchor">#</a> 八，商品详情页面</h2> <h3 id="_1-分析商品详情接口"><a href="#_1-分析商品详情接口" class="header-anchor">#</a> 1，分析商品详情接口</h3> <p>点击首页面中的某个商品 和 点击搜索页面中的某个商品 都是要跳到商品详情的，如下：</p> <p><img src="/javablog/public/assets/img/1698894800805.860dc63a.png" alt="1698894800805"></p> <p><img src="/javablog/public/assets/img/1698894831000.de11de6c.png" alt="1698894831000"></p> <p>创建详情页面组件，并配置路由，如下：</p> <p><img src="/javablog/public/assets/img/1698894891139.37b874b8.png" alt="1698894891139"></p> <p><img src="/javablog/public/assets/img/1698894959887.ad791e49.png" alt="1698894959887"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698895009674.859488fa.png" alt="1698895009674"></p> <p>先分析一下商品详情页面的接口，如下：</p> <p><img src="/javablog/public/assets/img/1698895057611.2d60077e.png" alt="1698895057611"></p> <p><img src="/javablog/public/assets/img/1698895079017.f6ad1d1d.png" alt="1698895079017"></p> <p><img src="/javablog/public/assets/img/1698895105502.08cd0eb7.png" alt="1698895105502"></p> <p>封装API接口，如下：</p> <p><img src="/javablog/public/assets/img/1698895171985.3afa688a.png" alt="1698895171985"></p> <h3 id="_2-跳到详情页面获取数据"><a href="#_2-跳到详情页面获取数据" class="header-anchor">#</a> 2，跳到详情页面获取数据</h3> <p>代码如下：</p> <p><img src="/javablog/public/assets/img/1698895634771.d48c14dd.png" alt="1698895634771"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698895680270.6734bd5a.png" alt="1698895680270"></p> <h3 id="_3-绘制商品详情页面"><a href="#_3-绘制商品详情页面" class="header-anchor">#</a> 3，绘制商品详情页面</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1698895271698.072297fc.png" alt="1698895271698"></p> <p>先绘制头部，如下：</p> <p><img src="/javablog/public/assets/img/1698895776452.7ab8dcd8.png" alt="1698895776452"></p> <p>绘制商品详情，如下：</p> <p><img src="/javablog/public/assets/img/1698895843943.618e96b3.png" alt="1698895843943"></p> <p>样式如下：</p> <p><img src="/javablog/public/assets/img/1698895885157.a27945b1.png" alt="1698895885157"></p> <p>参考代码如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.van-skeleton</span> <span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.detail-box</span> <span class="token punctuation">{</span>
        <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
        <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>

        <span class="token selector">.info</span> <span class="token punctuation">{</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>

            <span class="token selector">.content</span> <span class="token punctuation">{</span>
                <span class="token selector">:deep(img)</span> <span class="token punctuation">{</span>
                    <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
                <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
                <span class="token property">min-height</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token selector">.desc</span> <span class="token punctuation">{</span>
                <span class="token selector">.title</span> <span class="token punctuation">{</span>
                    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
                    <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
                    <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token selector">.tag</span> <span class="token punctuation">{</span>
                    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
                    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
                    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token selector">.price</span> <span class="token punctuation">{</span>
                    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
                    <span class="token property">color</span><span class="token punctuation">:</span> #f63515<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token selector">.tab</span> <span class="token punctuation">{</span>
                <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
                <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
                <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>

                <span class="token selector">a,
                span</span> <span class="token punctuation">{</span>
                    <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
                    <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token selector">a</span> <span class="token punctuation">{</span>
                    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>绘制相关的操作，如下：</p> <p><img src="/javablog/public/assets/img/1698896121803.2a2b5663.png" alt="1698896121803"></p> <p>参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-nav-bar</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>商品详情<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 商品详情 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-skeleton</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!goodsInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">lazy-load</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix(goodsInfo.goodsCoverImg)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ goodsInfo.goodsName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ goodsInfo.goodsIntro }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>¥ {{ goodsInfo.sellingPrice }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>概述<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>参数<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>安装服务<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>常见问题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsInfo.goodsDetailContent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 相关操作 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action</span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">max-width</span><span class="token punctuation">:</span> 540px</span><span class="token punctuation">&quot;</span></span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-x<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsInfo<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>客服<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>购物车<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-button</span>
        <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear-gradient(90deg,#6bd8d8,#1baeae)<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>加入购物车<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-button</span>
        <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear-gradient(90deg,#0dc3c3,#098888)<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>立即购买<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-goods-action</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Detail&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> resultCode<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">queryGoodsInfo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>resultCode <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>goodsInfo <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;当前网络繁忙，请您稍后再试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">goodsId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      <span class="token literal-property property">goodsInfo</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-skeleton</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.detail-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>

  <span class="token selector">.info</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>

    <span class="token selector">.content</span> <span class="token punctuation">{</span>
      <span class="token selector">:deep(img)</span> <span class="token punctuation">{</span>
        <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">min-height</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.desc</span> <span class="token punctuation">{</span>
      <span class="token selector">.title</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.tag</span> <span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.price</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #f63515<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.tab</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>

      <span class="token selector">a,
      span</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br></div></div><h3 id="_4-分析添加购物车接口"><a href="#_4-分析添加购物车接口" class="header-anchor">#</a> 4，分析添加购物车接口</h3> <p>点击商品详情页中的添加购物车，如下：</p> <p><img src="/javablog/public/assets/img/1698909795089.4273517b.png" alt="1698909795089"></p> <p>看一下接口，如下：</p> <p><img src="/javablog/public/assets/img/1698909917273.fc35d280.png" alt="1698909917273"></p> <p>先分析第1个接口，第1个接口，是添加商品到购物车，如下：</p> <p><img src="/javablog/public/assets/img/1698910068184.fed8edb2.png" alt="1698910068184"></p> <p><img src="/javablog/public/assets/img/1698910966887.4c1963b5.png" alt="1698910966887"></p> <p>看第2个接口，如下 ：</p> <p><img src="/javablog/public/assets/img/1698910315045.c59c66d2.png" alt="1698910315045"></p> <p>封装上面两个接口，如下：</p> <p><img src="/javablog/public/assets/img/1698910441849.58c9e743.png" alt="1698910441849"></p> <h3 id="_5-购物车数据存储到vuex中"><a href="#_5-购物车数据存储到vuex中" class="header-anchor">#</a> 5，购物车数据存储到vuex中</h3> <p>定义一个子store，如下：</p> <p><img src="/javablog/public/assets/img/1698911343218.126351ce.png" alt="1698911343218"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token constant">API</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    Toast
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vant&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cart <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">setList</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            list
        <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取购物车商品列表</span>
        <span class="token keyword">async</span> <span class="token function">setListAsync</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
            commit
        <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> <span class="token punctuation">{</span>
                    resultCode<span class="token punctuation">,</span>
                    data
                <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">queryShopCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>resultCode <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    list <span class="token operator">=</span> data<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&quot;setList&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    list
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// 添加商品到购物车</span>
        <span class="token keyword">async</span> <span class="token function">addListAsync</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
            dispatch
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            goodsId<span class="token punctuation">,</span>
            goodsCount
        <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> <span class="token punctuation">{</span>
                    resultCode
                <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">addNewCart</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">,</span> goodsCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>resultCode <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    Toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'新增失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    Toast<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'新增成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'setListAsync'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token keyword">return</span> flag<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> cart<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><p>在商品详情页面中，点击添加购物车，需要派发上面的action，如下：</p> <p><img src="/javablog/public/assets/img/1698911521722.e98ad0d1.png" alt="1698911521722"></p> <p>实现handle方法，如下：</p> <p><img src="/javablog/public/assets/img/1698912195690.83fe44c7.png" alt="1698912195690"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698912285297.4bb47044.png" alt="1698912285297"></p> <p><img src="/javablog/public/assets/img/1698912318455.d92f4c0b.png" alt="1698912318455"></p> <p>看vuex中，有没有购物车的商品，如下：</p> <p><img src="/javablog/public/assets/img/1698912411120.438cc057.png" alt="1698912411120"></p> <p>先不点，因为你把goodsCount从1变成2，需要修改购物车数据。在购物车的小图标上显示数据，我再去添加一个商品到购物车，如下：</p> <p><img src="/javablog/public/assets/img/1698912736686.03f8eae6.png" alt="1698912736686"></p> <p>定义计算属性，如下：</p> <p><img src="/javablog/public/assets/img/1698912958980.98033a43.png" alt="1698912958980"></p> <p>使用之，如下：</p> <p><img src="/javablog/public/assets/img/1698912989687.feb46064.png" alt="1698912989687"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698913006739.8a9d073a.png" alt="1698913006739"></p> <p>参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 导航 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-nav-bar</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>商品详情<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 商品详情 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-skeleton</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!goodsInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-image</span> <span class="token attr-name">lazy-load</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix(goodsInfo.goodsCoverImg)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ goodsInfo.goodsName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ goodsInfo.goodsIntro }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>¥ {{ goodsInfo.sellingPrice }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>概述<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>参数<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>安装服务<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>|<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>常见问题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsInfo.goodsDetailContent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 相关操作 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action</span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">max-width</span><span class="token punctuation">:</span> 540px</span><span class="token punctuation">&quot;</span></span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center-x<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsInfo<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat-o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>客服<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-icon</span>
        <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-o<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>购物车<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>badge === 0<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$router.push('/cart')<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-icon</span>
        <span class="token attr-name">v-else</span>
        <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-o<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>购物车<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:badge</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>badge<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-button</span>
        <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear-gradient(90deg,#6bd8d8,#1baeae)<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>加入购物车<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handle('add')<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-goods-action-button</span>
        <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>linear-gradient(90deg,#0dc3c3,#098888)<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>立即购买<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handle('buy')<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-goods-action</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions<span class="token punctuation">,</span> mapState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Detail&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 把购物车中的数据映射成组件的计算属性</span>
    <span class="token function">badge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>list<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> result <span class="token operator">+</span> <span class="token operator">+</span>item<span class="token punctuation">.</span>goodsCount<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> resultCode<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">queryGoodsInfo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>resultCode <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>goodsInfo <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;当前网络繁忙，请您稍后再试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">goodsId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      <span class="token literal-property property">goodsInfo</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;cart/addListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token comment">// 正常逻辑下，我们判断你是否登录了，只有登录了，才能添加商品到购物车</span>
      <span class="token comment">// 这里，我们先不判断</span>
      <span class="token comment">// 还需要判断你的商品在购物车中是否已存在，这里也先放一下</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;buy&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;点击立即购买~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        flag <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;cart/addListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">goodsId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goodsId<span class="token punctuation">,</span>
          <span class="token literal-property property">goodsCount</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token comment">// todo...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-skeleton</span> <span class="token punctuation">{</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.detail-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>

  <span class="token selector">.info</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>

    <span class="token selector">.content</span> <span class="token punctuation">{</span>
      <span class="token selector">:deep(img)</span> <span class="token punctuation">{</span>
        <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.van-image</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">min-height</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.desc</span> <span class="token punctuation">{</span>
      <span class="token selector">.title</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.tag</span> <span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">.price</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #f63515<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.tab</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>

      <span class="token selector">a,
      span</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br></div></div><h2 id="九-购物车模块"><a href="#九-购物车模块" class="header-anchor">#</a> 九，购物车模块</h2> <h3 id="_1-购物车数据显示"><a href="#_1-购物车数据显示" class="header-anchor">#</a> 1，购物车数据显示</h3> <p>我们把购物车的数据存储到了vuex中，如下：</p> <p><img src="/javablog/public/assets/img/1698973642211.e61b3328.png" alt="1698973642211"></p> <p>默认情况下，list中没有数据，如下：</p> <p><img src="/javablog/public/assets/img/1698973826178.00459ea0.png" alt="1698973826178"></p> <p>点击加入购物车，测试是否有数据，如下：</p> <p><img src="/javablog/public/assets/img/1698973871749.5b0962d2.png" alt="1698973871749"></p> <p>在加载项目首页面时，就想让购物车中有数据，处理之，如下：</p> <p><img src="/javablog/public/assets/img/1698973983285.cdf9751f.png" alt="1698973983285"></p> <p>在App.vue中，直接去派发上面的action，如下：</p> <p><img src="/javablog/public/assets/img/1698974145519.5f065e39.png" alt="1698974145519"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698974185384.cc12d5b9.png" alt="1698974185384"></p> <p><img src="/javablog/public/assets/img/1698974207973.7aa2dce7.png" alt="1698974207973"></p> <p>现在有数据了，需要在Cart.vue组件中，把数据渲染出来，Cart.vue组件如下：</p> <p><img src="/javablog/public/assets/img/1698974378317.29d15cd3.png" alt="1698974378317"></p> <p>先把头部绘制出来，如下：</p> <p><img src="/javablog/public/assets/img/1698974498624.2a721c6e.png" alt="1698974498624"></p> <p>开始绘制商品列表，先把仓库中的数据，映射成组件的计算属性，如下：</p> <p><img src="/javablog/public/assets/img/1698974706230.4622f69c.png" alt="1698974706230"></p> <p>要把数据遍历出不，vant中有现成的组件，代码如下：</p> <p><img src="/javablog/public/assets/img/1698975275165.8cf81e5c.png" alt="1698975275165"></p> <p>参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 头部 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-nav-bar</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>购物车<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-nav-bar</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 中间的商品列表 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list.length &gt; 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-swipe-cell</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.cartItemId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goods-item</span> <span class="token attr-name">cart</span> <span class="token attr-name">:info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goods-item</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span>
            <span class="token attr-name">square</span>
            <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>删除<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>danger<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete-button<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleRemove(item.cartItemId)<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-swipe-cell</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-empty</span>
      <span class="token attr-name">v-else</span>
      <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>购物车空空如也<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:image</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>require('@/assets/images/empty-car.png')<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions<span class="token punctuation">,</span> mapState<span class="token punctuation">,</span> mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Cart&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function">list</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>list <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-submit-bar</span> <span class="token punctuation">{</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.cart-box</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>

  <span class="token selector">.cart-list</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 46px - 110px<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>

    <span class="token selector">.item</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #eee<span class="token punctuation">;</span>

      <span class="token selector">.van-checkbox</span> <span class="token punctuation">{</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 0 0 auto<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.van-button--square</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">:deep(.van-swipe-cell__right)</span> <span class="token punctuation">{</span>
  <span class="token property">right</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><p>对比我们想要的效果，如下：</p> <p><img src="/javablog/public/assets/img/1698975466137.638009cb.png" alt="1698975466137"></p> <p>需要在每一个商品前面添加一个checkbox，再分析一个服务器返回的数据如下：</p> <p><img src="/javablog/public/assets/img/1698975577382.70d52c56.png" alt="1698975577382"></p> <p>在vuex中，需要手动给每一个数据添加一个标识，如下：</p> <p><img src="/javablog/public/assets/img/1698976219760.ef73899f.png" alt="1698976219760"></p> <p>测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698976232287.d5bc381f.png" alt="1698976232287"></p> <p>使用checkbox组件，如下：</p> <p><img src="/javablog/public/assets/img/1698976274388.c1c6e533.png" alt="1698976274388"></p> <h3 id="_2-购物车中商品数量修改"><a href="#_2-购物车中商品数量修改" class="header-anchor">#</a> 2，购物车中商品数量修改</h3> <p>先分析接口，如下：</p> <p><img src="/javablog/public/assets/img/1698977839560.1cbe9c2b.png" alt="1698977839560"></p> <p>封装接口，如下：</p> <p><img src="/javablog/public/assets/img/1698977922252.d42c10b3.png" alt="1698977922252"></p> <p>在vuex中的action中，调用之，如下：</p> <p><img src="/javablog/public/assets/img/1698978137515.75df6957.png" alt="1698978137515"></p> <p>实现mutaion，如下：</p> <p><img src="/javablog/public/assets/img/1698978247047.2b907b15.png" alt="1698978247047"></p> <p>在点击+或-时，需要派发上面的action，如下：</p> <p><img src="/javablog/public/assets/img/1698978338666.2fc49abc.png" alt="1698978338666"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698978637668.9c784a33.png" alt="1698978637668"></p> <h3 id="_3-购物车数据删除"><a href="#_3-购物车数据删除" class="header-anchor">#</a> 3，购物车数据删除</h3> <p>也是先分析接口，如下：</p> <p><img src="/javablog/public/assets/img/1698978745204.8c9d5e20.png" alt="1698978745204"></p> <p>封装接口，如下：</p> <p><img src="/javablog/public/assets/img/1698978803083.82c70aff.png" alt="1698978803083"></p> <p>在vuex中的action中，调用之，如下：</p> <p><img src="/javablog/public/assets/img/1698979039158.e53a9494.png" alt="1698979039158"></p> <p>实现对应的mutation，如下：</p> <p><img src="/javablog/public/assets/img/1698979113935.6b2e4c63.png" alt="1698979113935"></p> <p>当点击删除按钮时，需要派发上面的action，如下：</p> <p><img src="/javablog/public/assets/img/1698979355552.d93f1582.png" alt="1698979355552"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698979406286.d283ee43.png" alt="1698979406286"></p> <p>看vuex，如下：</p> <p><img src="/javablog/public/assets/img/1698979425221.36e1441a.png" alt="1698979425221"></p> <h3 id="_4-详情页面中购物车数据修改"><a href="#_4-详情页面中购物车数据修改" class="header-anchor">#</a> 4，详情页面中购物车数据修改</h3> <p>把一个商品添加到购物车，如下：</p> <p><img src="/javablog/public/assets/img/1698979538066.c0c5c040.png" alt="1698979538066"></p> <p>此时，需要回到商品详情页面，处理之，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;cart/addListAsync&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cart/updateListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token keyword">async</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
         <span class="token comment">// 正常逻辑下，我们判断你是否登录了，只有登录了，才能添加商品到购物车</span>
         <span class="token comment">// 这里，我们先不判断</span>
         <span class="token comment">// 还需要判断你的商品在购物车中是否已存在，这里也先放一下</span>
         <span class="token keyword">let</span> isExit <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 商品是否在购物车中</span>
         isExit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">+</span>item<span class="token punctuation">.</span>goodsId <span class="token operator">===</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isExit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">// 商品没有在购物车中</span>
             flag <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;cart/addListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                 <span class="token literal-property property">goodsId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goodsId<span class="token punctuation">,</span>
                 <span class="token literal-property property">goodsCount</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;buy&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                 <span class="token keyword">if</span> <span class="token punctuation">(</span>isExit<span class="token punctuation">.</span>goodsCount <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token keyword">this</span><span class="token punctuation">.</span>$toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;最多只能购买5件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     <span class="token keyword">return</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
                 flag <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;cart/updateListAsync&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                     <span class="token literal-property property">cartItemId</span><span class="token operator">:</span> isExit<span class="token punctuation">.</span>cartItemId<span class="token punctuation">,</span>
                     <span class="token literal-property property">goodsCount</span><span class="token operator">:</span> <span class="token operator">+</span>isExit<span class="token punctuation">.</span>goodsCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
                 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>

         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;buy&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>浏览器测试之，只点击添加购物车，如下：</p> <p><img src="/javablog/public/assets/img/1698980294971.668c7c65.png" alt="1698980294971"></p> <p>现在去点击立即购买，如下：</p> <p><img src="/javablog/public/assets/img/1698980344177.3b40a0ab.png" alt="1698980344177"></p> <h3 id="_5-底部结算实现"><a href="#_5-底部结算实现" class="header-anchor">#</a> 5，底部结算实现</h3> <p>部底结果如下：</p> <p><img src="/javablog/public/assets/img/1698981854578.5cdeb152.png" alt="1698981854578"></p> <p>底部结算如下：</p> <p><img src="/javablog/public/assets/img/1698982492635.3f1d112d.png" alt="1698982492635"></p> <p>购物车中的数据存储在vuex中的，改变vuex中的数据的唯一途径是mutations，定义mution，如下：</p> <p><img src="/javablog/public/assets/img/1698982210431.32c5e2c5.png" alt="1698982210431"></p> <p>当点击某个商品的checkbox 和 点击全选按钮时，就需要commit上面的mutaion，如下：</p> <p><img src="/javablog/public/assets/img/1698982584272.604de01f.png" alt="1698982584272"></p> <p>测试如下：</p> <p><img src="/javablog/public/assets/img/1698982772362.326b2b6c.png" alt="1698982772362"></p> <p>控制全选是否选中，可以和我们之前一样，使用getters，也可以使用监听器，如下：</p> <p><img src="/javablog/public/assets/img/1698983100843.8134563b.png" alt="1698983100843"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698983140665.c5b90cb1.png" alt="1698983140665"></p> <p>计算总价，总价就是所有选中的商品单价x数量：</p> <p><img src="/javablog/public/assets/img/1698982877840.b61f36bf.png" alt="1698982877840"></p> <p>浏览器测试之，如下：</p> <p><img src="/javablog/public/assets/img/1698982907244.6b8463cb.png" alt="1698982907244"></p> <h2 id="十-前九章内容优化"><a href="#十-前九章内容优化" class="header-anchor">#</a> 十，前九章内容优化</h2> <h3 id="_1-解决刷新首页面用户数据丢失问题"><a href="#_1-解决刷新首页面用户数据丢失问题" class="header-anchor">#</a> 1，解决刷新首页面用户数据丢失问题</h3> <p>目前, vuex中存储的数据如下：</p> <p><img src="/javablog/public/assets/img/1699233267389.a5c8effe.png" alt="1699233267389"></p> <p>刷新一下，用户数据没有，原因是用户数据是存储大vuex中，vuex中的数据是存储在内存中的，一刷新，内存中的数据就没有了，如下：</p> <p><img src="/javablog/public/assets/img/1699233455670.39b5dadc.png" alt="1699233455670"></p> <p>解决：</p> <ul><li>你把vuex中的数据同步到localstorage中，每次刷新，你都从localstorage中获取数据，和之前讲的todomvc一样。</li> <li>每次刷新，你都重新调用接口，获取数据，存储到vuex中。</li></ul> <p>这里，我每次刷新，都重新调用接口，如下：</p> <p><img src="/javablog/public/assets/img/1699233706583.cfd4c5df.png" alt="1699233706583"></p> <p>现在去刷新，如下：</p> <p><img src="/javablog/public/assets/img/1699233819179.c313bbf3.png" alt="1699233819179"></p> <p>现在尝试把token删除掉，如下：</p> <p><img src="/javablog/public/assets/img/1699234078647.6bdcc6db.png" alt="1699234078647"></p> <p>再次去刷新页面，也会调接口，但是没有token，如下：</p> <p><img src="/javablog/public/assets/img/1699234242163.4759286a.png" alt="1699234242163"></p> <p><img src="/javablog/public/assets/img/1699234410500.4ba0f7ca.png" alt="1699234410500"></p> <h3 id="_2-解决刷新时购物车数据丢失问题"><a href="#_2-解决刷新时购物车数据丢失问题" class="header-anchor">#</a> 2，解决刷新时购物车数据丢失问题</h3> <p>前面已经解决过了，在App.vue中都去获取购物车数据，如下：</p> <p><img src="/javablog/public/assets/img/1699234531798.b227ecf6.png" alt="1699234531798"></p> <p>现在我们没有登录，服务器返回如下：</p> <p><img src="/javablog/public/assets/img/1699234555139.001b3425.png" alt="1699234555139"></p> <p>登录之，如下：</p> <p><img src="/javablog/public/assets/img/1699234626405.b1812f81.png" alt="1699234626405"></p> <p>对于分类数据，是我们点击分类时，才去调用接口，如下：</p> <p><img src="/javablog/public/assets/img/1699234746153.a6cc02d1.png" alt="1699234746153"></p> <p>测试如下：</p> <p><img src="/javablog/public/assets/img/1699234801828.6bca144c.png" alt="1699234801828"></p> <h3 id="_3-页面缓存"><a href="#_3-页面缓存" class="header-anchor">#</a> 3，页面缓存</h3> <p>有些页面需要缓存，如下：</p> <p><img src="/javablog/public/assets/img/1699234938450.2926c694.png" alt="1699234938450"></p> <p><img src="/javablog/public/assets/img/1699235270690.77d8f198.png" alt="1699235270690"></p> <p><img src="/javablog/public/assets/img/1699235535428.a254250b.png" alt="1699235535428"></p> <p>哪些页面可以缓存，把可以缓存的页面存储到vuex中，如下：</p> <p><img src="/javablog/public/assets/img/1699235900793.f2042638.png" alt="1699235900793"></p> <p>在App.vue中使用之，如下：</p> <p><img src="/javablog/public/assets/img/1699235982161.d928f6a2.png" alt="1699235982161"></p> <p>测试之，如下：</p> <p><img src="/javablog/public/assets/img/1699237627293.60b25a60.png" alt="1699237627293"></p> <h3 id="_4-前置路由守卫中判断是否登录"><a href="#_4-前置路由守卫中判断是否登录" class="header-anchor">#</a> 4，前置路由守卫中判断是否登录</h3> <p>前置守卫API：router.beforEach((to, from, next)=&gt;{})。获取用户信息，用户信息是存储在仓库中的，你一刷新用户信息就没有了，在首页面中，每次刷新，都去重新调用获取用户信息的接口了。在购物车页面，你一刷新，用户信息也会丢失，也是重新调用接口解决，看一个获取用户信息的接口，如下：</p> <p><img src="/javablog/public/assets/img/1699241597038.85b84796.png" alt="1699241597038"></p> <p>所谓的路由守卫，就是你满足某个条件了，就可以访问，如果不满足的话，不能访问，书写代码：</p> <p><img src="/javablog/public/assets/img/1699242257200.72b07d1a.png" alt="1699242257200"></p> <p>效果如下：</p> <p><img src="/javablog/public/assets/img/1699240200911.80e69ff1.png" alt="1699240200911"></p> <p>把路由规则抽离出去，如下：</p> <p><img src="/javablog/public/assets/img/1699242589369.17a72203.png" alt="1699242589369"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;../views/Home.vue&quot;</span>

<span class="token keyword">let</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span> Home<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/classify'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Classify.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/cart'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Cart.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/personal'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Personal.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/search'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Search.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/detail/:id'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Detail.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> routes<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>在index.js，引入，如下：</p> <p><img src="/javablog/public/assets/img/1699242657834.733ae5ca.png" alt="1699242657834"></p> <p>参考代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;@/store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    Toast
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vant&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> routes <span class="token keyword">from</span> <span class="token string">&quot;./routes&quot;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> overlayVc<span class="token punctuation">;</span>
<span class="token keyword">const</span> $overlay <span class="token operator">=</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$overlay

<span class="token keyword">let</span> safePage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/classify&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// /cart</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> profile <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>profile<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>profile <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>safePage<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>profile <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>overlayVc<span class="token punctuation">)</span> overlayVc <span class="token operator">=</span> <span class="token function">$overlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            profile <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'setProfileAsync'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>profile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'请您先登录'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/login?to=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>overlayVc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        overlayVc<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        overlayVc <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>测试OK。</p> <h3 id="_5-添加搜索页面缓存"><a href="#_5-添加搜索页面缓存" class="header-anchor">#</a> 5，添加搜索页面缓存</h3> <p>需要对搜索页面实现缓存，如下：</p> <p><img src="/javablog/public/assets/img/1699251417738.14285831.png" alt="1699251417738"></p> <p>从搜索页面去详情页面 或 从详情页面回到搜索页面时，需要把搜索页面缓存起来，说白了，也就是在这两个路由跳转时，把搜索页面缓存起来，也就是把Search添加到vuex中的keepList中，其它路由跳转时，还需要把Search路由移除掉，添加和移动对应的两个mutations已经定义好了，如下：</p> <p><img src="/javablog/public/assets/img/1699251640078.57049b17.png" alt="1699251640078"></p> <p>给路由规则补充name，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;../views/Home.vue&quot;</span>

<span class="token keyword">let</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span> Home<span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;home&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/classify'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Classify.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;classify&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/cart'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Cart.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/personal'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Personal.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;personal&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/search'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Search.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;search&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/detail/:id'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Detail.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;detail&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> routes<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>直接上代码：</p> <p><img src="/javablog/public/assets/img/1699252226530.032209de.png" alt="1699252226530"></p> <p>测试之，如下：</p> <p><img src="/javablog/public/assets/img/1699252323008.0f5dcc9d.png" alt="1699252323008"></p> <h3 id="_6-后置路由守卫中设置每个页面的标题"><a href="#_6-后置路由守卫中设置每个页面的标题" class="header-anchor">#</a> 6，后置路由守卫中设置每个页面的标题</h3> <p>需求：</p> <p><img src="/javablog/public/assets/img/1699252397355.e39150d9.png" alt="1699252397355"></p> <p>可以给每一个路由添加一个元信息，所谓的元信息，就是当前路由额外的数据，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;../views/Home.vue&quot;</span>

<span class="token keyword">let</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/home'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">component</span><span class="token operator">:</span> Home<span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/classify'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Classify.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;classify&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;分类&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/cart'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Cart.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;购物车&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/personal'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Personal.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;personal&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;个人中心&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;登录/注册&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/search'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Search.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;搜索&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/detail/:id'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Detail.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;detail&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;商品详情&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> routes<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><p>在后置守卫中，使用之，如下：</p> <p><img src="/javablog/public/assets/img/1699252656123.cbfbb505.png" alt="1699252656123"></p> <h2 id="十一-地址管理模块"><a href="#十一-地址管理模块" class="header-anchor">#</a> 十一，地址管理模块</h2> <h3 id="_1-创建组件-配置路由-封装api接口"><a href="#_1-创建组件-配置路由-封装api接口" class="header-anchor">#</a> 1，创建组件，配置路由，封装API接口</h3> <p>后面的模块基本上都是和个人中心相关的，如下：</p> <ul><li>地址管理</li> <li>订单管理</li> <li>账号管理</li></ul> <p>创建一个文件夹，放这些组件，如下：</p> <p><img src="/javablog/public/assets/img/1699253676294.e3f59c00.png" alt="1699253676294"></p> <p>配置路由，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/myaddress'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/personal/MyAddress.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;myaddress&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;地址管理&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/addressedit'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/personal/AddressEditor.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;addressedit&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;地址管理&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>封装添加地址的API接口，分析如下：</p> <p><img src="/javablog/public/assets/img/1699254091416.f2cd5053.png" alt="1699254091416"></p> <p>写代码如下：</p> <p><img src="/javablog/public/assets/img/1699254185451.4003120d.png" alt="1699254185451"></p> <p>获取地址列表接口分析，如下：</p> <p><img src="/javablog/public/assets/img/1699254300205.3d572ada.png" alt="1699254300205"></p> <p>代码如下：</p> <p><img src="/javablog/public/assets/img/1699254586565.a64ee0d7.png" alt="1699254586565"></p> <p>编辑地址，对应了两个接口，如下：</p> <p><img src="/javablog/public/assets/img/1699254465100.e4ad4e8d.png" alt="1699254465100"></p> <p>封装API接口，如下：</p> <p><img src="/javablog/public/assets/img/1699254652668.15dcc91d.png" alt="1699254652668"></p> <p>当点击了保存，才实现真正的编辑，如下：</p> <p><img src="/javablog/public/assets/img/1699254923384.cea054ea.png" alt="1699254923384"></p> <p>封装API接口，如下：</p> <p><img src="/javablog/public/assets/img/1699254947738.43868d4c.png" alt="1699254947738"></p> <p>点击了删除实现删除地址，如下 ：</p> <p><img src="/javablog/public/assets/img/1699255022033.2efcb874.png" alt="1699255022033"></p> <p>封装删除的API接口</p> <p><img src="/javablog/public/assets/img/1699255088827.41a4fe35.png" alt="1699255088827"></p> <p>参考代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 新增地址</span>
<span class="token keyword">const</span> <span class="token function-variable function">addAddress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/address</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取地址列表</span>
<span class="token keyword">const</span> <span class="token function-variable function">getAddressList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/address</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 根据ID获取某个地址，实现数据回显</span>
<span class="token keyword">const</span> <span class="token function-variable function">getAddressDetail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/address/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 实现编辑</span>
<span class="token keyword">const</span> <span class="token function-variable function">updateAddress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> http<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/address</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj中肯定包含地址ID</span>

<span class="token comment">// 删除地址</span>
<span class="token keyword">const</span> <span class="token function-variable function">deleteAddress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> http<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;/address/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-显示地址列表"><a href="#_2-显示地址列表" class="header-anchor">#</a> 2，显示地址列表</h3> <p>先使用人家线上的项目，添加几个地址，如下：</p> <p><img src="/javablog/public/assets/img/1699255317079.5b194021.png" alt="1699255317079"></p> <p>在地址列表组件中，发ajax请求，获取地址列表数据，如下：</p> <p><img src="/javablog/public/assets/img/1699256044225.1a39d411.png" alt="1699256044225"></p> <p>在vant中，有现在的地址组件，如下：</p> <p><img src="/javablog/public/assets/img/1699256346617.dc0aebb5.png" alt="1699256346617"></p> <p>需要把后端给我们返回的数据格式，转化成人家需要的数据格式，如下：</p> <p><img src="/javablog/public/assets/img/1699256507349.acb1f16e.png" alt="1699256507349"></p> <p>使用之，如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myaddress-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-address-list</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chosenAddressId<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">default-tag-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>默认<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@add</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onAdd<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@edit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEdit<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyAddress&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 地址列表的数据源</span>
      <span class="token literal-property property">chosenAddressId</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">getAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>addressId<span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
            <span class="token literal-property property">tel</span><span class="token operator">:</span> item<span class="token punctuation">.</span>userPhone<span class="token punctuation">,</span>
            <span class="token literal-property property">address</span><span class="token operator">:</span>
              item<span class="token punctuation">.</span>provinceName <span class="token operator">+</span>
              item<span class="token punctuation">.</span>cityName <span class="token operator">+</span>
              item<span class="token punctuation">.</span>regionName <span class="token operator">+</span>
              item<span class="token punctuation">.</span>detailAddress<span class="token punctuation">,</span>
            <span class="token literal-property property">isDefault</span><span class="token operator">:</span> item<span class="token punctuation">.</span>defaultFlag <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>浏览器效果如下：</p> <p><img src="/javablog/public/assets/img/1699256716174.e6fa7e3a.png" alt="1699256716174"></p> <p>默认情况下，需要让xiaoqiang这个地址选中，如下：</p> <p><img src="/javablog/public/assets/img/1699258084966.ca0179f2.png" alt="1699258084966"></p> <p>效果如下：</p> <p><img src="/javablog/public/assets/img/1699258099602.f18580af.png" alt="1699258099602"></p> <p>参考代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myaddress-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-address-list</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chosenAddressId<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">default-tag-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>默认<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@add</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onAdd<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@edit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEdit<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyAddress&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 地址列表的数据源</span>
      <span class="token literal-property property">chosenAddressId</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>isDefault <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;res:&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>chosenAddressId <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">?.</span>id<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">getAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>addressId<span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
            <span class="token literal-property property">tel</span><span class="token operator">:</span> item<span class="token punctuation">.</span>userPhone<span class="token punctuation">,</span>
            <span class="token literal-property property">address</span><span class="token operator">:</span>
              item<span class="token punctuation">.</span>provinceName <span class="token operator">+</span>
              item<span class="token punctuation">.</span>cityName <span class="token operator">+</span>
              item<span class="token punctuation">.</span>regionName <span class="token operator">+</span>
              item<span class="token punctuation">.</span>detailAddress<span class="token punctuation">,</span>
            <span class="token literal-property property">isDefault</span><span class="token operator">:</span> item<span class="token punctuation">.</span>defaultFlag <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h3 id="_3-其它模块自己独立完成"><a href="#_3-其它模块自己独立完成" class="header-anchor">#</a> 3，其它模块自己独立完成</h3> <p>参考文档：https://yujingbo1023.github.io/feblog/Framework/vue2/25.html</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/6/2023, 5:09:51 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#一-项目介绍" class="sidebar-link reco-side-一-项目介绍" data-v-b57cc07c>一，项目介绍</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-项目介绍" class="sidebar-link reco-side-_1-项目介绍" data-v-b57cc07c>1，项目介绍</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-项目分析" class="sidebar-link reco-side-_2-项目分析" data-v-b57cc07c>2，项目分析</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-项目的骨架" class="sidebar-link reco-side-_3-项目的骨架" data-v-b57cc07c>3，项目的骨架</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#二-搭建五大组件并配置路由" class="sidebar-link reco-side-二-搭建五大组件并配置路由" data-v-b57cc07c>二，搭建五大组件并配置路由</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-创建出五大组件" class="sidebar-link reco-side-_1-创建出五大组件" data-v-b57cc07c>1，创建出五大组件</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-vant组件库的使用" class="sidebar-link reco-side-_2-vant组件库的使用" data-v-b57cc07c>2，Vant组件库的使用</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-处理全局样式" class="sidebar-link reco-side-_3-处理全局样式" data-v-b57cc07c>3，处理全局样式</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#三-封装tabbar组件" class="sidebar-link reco-side-三-封装tabbar组件" data-v-b57cc07c>三，封装TabBar组件</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-封装tabbar组件" class="sidebar-link reco-side-_1-封装tabbar组件" data-v-b57cc07c>1，封装TabBar组件</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-控制tabbar的显示与隐藏" class="sidebar-link reco-side-_2-控制tabbar的显示与隐藏" data-v-b57cc07c>2，控制Tabbar的显示与隐藏</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-防止tabar盖住页面内容" class="sidebar-link reco-side-_3-防止tabar盖住页面内容" data-v-b57cc07c>3，防止Tabar盖住页面内容</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#四-注册登录模块实现" class="sidebar-link reco-side-四-注册登录模块实现" data-v-b57cc07c>四，注册登录模块实现</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-绘制登录页面" class="sidebar-link reco-side-_1-绘制登录页面" data-v-b57cc07c>1，绘制登录页面</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-封装navbar" class="sidebar-link reco-side-_2-封装navbar" data-v-b57cc07c>2，封装NavBar</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-验证码" class="sidebar-link reco-side-_3-验证码" data-v-b57cc07c>3，验证码</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_4-axios二次封装" class="sidebar-link reco-side-_4-axios二次封装" data-v-b57cc07c>4，axios二次封装</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_5-api封装" class="sidebar-link reco-side-_5-api封装" data-v-b57cc07c>5，API封装</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_6-代理解决跨域" class="sidebar-link reco-side-_6-代理解决跨域" data-v-b57cc07c>6，代理解决跨域</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_7-登录和注册实现" class="sidebar-link reco-side-_7-登录和注册实现" data-v-b57cc07c>7，登录和注册实现</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_8-获取用户信息并存储到vuex中" class="sidebar-link reco-side-_8-获取用户信息并存储到vuex中" data-v-b57cc07c>8，获取用户信息并存储到Vuex中</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#五-首页面渲染" class="sidebar-link reco-side-五-首页面渲染" data-v-b57cc07c>五，首页面渲染</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-首页面的头部渲染" class="sidebar-link reco-side-_1-首页面的头部渲染" data-v-b57cc07c>1，首页面的头部渲染</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-实例轮播图" class="sidebar-link reco-side-_2-实例轮播图" data-v-b57cc07c>2，实例轮播图</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-渲染宫格" class="sidebar-link reco-side-_3-渲染宫格" data-v-b57cc07c>3，渲染宫格</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_4-商品列表" class="sidebar-link reco-side-_4-商品列表" data-v-b57cc07c>4，商品列表</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_5-头部样式处理" class="sidebar-link reco-side-_5-头部样式处理" data-v-b57cc07c>5，头部样式处理</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#六-渲染分类页" class="sidebar-link reco-side-六-渲染分类页" data-v-b57cc07c>六，渲染分类页</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-分析分类页面的接口" class="sidebar-link reco-side-_1-分析分类页面的接口" data-v-b57cc07c>1，分析分类页面的接口</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-把分类数据存储到vuex" class="sidebar-link reco-side-_2-把分类数据存储到vuex" data-v-b57cc07c>2，把分类数据存储到vuex</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-渲染分类数据" class="sidebar-link reco-side-_3-渲染分类数据" data-v-b57cc07c>3，渲染分类数据</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#七-搜索页面实现" class="sidebar-link reco-side-七-搜索页面实现" data-v-b57cc07c>七，搜索页面实现</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-创建搜索页面并配置路由" class="sidebar-link reco-side-_1-创建搜索页面并配置路由" data-v-b57cc07c>1，创建搜索页面并配置路由</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-绘制search页面" class="sidebar-link reco-side-_2-绘制search页面" data-v-b57cc07c>2，绘制Search页面</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-过滤出三级分类数据" class="sidebar-link reco-side-_3-过滤出三级分类数据" data-v-b57cc07c>3，过滤出三级分类数据</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_4-点击三级分类-传递分类id过去" class="sidebar-link reco-side-_4-点击三级分类-传递分类id过去" data-v-b57cc07c>4，点击三级分类，传递分类ID过去</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_5-分析搜索接口" class="sidebar-link reco-side-_5-分析搜索接口" data-v-b57cc07c>5，分析搜索接口</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_6-点击三级分类到搜索页面-调用搜索接口" class="sidebar-link reco-side-_6-点击三级分类到搜索页面-调用搜索接口" data-v-b57cc07c>6，点击三级分类到搜索页面，调用搜索接口</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_7-实现init方法" class="sidebar-link reco-side-_7-实现init方法" data-v-b57cc07c>7，实现init方法</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_8-封装goodsitem组件" class="sidebar-link reco-side-_8-封装goodsitem组件" data-v-b57cc07c>8，封装GoodsItem组件</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_9-van-list组件学习" class="sidebar-link reco-side-_9-van-list组件学习" data-v-b57cc07c>9，van-list组件学习</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_10-切换三级分类重新调接口" class="sidebar-link reco-side-_10-切换三级分类重新调接口" data-v-b57cc07c>10，切换三级分类重新调接口</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_11-搜索框中输入内容点击搜索" class="sidebar-link reco-side-_11-搜索框中输入内容点击搜索" data-v-b57cc07c>11，搜索框中输入内容点击搜索</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_12-重置搜索条件" class="sidebar-link reco-side-_12-重置搜索条件" data-v-b57cc07c>12，重置搜索条件</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_13-加载第一页时-封装loading组件" class="sidebar-link reco-side-_13-加载第一页时-封装loading组件" data-v-b57cc07c>13，加载第一页时，封装loading组件</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#八-商品详情页面" class="sidebar-link reco-side-八-商品详情页面" data-v-b57cc07c>八，商品详情页面</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-分析商品详情接口" class="sidebar-link reco-side-_1-分析商品详情接口" data-v-b57cc07c>1，分析商品详情接口</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-跳到详情页面获取数据" class="sidebar-link reco-side-_2-跳到详情页面获取数据" data-v-b57cc07c>2，跳到详情页面获取数据</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-绘制商品详情页面" class="sidebar-link reco-side-_3-绘制商品详情页面" data-v-b57cc07c>3，绘制商品详情页面</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_4-分析添加购物车接口" class="sidebar-link reco-side-_4-分析添加购物车接口" data-v-b57cc07c>4，分析添加购物车接口</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_5-购物车数据存储到vuex中" class="sidebar-link reco-side-_5-购物车数据存储到vuex中" data-v-b57cc07c>5，购物车数据存储到vuex中</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#九-购物车模块" class="sidebar-link reco-side-九-购物车模块" data-v-b57cc07c>九，购物车模块</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-购物车数据显示" class="sidebar-link reco-side-_1-购物车数据显示" data-v-b57cc07c>1，购物车数据显示</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-购物车中商品数量修改" class="sidebar-link reco-side-_2-购物车中商品数量修改" data-v-b57cc07c>2，购物车中商品数量修改</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-购物车数据删除" class="sidebar-link reco-side-_3-购物车数据删除" data-v-b57cc07c>3，购物车数据删除</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_4-详情页面中购物车数据修改" class="sidebar-link reco-side-_4-详情页面中购物车数据修改" data-v-b57cc07c>4，详情页面中购物车数据修改</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_5-底部结算实现" class="sidebar-link reco-side-_5-底部结算实现" data-v-b57cc07c>5，底部结算实现</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#十-前九章内容优化" class="sidebar-link reco-side-十-前九章内容优化" data-v-b57cc07c>十，前九章内容优化</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-解决刷新首页面用户数据丢失问题" class="sidebar-link reco-side-_1-解决刷新首页面用户数据丢失问题" data-v-b57cc07c>1，解决刷新首页面用户数据丢失问题</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-解决刷新时购物车数据丢失问题" class="sidebar-link reco-side-_2-解决刷新时购物车数据丢失问题" data-v-b57cc07c>2，解决刷新时购物车数据丢失问题</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-页面缓存" class="sidebar-link reco-side-_3-页面缓存" data-v-b57cc07c>3，页面缓存</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_4-前置路由守卫中判断是否登录" class="sidebar-link reco-side-_4-前置路由守卫中判断是否登录" data-v-b57cc07c>4，前置路由守卫中判断是否登录</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_5-添加搜索页面缓存" class="sidebar-link reco-side-_5-添加搜索页面缓存" data-v-b57cc07c>5，添加搜索页面缓存</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_6-后置路由守卫中设置每个页面的标题" class="sidebar-link reco-side-_6-后置路由守卫中设置每个页面的标题" data-v-b57cc07c>6，后置路由守卫中设置每个页面的标题</a></li><li class="level-2" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#十一-地址管理模块" class="sidebar-link reco-side-十一-地址管理模块" data-v-b57cc07c>十一，地址管理模块</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_1-创建组件-配置路由-封装api接口" class="sidebar-link reco-side-_1-创建组件-配置路由-封装api接口" data-v-b57cc07c>1，创建组件，配置路由，封装API接口</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_2-显示地址列表" class="sidebar-link reco-side-_2-显示地址列表" data-v-b57cc07c>2，显示地址列表</a></li><li class="level-3" data-v-b57cc07c><a href="/javablog/public/blogs/base/13.html#_3-其它模块自己独立完成" class="sidebar-link reco-side-_3-其它模块自己独立完成" data-v-b57cc07c>3，其它模块自己独立完成</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/javablog/public/assets/js/app.0248906e.js" defer></script><script src="/javablog/public/assets/js/25.0888173b.js" defer></script><script src="/javablog/public/assets/js/1.381cc6bf.js" defer></script><script src="/javablog/public/assets/js/4.079f8070.js" defer></script>
  </body>
</html>
