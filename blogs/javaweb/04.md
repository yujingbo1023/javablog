---
title: 04-Maven基础
date: 2028-12-15
sticky: 1
sidebar: 'auto'
tags:
 - javaweb
categories:
 -  javaweb
---

## 一，Maven介绍

### 1，什么是Maven

Apache Maven 是一个项目管理和构建工具，它基于项目对象模型(POM)的概念，通过一小段描述信息来管理项目的构建、报告和文档。官网：http://maven.apache.org/ 

Maven是专门用于管理和构建Java项目的工具，它的主要功能有：

* 提供了一套标准化的项目结构，所有IDE使用Maven构建的项目结构完全一样，所有IDE创建的Maven项目可以通用
* 提供了一套标准化的构建流程（编译，测试，打包，发布……）
* 提供了一套依赖管理机制

标准化的项目结构：

![1704333186910](./assets/1704333186910.png)

![1704333175898](./assets/1704333175898.png)





标准化的构建流程（Maven提供了一套简单的命令来完成项目构建）：

![1702349076193](./assets/1702349076193.png)

依赖管理（依赖管理其实就是管理你项目所依赖的第三方资源，如：jar包、插件…）。传统依赖管理：

![1702349174737](./assets/1702349174737.png)

Maven依赖管理是使用标准的坐标配置来管理各种依赖，只需要简单的配置就可以完成依赖管理：

![1702349214558](./assets/1702349214558.png)

### 2，Maven 模型

Maven 模型：

![1702349332637](./assets/1702349332637.png)

说明：

* 项目对象模型 (Project Object Model)
* 依赖管理模型(Dependency)
* 插件(Plugin)

### 3，仓库

![1702349445232](./assets/1702349445232.png)

仓库分类：

* 本地仓库：自己计算机上的一个目录
* 中央仓库：由Maven团队维护的全球唯一的仓库，地址：https://repo1.maven.org/maven2/
* 远程仓库(私服)：一般由公司团队搭建的私有仓库

当项目中使用坐标引入对应依赖jar包后，首先会查找本地仓库中是否有对应的jar包：

* 如果有，则在项目直接引用; 
* 如果没有，则去中央仓库中下载对应的jar包到本地仓库。

还可以搭建远程仓库，将来jar包的查找顺序则变为：

* 本地仓库=>远程仓库=>中央仓库

## 二，Maven安装和配置

### 1，Maven的安装和配置

配置步骤如下：

* 解压 apache-maven-3.6.1.rar 既安装完成

  ![1704331503594](./assets/1704331503594.png)

* 配置环境变量 MAVEN_HOME 为安装路径的bin目录

  ![1704331600591](./assets/1704331600591.png)

* JAVA_HOME也配置一下，没有就点击新建

  ![1704331672991](./assets/1704331672991.png)

  ![1704331722280](./assets/1704331722280.png)

* 配置本地仓库：修改 conf/settings.xml 中的 localRepository 为一个指定目录，localRepository本地仓库目录

  ![1704331938361](./assets/1704331938361.png)

  上面的目录，必须要有，如下：

  ![1704332045001](./assets/1704332045001.png)

* 配置阿里云私服：修改 conf/settings.xml 中的 mirrors标签，为其添加如下子标签：

  ![1704332122900](./assets/1704332122900.png)

配置阿里云私服：

```xml
<mirror>  
    <id>alimaven</id>  
    <name>aliyun maven</name>  
    <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
    <mirrorOf>central</mirrorOf>          
</mirror>
```

## 三，Maven的基本使用

### 1，Maven的基本使用

常用命令：

* compile ：编译
* clean：清理
* test：测试
* package：打包
* install：安装

生命周期讲解：Maven 构建项目生命周期描述的是一次构建过程经历经历了多少个事件。Maven 对项目构建的生命周期划分为3套：

* clean：清理工作
* default：核心工作，例如编译，测试，打包，安装等
* site：产生报告，发布站点等

![1702349788434](./assets/1702349788434.png)

default构建生命周期：

![1702349846600](./assets/1702349846600.png)

## 四，IDEA配置Maven

### 1，IDEA配置Maven环境

第一步：选择 IDEA中 File => Settings

![1704332211300](./assets/1704332211300.png)

第二步：搜索 maven，设置 IDEA 使用本地安装的 Maven，并修改配置文件路径

![1704332385696](./assets/1704332385696.png)



### 2，Maven坐标详解

什么是坐标？

* Maven 中的坐标是资源的唯一标识
* 使用坐标来定义项目或引入项目中需要的依赖

Maven 坐标主要组成

* groupId：定义当前Maven项目隶属组织名称（通常是域名反写，例如：com.malu）
* artifactId：定义当前Maven项目名称（通常是模块名称，例如 order-service、goods-service）
* version：定义当前项目版本号

![1702350131055](./assets/1702350131055.png)

### 3，IDEA创建基于Maven的项目

第一步：先创建一个空的项目，并配置JDK

![1704332690264](./assets/1704332690264.png)

![1704332674071](./assets/1704332674071.png)





第二步：创建模块，选择Maven，点击Next

![1704332816726](./assets/1704332816726.png)



第二步：填写模块名称，坐标信息，点击finish，创建完成

![1704332975983](./assets/1704332975983.png)

创建完毕后，对应的目录结构如下：

![1704333164718](./assets/1704333164718.png)



第三步：编写 HelloWorld，并运行，如下：

![1704333301513](./assets/1704333301513.png)



### 4，IDEA导入别人的Maven项目

第一步：选择右侧Maven面板，点击 + 号

![1704333444503](./assets/1704333444503.png)



第二步：选中对应项目的pom.xml文件，双击即可

![1704333512274](./assets/1704333512274.png)

第三步：如果没有Maven面板，选择View=>Appearance=>Tool Window Bars

![1704333385223](./assets/1704333385223.png)



### 5，IDEA配置Maven插件

第一步：选择 IDEA中 File --> Settings

![1704333556858](./assets/1704333556858.png)



第二步：选择 Plugins

![1704333615800](./assets/1704333615800.png)

第三步：搜索 Maven，选择第一个 Maven Helper，点击Install安装，弹出面板中点击Accept

![1704333686904](./assets/1704333686904.png)

第四步：重启 IDEA



## 五，依赖管理

### 1，使用坐标导入jar包

第一步：在 pom.xml 中编写 dependencies标签
第二步：在 dependencies 标签中 使用 dependency引入坐标
第三步：定义坐标的 groupId，artifactId，version
第四步：点击刷新按钮，使坐标生效

![1702350636307](./assets/1702350636307.png)

### 2，快捷方式

第一步：在 pom.xml 中 按 alt + insert，选择 Dependency

![1702350711405](./assets/1702350711405.png)

第二步：在弹出的面板中搜索对应坐标，然后双击选中对应坐标

![1702350721855](./assets/1702350721855.png)

第三步：点击刷新按钮，使坐标生效

![1702350736393](./assets/1702350736393.png)

### 3，依赖范围

通过设置坐标的依赖范围(scope)，可以设置 对应jar包的作用范围：编译环境、测试环境、运行环境。

![1702350814269](./assets/1702350814269.png)

依赖范围解释（scope默认值：compile）：

![1702350833448](./assets/1702350833448.png)
